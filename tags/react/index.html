<!DOCTYPE html><html lang="en" data-astro-cid-tge3q7ae> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/png" href="/src/assets/icon.png"><link rel="stylesheet" href="/styles/global.css"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="èŒ¶ç†çš„åšå®¢" href="https://charlesix59.github.io/rss.xml"><meta name="generator" content="Astro v5.16.6"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://charlesix59.github.io/tags/react/"><!-- Primary Meta Tags --><title>react - èŒ¶ç†çš„åšå®¢</title><meta name="title" content="react - èŒ¶ç†çš„åšå®¢"><meta name="description" content="æŸ¥çœ‹æ‰€æœ‰å…³äº react çš„æ–‡ç«  (8 ç¯‡)"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://charlesix59.github.io/tags/react/"><meta property="og:title" content="react - èŒ¶ç†çš„åšå®¢"><meta property="og:description" content="æŸ¥çœ‹æ‰€æœ‰å…³äº react çš„æ–‡ç«  (8 ç¯‡)"><meta property="og:image" content="https://charlesix59.github.io/_astro/default.DOL7xRHI.png"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://charlesix59.github.io/tags/react/"><meta property="twitter:title" content="react - èŒ¶ç†çš„åšå®¢"><meta property="twitter:description" content="æŸ¥çœ‹æ‰€æœ‰å…³äº react çš„æ–‡ç«  (8 ç¯‡)"><meta property="twitter:image" content="https://charlesix59.github.io/_astro/default.DOL7xRHI.png"><link rel="stylesheet" href="/_astro/about.CafuXOta.css">
<style>.card-link[data-astro-cid-dohjnao5]{text-decoration:none;color:inherit}.card[data-astro-cid-dohjnao5]{display:flex;gap:1.5rem;padding:1.5rem;border-radius:0;transition:all .3s ease;background:#fff;box-shadow:0 2px 8px #0000001a}.card[data-astro-cid-dohjnao5]:hover{box-shadow:0 4px 16px #00000026;transform:translateY(-2px)}.card-image[data-astro-cid-dohjnao5]{flex-shrink:0;width:10rem;height:10rem;border-radius:0;overflow:hidden;background:#f0f0f0}.card-image[data-astro-cid-dohjnao5] img[data-astro-cid-dohjnao5]{width:100%;height:100%;object-fit:cover}.card-content[data-astro-cid-dohjnao5]{flex:1;display:flex;flex-direction:column;justify-content:center;min-width:0}.card-title[data-astro-cid-dohjnao5]{margin:0 0 .5rem;font-size:1.1rem;font-weight:600;color:rgb(var(--black));line-height:1.4;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.card-description[data-astro-cid-dohjnao5]{margin:0;font-size:.95rem;color:rgb(var(--gray));line-height:1.5;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}@media(max-width:640px){.card[data-astro-cid-dohjnao5]{padding:1rem;gap:1rem}.card-image[data-astro-cid-dohjnao5]{width:8rem;height:8rem}.card-title[data-astro-cid-dohjnao5]{font-size:1rem}.card-description[data-astro-cid-dohjnao5]{font-size:.9rem;-webkit-line-clamp:1}}.card-list[data-astro-cid-p3vyftr4]{display:flex;flex-direction:column;gap:2px;margin-top:2rem}.card-item[data-astro-cid-p3vyftr4]{background:transparent}@media(max-width:640px){.card-list[data-astro-cid-p3vyftr4]{gap:2px;margin-top:1.5rem}}.pagination[data-astro-cid-d776pwuy]{display:flex;justify-content:center;align-items:center;gap:.6rem;margin:2rem 0;flex-wrap:wrap;font-size:.95rem}.pagination-link[data-astro-cid-d776pwuy]{padding:.35rem .8rem;background-color:#e8e8e8;color:#333;text-decoration:none;border-radius:6px;font-weight:500;transition:all .3s ease;border:1px solid #d0d0d0;font-size:.9rem}.pagination-link[data-astro-cid-d776pwuy]:hover{background-color:#d8d8d8;transform:translateY(-2px);box-shadow:0 2px 8px #0000001a}.pagination-numbers[data-astro-cid-d776pwuy]{display:flex;gap:.3rem;align-items:center}.pagination-number[data-astro-cid-d776pwuy]{padding:.3rem .6rem;border:1px solid #d0d0d0;color:#333;background-color:#fff;text-decoration:none;border-radius:4px;font-weight:500;transition:all .3s ease;min-width:2rem;text-align:center;font-size:.9rem}.pagination-number[data-astro-cid-d776pwuy]:hover:not(.active){background-color:#f5f5f5;border-color:#999}.pagination-number[data-astro-cid-d776pwuy].active{background-color:#333;color:#fff;border-color:#333}.pagination-ellipsis[data-astro-cid-d776pwuy]{color:rgb(var(--gray));font-weight:500;padding:.3rem .2rem;font-size:.9rem}@media(max-width:640px){.pagination[data-astro-cid-d776pwuy]{gap:.5rem;margin:2rem 0}.pagination-link[data-astro-cid-d776pwuy]{padding:.4rem .7rem;font-size:.9rem}.pagination-number[data-astro-cid-d776pwuy]{padding:.3rem .6rem;font-size:.9rem}.pagination-numbers[data-astro-cid-d776pwuy]{gap:.3rem}}
main[data-astro-cid-tge3q7ae]{width:100%;max-width:960px;margin:0 auto;padding:2rem 1rem;box-sizing:border-box}.tag-header[data-astro-cid-tge3q7ae]{margin-bottom:3rem}.tag-header-content[data-astro-cid-tge3q7ae]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.back-link[data-astro-cid-tge3q7ae]{display:inline-flex;align-items:center;gap:.5rem;color:rgb(var(--accent));text-decoration:none;font-weight:500;transition:all .3s ease}.back-link[data-astro-cid-tge3q7ae]:hover{gap:1rem}.back-link[data-astro-cid-tge3q7ae]:before{content:"â†"}.tag-title[data-astro-cid-tge3q7ae]{display:inline-block;font-size:2.5rem;margin:0;color:rgb(var(--black));padding:.5rem 1.5rem;background:linear-gradient(135deg,#2680d9,#26d980);color:#fff;border-radius:20px}.tag-info[data-astro-cid-tge3q7ae]{display:flex;gap:2rem;margin-top:1rem;color:rgb(var(--gray));font-size:1.1rem}.tag-info-item[data-astro-cid-tge3q7ae]{display:flex;align-items:center;gap:.5rem}.tag-info-icon[data-astro-cid-tge3q7ae]{font-size:1.3rem}.empty-state[data-astro-cid-tge3q7ae]{text-align:center;padding:3rem 1rem;color:rgb(var(--gray))}.empty-state[data-astro-cid-tge3q7ae] p[data-astro-cid-tge3q7ae]{font-size:1.1rem}@media(max-width:768px){main[data-astro-cid-tge3q7ae]{padding:1.5rem .75rem}.tag-header[data-astro-cid-tge3q7ae]{margin-bottom:2rem}.tag-header-content[data-astro-cid-tge3q7ae]{flex-direction:column;align-items:flex-start;gap:.5rem}.back-link[data-astro-cid-tge3q7ae]{font-size:.95rem}.tag-title[data-astro-cid-tge3q7ae]{font-size:2rem;padding:.4rem 1rem}.tag-info[data-astro-cid-tge3q7ae]{flex-direction:column;gap:.5rem;font-size:1rem}}@media(max-width:480px){main[data-astro-cid-tge3q7ae]{padding:1rem .5rem}.tag-header[data-astro-cid-tge3q7ae]{margin-bottom:1.5rem}.tag-title[data-astro-cid-tge3q7ae]{font-size:1.5rem;padding:.3rem .8rem}.tag-info[data-astro-cid-tge3q7ae]{font-size:.9rem;gap:.3rem}.tag-info-icon[data-astro-cid-tge3q7ae]{font-size:1.1rem}.back-link[data-astro-cid-tge3q7ae]{font-size:.9rem}}
</style></head> <body data-astro-cid-tge3q7ae> <header data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2><a href="/" data-astro-cid-3ef6ksr2>èŒ¶ç†çš„åšå®¢</a></h2> <div class="internal-links" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> é¦–é¡µ </a>  <a href="/tags" class="active" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> æ ‡ç­¾ </a>  <a href="/about" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> å…³äºæˆ‘ </a>  </div> <div class="social-links" data-astro-cid-3ef6ksr2> <a href="https://https://github.com/charlesix59" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>find me on Github</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-3ef6ksr2></path></svg> </a> </div> </nav> </header>  <main data-astro-cid-tge3q7ae> <section class="tag-header" data-astro-cid-tge3q7ae> <div class="tag-header-content" data-astro-cid-tge3q7ae> <a href="/tags/" class="back-link" data-astro-cid-tge3q7ae>è¿”å›æ ‡ç­¾äº‘</a> </div> <h1 class="tag-title" data-astro-cid-tge3q7ae>react</h1> <div class="tag-info" data-astro-cid-tge3q7ae> <div class="tag-info-item" data-astro-cid-tge3q7ae> <span class="tag-info-icon" data-astro-cid-tge3q7ae>ğŸ“</span> <span data-astro-cid-tge3q7ae>8 ç¯‡æ–‡ç« </span> </div> <div class="tag-info-item" data-astro-cid-tge3q7ae> <span class="tag-info-icon" data-astro-cid-tge3q7ae>ğŸ“…</span> <span data-astro-cid-tge3q7ae>æœ€æ–°: 2024/12/19</span> </div> </div> </section>  <div class="card-list" data-astro-cid-p3vyftr4> <div class="card-item" data-astro-cid-p3vyftr4> <a href="/blog/technology/css/flex_active_warp/" class="card-link" data-astro-cid-dohjnao5> <div class="card" data-astro-cid-dohjnao5> <div class="card-image" data-astro-cid-dohjnao5>  </div> <div class="card-content" data-astro-cid-dohjnao5> <h3 class="card-title" data-astro-cid-dohjnao5>flex-directionä¸ºrowæ—¶ä¸»åŠ¨æ¢è¡Œ</h3> <p class="card-description" data-astro-cid-dohjnao5># flex-directionä¸ºrowæ—¶ä¸»åŠ¨æ¢è¡Œ(React nativeä¸»åŠ¨æ¢è¡Œ)

æˆ‘ä»Šå¤©åœ¨å†™`react-native`æ—¶å€™ï¼Œé‡åˆ°äº†å¾ˆä¸èˆ’æœçš„ä¸€ä»¶äº‹æƒ…ã€‚å› ä¸ºRNé»˜è®¤æ˜¯`flex`å¸ƒå±€ï¼Œæ‰€ä»¥å¦‚æœæˆ‘æƒ³è¦å®ç°`inline`æ¨¡å¼å°±åªèƒ½è®¾ç½®çˆ¶å…ƒç´ çš„`flex-direction`çš„valueä¸º`row`ã€‚è¿™æ ·å¦‚æœæˆ‘ä»¬å¦‚æœæƒ³è¦æ¢è¡Œéœ€è¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ

è¦çŸ¥é“ï¼Œåœ¨RNä¸­æ˜¯æ²¡æœ‰`&lt;br&gt;`æ ‡ç­¾çš„ï¼Œæ‰€ä»¥è¦æƒ³æ¢è¡Œéœ€è¦é‡‡å–ä¸€äº›éå¸¸çš„æ‰‹æ®µã€‚

é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆå¥½åŠæ³•èƒ½å¤Ÿåšåˆ°ä¸»åŠ¨æ¢è¡Œå‘¢ï¼Ÿ

åœ¨æ­£å¼å¼€å§‹ä¹‹å‰æˆ‘å…ˆä¸Šä¸€ä¸ªä¾‹å­ï¼š

```jsx
const arr = [1, 2, 3, 4, 5, 6];

export default function App() {
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;View style={{ flexDirection: &#39;row&#39; }}&gt;
        {arr.map((item, index) =&gt; (
          &lt;View&gt;
            &lt;Text key={index}&gt;{item}&lt;/Text&gt;
          &lt;/View&gt;
        ))}
      &lt;/View&gt;
    &lt;/SafeAreaView&gt;
  );
}
```

å¾ˆæ˜æ˜¾ï¼Œä¸Šè¿°çš„ä»£ç ä¼šç”Ÿæˆä¸€ä¸ªçºµå‘æ’åˆ—çš„`123456`ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨**æ¯ä¸‰ä¸ªæ–­ä¸€ä¸‹**ï¼Œå³å°†çºµå‘çš„`123456`æ”¹æˆæ¨ªå‘çš„`123 &lt;br&gt; 456`åº”è¯¥å¦‚ä½•åšå‘¢ï¼Ÿ

åˆšå¼€å§‹çš„æ—¶å€™æˆ‘é—®äº†ChatGPTï¼Œä»–ç»™å‡ºçš„ç­”æ¡ˆæ˜¯ä½¿ç”¨ä¼ªç±»æ’‘å¼€å…ƒç´ ï¼š

```html
&lt;div class=&quot;flex-container&quot;&gt;
  &lt;div class=&quot;flex-item&quot;&gt;1&lt;/div&gt;
  &lt;div class=&quot;flex-item break-after&quot;&gt;2&lt;/div&gt; &lt;!-- æƒ³è¦åœ¨è¿™ä¸ªå…ƒç´ åæ¢è¡Œ --&gt;
  &lt;div class=&quot;flex-item&quot;&gt;3&lt;/div&gt;
  &lt;div class=&quot;flex-item&quot;&gt;4&lt;/div&gt;
&lt;/div&gt;
```

```css
.flex-container {
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
}

.flex-item {
  width: 100px;
  margin: 5px;
}

.break-after::after {
  content: &quot;&quot;;
  flex-basis: 100%;
}
```

ç»è¿‡æˆ‘çš„å°è¯•ï¼Œè¿™ç§æ–¹æ³•å¾ˆé—æ†¾çš„ä¸èµ·ä»»ä½•ä½œç”¨ï¼Œè€Œä¸”åœ¨RNä¸­ä½¿ç”¨CSS classå¹¶ä¸æ˜¯å¾ˆå®¹æ˜“ã€‚ä½†æ˜¯ä»–ç»™å‡ºçš„ä»£ç ç¡®å®ç»™äº†æˆ‘ä¸€äº›å¯å‘ï¼Œç»è¿‡ä¸€äº›æ‘¸ç´¢ï¼Œæˆ‘å‘ç°**å¦‚æœä¸€æ¬¡æ¸²æŸ“ä¸¤ä¸ªå…ƒç´ ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯æ­£å¸¸å…ƒç´ è€Œå¦ä¸€ä¸ªè´Ÿè´£æ’‘å¼€å…ƒç´ **ï¼Œé‚£ä¹ˆå°±å¯ä»¥å®ç°æ¢è¡Œï¼Œä»£ç å¦‚ä¸‹ï¼š

```jsx
const arr = [1, 2, 3, 4, 5, 6];

export default function App() {
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;View style={{ flexDirection: &#39;row&#39;, flexWrap: &#39;wrap&#39;, width: 200 }}&gt;
        {arr.map((item, index) =&gt; {
          if (item % 3 !== 0) {
            return &lt;Text key={index}&gt;{item}&lt;/Text&gt;;
          } else {
            return (
              &lt;&gt;
                {[
                  &lt;Text key={index}&gt;{item}&lt;/Text&gt;,
                  &lt;View style={{ width: &#39;100%&#39; }}&gt;&lt;/View&gt;,
                ]}
              &lt;/&gt;
            );
          }
        })}
      &lt;/View&gt;
    &lt;/SafeAreaView&gt;
  );
}
```

ä½†æ˜¯å¾ˆæŠ±æ­‰ï¼Œè¿™æ ·ä¾æ—§æœ‰ç¼ºé™·ï¼Œå› ä¸ºreactNativeä¸­`&lt;&gt;&lt;/&gt;`å®é™…ä¸Šä¼šå½±å“ç»§æ‰¿ï¼Œå³Textå’ŒViewå°†ä¼šè¢«çœ‹ä½œä¸€ä¸ªæ•´ä½“ï¼Œè€Œä¸ä¼šè¢«è§£ææˆä¸¤ä¸ªå•ç‹¬çš„å…ƒç´ ï¼Œ**å¹¶ä¸”`return`ä¸­çš„`jsx fragment`å¿…é¡»æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹**ï¼Œä¹Ÿå°±è¯´è¯´è¿™ç§æ–¹æ³•ä¸é¡¶ä¸ŠcharGPTç»™å‡ºçš„æ–¹æ³•å¹¶æ²¡æœ‰åŒºåˆ«ï¼Œéƒ½æ— æ³•å°†ä¸€ä¸ªå…ƒç´ å®Œç¾æ¢è¡Œã€‚è¿™åªä¼šè®©æˆ‘ä»¬éœ€è¦æ¢è¡Œçš„å…ƒç´ å˜ä¸ºå•ç‹¬çš„ä¸€è¡Œè€Œå·²ã€‚

é‚£ä¹ˆï¼Œè¿˜æœ‰ä»€ä¹ˆæ–¹æ³•å‘¢ï¼Ÿ

## å®Œç¾çš„æ¢è¡Œ

è¿™æ—¶å€™æˆ‘ä»¬æˆ–è®¸éœ€è¦æ›´æ–°ä¸€ä¸‹æ€è·¯ï¼Œå¦‚æœåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æ— æ³•åšåˆ°å®Œç¾çš„æ¢è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸èƒ½åœ¨æ•°æ®ä¸ŠåŠ¨ä¸€ç‚¹æ‰‹è„šå‘¢ï¼Ÿç»è¿‡ä¸€ç³»åˆ—æ€è·¯çš„è½¬æ¢ï¼Œæˆ‘çªç„¶æƒ³åˆ°æˆ‘ä»¬å®Œå…¨å¯ä»¥**è¿›è¡Œä¸€ä¸ªæ•°ç»„åˆ†å‰²+å…ƒç´ åµŒå¥—çš„æ–¹å¼å®ç°æ¢è¡Œ**ï¼Œä»£ç å¦‚ä¸‹ï¼š

```jsx
const arr = [1, 2, 3, 4, 5, 6];
export default function App() {
  const [arrState, setArrState] = useState([]);
  useEffect(() =&gt; {
    const result = [];
    let tempArr = [];
    arr.forEach((item) =&gt; {
      tempArr.push(item);
      if (item % 3 === 0) {
        result.push(tempArr);
        tempArr = [];
      }
    });
    setArrState(result);
  }, []);
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      {arrState.map((subArr, index) =&gt; (
        &lt;View
          key={index}
          style={{ flexDirection: &#39;row&#39;, flexWrap: &#39;wrap&#39;, width: 200 }}&gt;
          {subArr.map((item, subIndex) =&gt; {
            return &lt;Text key={subIndex}&gt;{item}&lt;/Text&gt;;
          })}
        &lt;/View&gt;
      ))}
    &lt;/SafeAreaView&gt;
  );
}
```

ç»ˆäºï¼Œæˆ‘ä»¬å®ç°äº†å®Œç¾çš„æ¢è¡Œï¼

soï¼Œå¦‚æœä½ ä¹Ÿæƒ³è¦åœ¨flexå¸ƒå±€ä¸­å°è¯•ä¸»åŠ¨æ¢è¡Œï¼Œé‚£ä¹ˆå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿè§£ç­”ä½ çš„ç–‘æƒ‘ã€‚

å½“ç„¶ï¼Œå¦‚æœä½ æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œéå¸¸å¸Œæœ›èƒ½åœ¨ä¸‹æ–¹è¯„è®ºåŒºå’Œæˆ‘åˆ†äº«ä½ çš„å¥½ä¸»æ„ğŸ¤—</p> </div> </div> </a>  </div><div class="card-item" data-astro-cid-p3vyftr4> <a href="/blog/technology/react/react_node/" class="card-link" data-astro-cid-dohjnao5> <div class="card" data-astro-cid-dohjnao5> <div class="card-image" data-astro-cid-dohjnao5>  </div> <div class="card-content" data-astro-cid-dohjnao5> <h3 class="card-title" data-astro-cid-dohjnao5>å¦‚ä½•åœ¨ react è¡¨è¾¾å¼ä¸­ä¼ å…¥ react node[] (èŠ‚ç‚¹æ•°ç»„)</h3> <p class="card-description" data-astro-cid-dohjnao5># å¦‚ä½•åœ¨ react è¡¨è¾¾å¼ä¸­ä¼ å…¥ react node[] (èŠ‚ç‚¹æ•°ç»„)

æˆ‘ä»¬çŸ¥é“ jsx è¡¨è¾¾å¼å…è®¸æ’å…¥`reactNode`ä»¥åŠ`ReactNode[]`ï¼Œå½“ä½†æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªç±»ä¼¼çš„ä¸œè¥¿çš„æ—¶å€™ä»–å´ä¼šæŠ¥é”™ï¼š

```jsx
&lt;div className=&#39;App&#39;&gt;
  {
    &lt;p&gt;aaa&lt;/p&gt;
    &lt;p&gt;bbb&lt;/p&gt; // âŒ JSX expressions must have one parent element
  }
&lt;/div&gt;
```

ä½†æ˜¯æˆ‘ä»¬æ˜æ˜å¯ä»¥ä½¿ç”¨ map å‡½æ•°ä¼ å…¥æ•°ç»„å‘€ï¼

```jsx
&lt;div className=&quot;App&quot;&gt;
  {arr.map((num) =&gt; (
    &lt;p key={num}&gt;{num}&lt;/p&gt;
  ))}
&lt;/div&gt;
```

å¦‚æœæˆ‘ä»¬å¸Œæœ›æ‰‹åŠ¨åœ¨è¡¨è¾¾å¼ä¸­ä¼ å…¥ä¸€ä¸ªèŠ‚ç‚¹æ•°ç»„æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿå½“æˆ‘é‡åˆ°è¿™ç§å¥‡è‘©é—®é¢˜çš„æ—¶å€™æˆ‘ä¹Ÿæ˜¯æ„£äº†ä¸€ä¼šçš„ï¼Œç»è¿‡æˆ‘å¯¹`Array.map()`æ–¹æ³•çš„è§‚å¯Ÿï¼Œæˆ‘çªç„¶é¡¿æ‚Ÿï¼Œå¦‚æœæƒ³è¦æ‰‹åŠ¨ä¼ å…¥ä¸€ä¸ªèŠ‚ç‚¹æ•°ç»„åº”è¯¥è¿™ä¹ˆå†™ï¼š

```jsx
&lt;div className=&quot;App&quot;&gt;{[&lt;p&gt;aaa&lt;/p&gt;, &lt;p&gt;bbb&lt;/p&gt;]}&lt;/div&gt;
```

ä½†æ˜¯å›å¤´æƒ³æƒ³è¿™ä¸ªé—®é¢˜å¥‡æ€ªçš„å¾ˆï¼Œæˆ‘ä»¬æ˜æ˜å¯ä»¥å†™æˆï¼š

```jsx
&lt;div className=&quot;App&quot;&gt;
  &lt;p&gt;aaa&lt;/p&gt;
  &lt;p&gt;bbb&lt;/p&gt;
&lt;/div&gt;
```

ä½†æ˜¯å…¶å®æœ‰æ—¶å€™æˆ‘ä»¬çœŸçš„ä¼šéœ€è¦æ‰‹åŠ¨çš„ä¼ å…¥ä¸€ä¸ª`node[]`ï¼Œæ¯”å¦‚æœ‰äº›ç»„ä»¶å¯èƒ½åªæ¥å—ä¸€ä¸ªèŠ‚ç‚¹æ•°ç»„è€Œä½ åˆåªæœ‰æœ‰é™ä¸ªèŠ‚ç‚¹ä¸å¸Œæœ›ä½¿ç”¨`map()`ï¼Œæˆ–è€…æ˜¯è°ƒè¯•æ—¶å€™ä½¿ç”¨ï¼Œå†æˆ–è€…æ˜¯å¸Œæœ›åœ¨æ¸²æŸ“åˆ—è¡¨ä¸­åŠ å…¥å‡ ä¸ªä¸ä¹‹å‰çš„èŠ‚ç‚¹ç»“æ„ä¸åŒçš„èŠ‚ç‚¹ï¼Œæ¯”å¦‚ä»¥ä¸‹è¿™ä¸ªå®ä¾‹ï¼š

```jsx
&lt;div className=&quot;App&quot;&gt;
  {arr.map((num) =&gt; &lt;p key={num}&gt;{num}&lt;/p&gt;)
    .concat([&lt;p&gt;aaa&lt;/p&gt;, &lt;p&gt;bbb&lt;/p&gt;])}
&lt;/div&gt;
```

ä»¥ä¸Šå°±æ˜¯å¦‚ä½•ä½¿ç”¨`reactNode[]`çš„ä¸€ç‚¹ä¸ªäººå¿ƒå¾—å’¯</p> </div> </div> </a>  </div><div class="card-item" data-astro-cid-p3vyftr4> <a href="/blog/technology/react/use_effect/" class="card-link" data-astro-cid-dohjnao5> <div class="card" data-astro-cid-dohjnao5> <div class="card-image" data-astro-cid-dohjnao5>  </div> <div class="card-content" data-astro-cid-dohjnao5> <h3 class="card-title" data-astro-cid-dohjnao5>å…¨é¢ç†è§£useEffectâ€”â€”useEffectç”¨æ³•è§£æä¸ä½¿ç”¨æŠ€å·§</h3> <p class="card-description" data-astro-cid-dohjnao5># å…¨é¢ç†è§£useEffect

`useEffect`å¯ä»¥è¯´æ˜¯reactçš„hookä¸­æœ€å¼ºå¤§çš„ä¸€ä¸ªï¼Œä»–èƒ½å¤Ÿä»¥ä¸€ç§æä¸ºä¼˜é›…çš„æ–¹å¼æ¨¡æ‹Ÿæˆ‘ä»¬çš„ç”Ÿå‘½å‘¨æœŸã€‚ä½†æ˜¯ä¼˜é›…çš„ä»£ä»·å°±æ˜¯è¿™ä¸ªhookæå…¶çš„æ™¦æ¶©ï¼Œä¸å®¹æ˜“è¢«ç†è§£ä¸æŒæ¡ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥å…¨æ–¹ä½çš„æ¢è®¨ä¸€ä¸‹ï¼Œ`useEffect`åˆ°åº•æ€ä¹ˆç”¨

## useEffectçš„ç»“æ„

åœ¨ä¸Šä¸€ç¯‡å…³äºreactçš„æ–‡ç« æˆ‘æåˆ°è¿‡ï¼Œå‡½æ•°å¼ç»„ä»¶æ¯æ¬¡`reRender`éƒ½ä¼šé‡æ–°æ‰§è¡Œä¸€éï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ç”Ÿå‘½å‘¨æœŸçš„æ•ˆæœï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦`useEffect`å‡½æ•°ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹useEffectçš„ç»“æ„ï¼š

```js
useEffect(setup, dependencies?)
```

- å‚æ•°

    - `setup`ï¼šä¸€ä¸ªå®ç°äº†ä½ éœ€è¦çš„å‰¯ä½œç”¨é€»è¾‘çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°†ä¼šåœ¨ç»„ä»¶é¦–æ¬¡è¢«ç»‘å®šä»¥åŠæ¯æ¬¡**é‡æ–°æ¸²æŸ“å¯¼è‡´`dependencies`æ›´æ–°æ—¶**è°ƒç”¨ã€‚åŒæ—¶ä»–è¿˜å¯ä»¥`return`ä¸€ä¸ªæ¸…é™¤å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°†ä¼šåœ¨å‡½æ•°å¸è½½ä»¥åŠæ¯æ¬¡**é‡æ–°æ¸²æŸ“å¯¼è‡´`dependencies`æ›´æ–°ä¹‹å‰**è°ƒç”¨

    - `dependencies`ï¼šåœ¨`setup`ä¸­å¼•ç”¨çš„æ‰€æœ‰`reactive values`ï¼ˆstateã€å‚æ•°ä»¥åŠåœ¨ç»„ä»¶å†…éƒ¨å®šä¹‰çš„å˜é‡å’Œå‡½æ•°ï¼‰æˆ–æ›´æ–°å‡­æ®ç»„æˆçš„æ•°ç»„ã€‚è¿™ä¸ªæ•°ç»„å¿…é¡»æ˜¯æœ‰é™çš„å¹¶ä¸”åå¹³çš„ï¼Œæ¯æ¬¡æ›´æ–°reactå°†ä½¿ç”¨`Object.is()`æ¯”è¾ƒæ¯ä¸ªä¾èµ–é¡¹æ˜¯å¦ä¸ä¹‹å‰ç›¸åŒï¼Œå¦‚æœä¸åŒåˆ™æ›´æ–°ã€‚

- return

    - `undefinded` ï¼ˆæ— è¿”å›å€¼ï¼‰

ä¸­æ–‡åšå®¢ä¸­ç»å¸¸ä¼šæ¼æ‰`setup`å‡½æ•°çš„è¿”å›å€¼ï¼Œä½†æ˜¯å®ƒçš„è¿”å›å€¼æ˜¯è¿™ä¸ªå‡½æ•°çš„åŠå£æ±Ÿå±±ï¼Œæˆ‘ä»¬å†³ä¸èƒ½å°†å…¶å¿½ç•¥ä¸æï¼Œå¦‚æœå¿½ç•¥æ‰çš„è¯æˆ‘ä»¬å°±æœ‰ä¸€åŠçš„æ•ˆæœæ— æ³•å®ç°äº†ã€‚

â—ï¼š`useEffect`ä¹Ÿæ˜¯ä¸€ä¸ªhookï¼Œè¯·åœ¨ç»„ä»¶æˆ–è€…è‡ªå®šä¹‰hookçš„æœ€ä¸Šå±‚ä½¿ç”¨ï¼Œä¸è¦åœ¨å¾ªç¯æˆ–åˆ†æ”¯ç»“æ„ä¸­å®šä¹‰hook

## æ¨¡æ‹Ÿç”Ÿå‘½å‘¨æœŸ

reactç”Ÿå‘½å‘¨æœŸå¤§æ¦‚åˆ†ä¸ºä¸‰ç§ï¼Œ`mount`ã€`update`ã€`unmount`ï¼Œå½“ç„¶åœ¨ç±»å¼ç»„ä»¶ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥è§„å®šæ˜¯åœ¨mountä¹‹å‰ï¼Œmountæ—¶è¿˜æ˜¯mountä¹‹åè°ƒç”¨ï¼Œåœ¨å‡½æ•°å¼ç»„ä»¶æˆ‘ä»¬å°±ä¸åˆ†çš„è¿™ä¹ˆæ¸…æ¥šäº†ï¼Œå› ä¸ºåœ¨å‡½æ•°å¼ç»„ä»¶æˆ‘ä»¬çš„ç”Ÿå‘½å‘¨æœŸå…¶å®æ˜¯ç‹¬ç«‹çš„ï¼Œæ˜¯é¢å‘çŠ¶æ€çš„ã€‚

ä¸‹é¢æˆ‘ä»¬å°±ä½¿ç”¨useEffectç®€å•æ¨¡æ‹Ÿä¸€ä¸‹ç±»å¼ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼š

**åªåœ¨åˆå§‹åŒ–æ—¶æ‰§è¡Œ(`DidMounted`)** ï¼š

```js
// ä¸ä¾èµ–ä»»ä½•å˜é‡ï¼Œåˆ™ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„
useEffect(() =&gt; {
    console.log(&quot;init&quot;);
    return () =&gt; {};
  }, []);
```

**æ¯æ¬¡æ›´æ–°æ—¶æ‰§è¡Œ(`render`)** ï¼š

```js
// ä¾èµ–æ‰€æœ‰å˜é‡ï¼Œåˆ™ä¸ä¼ å…¥
useEffect(() =&gt; {
    console.log(&quot;rerender&quot;);
  });
```

**æ¯æ¬¡å¸è½½æ—¶æ‰§è¡Œ(`beforeUnmount`)** ï¼š

```js
// ä¸ä¾èµ–ä»»ä½•å˜é‡ï¼Œreturnçš„å‡½æ•°å°†ä¼šåœ¨å¸è½½ä¹‹å‰è¢«è°ƒç”¨
useEffect(() =&gt; {
    return () =&gt; {console.log(&quot;unmount&quot;);};
  }, []);
```

å®é™…ä¸Šï¼Œæˆ‘ä»¬ç»å¸¸è¯´`useEffect`çš„ä½œç”¨æ˜¯æ¨¡æ‹Ÿå£°æ˜å‘¨æœŸï¼Œè€Œè¿™ä¼¼ä¹è¿èƒŒäº†å‡½æ•°å¼ç»„ä»¶çš„åˆè¡·ï¼Œä¹Ÿè¿èƒŒäº†`useEffect`çš„åˆè¡·ã€‚æˆ‘ä»¬åº”è¯¥å¤šä»**çŠ¶æ€**çš„è§’åº¦å»æ€è€ƒï¼Œ`useEffect`å¹¶éæ˜¯ä»€ä¹ˆç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œè€Œæ˜¯**çŠ¶æ€æ›´æ–°**å‡½æ•°ã€‚

## æ§åˆ¶æ›´æ–°

å¦‚æœæŸä¸ªå˜é‡åœ¨æ¯æ¬¡ç»„ä»¶æ›´æ–°çš„æ—¶å€™éƒ½éœ€è¦æ›´æ–°ï¼Œé‚£æˆ‘ä»¬å®Œå…¨æ²¡æœ‰å¿…è¦ä½¿ç”¨`useEffect`ï¼Œæˆ‘ä»¬ä½¿ç”¨å‰¯ä½œç”¨é’©å­ä¸€å®šæ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦æ§åˆ¶æŸä¸ªå˜é‡çš„æ›´æ–°ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`useEffect`å°†**ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€ä¸ç»„ä»¶å¤–éƒ¨ç³»ç»ŸåŒæ­¥**ï¼š

```jsx
// æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨çˆ¶ç»„ä»¶æ›´æ–°propsçš„æ—¶å€™è°ƒç”¨useEffect
const Child = ({ count }) =&gt; {
  const [childContext, setChildContext] = useState(0);
  useEffect(() =&gt; {
    setChildContext(count);
  }, [count]);
  return &lt;p&gt;this is a child, count = {childContext}&lt;/p&gt;;
};
```

æˆ–è€…æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`useEffect`å°†**ç»„ä»¶ç»„ä»¶å¤–éƒ¨ç³»ç»Ÿä¸å†…éƒ¨çš„çŠ¶æ€åŒæ­¥**ï¼š

```jsx
import &quot;./styles.css&quot;;
import { useEffect, useState } from &quot;react&quot;;

const fetch = async (count) =&gt; {
  // å‡è®¾è¿™æ˜¯ä¸€ä¸ªç½‘ç»œè¯·æ±‚
  // å½“ç„¶ï¼Œè¿™ä¸ªå¤–éƒ¨çŠ¶æ€ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¤–éƒ¨ç»„ä»¶ï¼Œå¤–éƒ¨å˜é‡ï¼ŒjsAPIç­‰ç­‰
  await new Promise(() =&gt; {
    setTimeout(() =&gt; {
      console.log(&quot;fetch date&quot;);
    }, count);
  });
};

export default function App() {
  const [count, setCount] = useState(0);
  const onClick = () =&gt; {
    setCount(count + 1);
  };
  // æ¯æ¬¡ä¿®æ”¹countéƒ½ä¼šå°†æ›´æ”¹åŒæ­¥å¤–éƒ¨ç³»ç»Ÿ
  useEffect(() =&gt; {
    fetch(count);
  }, [count]);
  return (
    &lt;div className=&quot;App&quot;&gt;
      &lt;button onClick={onClick}&gt;Change state in father&lt;/button&gt;
      &lt;p&gt;count is {count}&lt;/p&gt;
    &lt;/div&gt;
  );
}
```

å…¶å®ç”Ÿå‘½å‘¨æœŸä¹Ÿä¸è¿‡æ˜¯å¯¹çŠ¶æ€çš„ç»Ÿä¸€æ›´æ”¹ï¼Œreactç°åœ¨åªæ˜¯å°†ç”Ÿå‘½å‘¨æœŸå°†é¢—ç²’åº¦ä»ç»„ä»¶é™ä½åˆ°äº†çŠ¶æ€ã€‚

## ä¸€äº›tips

### åœ¨useEffectä¸­ä½¿ç”¨state

æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦åœ¨`useEffect`ä¸­ä½¿ç”¨å’Œä¿®æ”¹`state`ï¼Œä½†æ˜¯è¿™æ˜¯æç«¯å±é™©çš„è¡Œä¸ºï¼Œå› ä¸ºå½“æˆ‘ä»¬ä¿®æ”¹`state`æ—¶ä¼šè§¦å‘é¡µé¢çš„`rerender`ï¼Œç„¶åå› ä¸º`useEffect`ä¾èµ–äº†`state`ï¼Œè¿™å°†ä¼šå¯¼è‡´`state`è¢«å†æ¬¡æ›´æ”¹ç»§è€Œå¼•èµ·æ­»å¾ªç¯â€¦â€¦

```jsx
const Child = ({ count }) =&gt; {
    const [childContext, setChildContext] = useState(0);
    useEffect(() =&gt; {
        setChildConte(childContext);
    }, [count, childContext]);
    // !! åƒä¸‡ä¸è¦è¿™ä¹ˆåšï¼Œä¼šå¼•å‘æ­»å¾ªç¯
    return &lt;p&gt;this is a child, count = {childContext}&lt;/p&gt;;
};
```

å¦‚æœæˆ‘ä»¬åœ¨`useEffect`ä¸­æ ¹æ®ä¹‹å‰çš„stateæ›´æ–°stateï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š

```jsx
useEffect(() =&gt; {
  setChildContext(c =&gt; c + 1);
}, [count]);
// ä¸éœ€è¦ä¾èµ–childContextï¼Œå®‰å…¨
```

å¦‚æœä½ çœŸçš„æ—¢è¦åœ¨Effectä¸­è¯»å–stateï¼Œåˆè¦ä¿®æ”¹stateï¼Œé‚£ä¹ˆæˆ‘ç»™å‡ºçš„å»ºè®®æ˜¯ï¼Œï¼š**ä½¿ç”¨ä¸¤ä¸ªä¾èµ–åŒä¸€ä¸ªæ›´æ–°å‡­è¯`useEffect`**

åƒä¸‡åˆ«è¿™ä¹ˆåšï¼š

```jsx
useEffect(() =&gt; {
  setChildContext(Math.random())
  console.log(childContext)
}, [count, childContext])
// æ­»å¾ªç¯ï¼ï¼ğŸ˜­
```

æ­£ç¡®çš„åšæ³•å¦‚ä¸‹ï¼š

```jsx
useEffect(() =&gt; {
  setChildContext(Math.random())
}, [count]);
useEffect(() =&gt; {
  console.log(childContext)
}, [count, childContext])
// å®‰å…¨ğŸ˜Š
```

### æ¶ˆé™¤ä¸å¿…è¦çš„å¯¹è±¡ä¸å‡½æ•°ä¾èµ–

å¦‚æœæˆ‘ä»¬åœ¨ç»„ä»¶å†…å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°æˆ–å¯¹è±¡ï¼Œæˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« è¯¦ç»†è®²è¿‡ï¼Œå®ƒæ¯æ¬¡éƒ½ä¼šè¢«åˆå§‹åŒ–ã€‚å°±åƒè¿™æ ·ï¼š

```jsx
const childContext = {
    count: 1
}
useEffect(() =&gt; {
    childContext.count = count;
    console.log(&quot;run effect&quot;)
    // ä¸è¦è¿™æ ·ï¼Œæ¯æ¬¡Renderéƒ½ä¼šè§¦å‘effectğŸ˜”
}, [count, childContext]);
```

å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œå¦‚æœä½ çš„å¯¹è±¡æˆ–è€…å‡½æ•°åªåœ¨`useEffect`ä¸­ä½¿ç”¨ï¼Œåˆ™å†™åœ¨`setup`å†…éƒ¨

```jsx
const Child = ({count}) =&gt; {
  useEffect(() =&gt; {
    const childContext = {
      count: 1
    }
    childContext.count = count;
    console.log(&quot;run effect&quot;)
  }, [count]);
  // æ¨èï¼Œåªæœ‰åœ¨ä¾èµ–æ›´æ–°çš„æ—¶å€™æ‰ä¼šè§¦å‘effect ğŸ˜Š
  return &lt;p&gt;this is a child&lt;/p&gt;;
};
```

å¦‚æœä½ æ˜¯å¸Œæœ›æœ‰ä¸€ä¸ªåœ¨æ•´ä¸ªç»„ä»¶éƒ½å¯ä»¥è¢«è®¿é—®çš„é™æ€å˜é‡ï¼Œé‚£ä¹ˆå¯ä»¥å°†å¯¹è±¡å†™åœ¨ç»„ä»¶å¤–éƒ¨ï¼š

```jsx
const childContext = {
  count: 1
}
const Child = ({count}) =&gt; {
  useEffect(() =&gt; {
    childContext.count = count;
    console.log(&quot;run effect&quot;)
  }, [count]);
  // æ¨èï¼Œåªæœ‰åœ¨ä¾èµ–æ›´æ–°çš„æ—¶å€™æ‰ä¼šè§¦å‘effect ğŸ˜Š
  return &lt;p&gt;this is a child&lt;/p&gt;;
};
```

## useLayoutEffect

æˆ‘ä»¬åœ¨ä½¿ç”¨`useEffect`çš„æ—¶å€™æœ‰æ—¶ä¼šå‡ºç°ä¸€ç§é—®é¢˜ï¼šæˆ‘ä»¬çš„ç»„ä»¶ä¼šå‘ç”Ÿé—ªçƒæˆ–çªç„¶çš„å˜åŒ–ã€‚

è¿™æ—¶å› ä¸º`useEffect`æ˜¯åœ¨`mount`ä¹‹åæ‰§è¡Œçš„ï¼Œå› æ­¤ç¬¬ä¸€æ¬¡æ¸²æŸ“å‡ºçš„å€¼æ˜¯æˆ‘ä»¬å®šä¹‰çš„åˆå§‹å€¼ï¼Œå¦‚æœæ›´æ–°çš„æ€§èƒ½æ¯”è¾ƒå·®æˆ–è€…æ›´æ–°çš„èŒƒå›´æ¯”è¾ƒå¤§ï¼Œå¯èƒ½ä¼šå¯¼è‡´æˆ‘ä»¬çš„`view`å‘ç”Ÿé—ªçƒçš„ç°è±¡ã€‚

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨`useLayoutEffect`ï¼Œä»–å’Œ`useEffect`çš„æœ€å¤§åŒºåˆ«å°±æ˜¯ä»–æ˜¯åœ¨`mount`ä¹‹å‰æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ä¸ä¼šå¯¼è‡´`view`çš„é—ªçƒã€‚

ä½†æ˜¯å¦‚æœæˆ‘ä»¬æ²¡æœ‰å¾ˆæ˜æ˜¾çš„uié—ªçƒé—®é¢˜ï¼Œæˆ‘ä»¬åº”è¯¥å°½å¯èƒ½çš„ä½¿ç”¨`useEffect`ï¼Œå› ä¸ºå®ƒçš„è¿è¡Œæ•ˆç‡æ›´å¥½ã€‚</p> </div> </div> </a>  </div><div class="card-item" data-astro-cid-p3vyftr4> <a href="/blog/technology/react/where-put-react-func/" class="card-link" data-astro-cid-dohjnao5> <div class="card" data-astro-cid-dohjnao5> <div class="card-image" data-astro-cid-dohjnao5>  </div> <div class="card-content" data-astro-cid-dohjnao5> <h3 class="card-title" data-astro-cid-dohjnao5>åº”è¯¥åœ¨å“ªé‡Œå®šä¹‰reactå‡½æ•°â€”â€”å…³äºreactå¼€å‘è§„èŒƒçš„ä¸€äº›ç†è§£</h3> <p class="card-description" data-astro-cid-dohjnao5># åº”è¯¥åœ¨å“ªé‡Œå®šä¹‰reactå‡½æ•°â€”â€”å…³äºreactå¼€å‘è§„èŒƒçš„ä¸€äº›ç†è§£

## å‰è¨€

æˆ‘ä¹‹å‰æœ‰ä¸€ä¸ªåŒäº‹ï¼Œä»vueæŠ€æœ¯æ ˆè½¬å…¥reactæŠ€æœ¯æ ˆï¼Œå¯¹äºå‡½æ•°å¼ç¼–ç¨‹è¿˜æœ‰ä¸€äº›ä¸å¤ªç†Ÿæ‚‰ã€‚

æœ€è¿‘ä»–é—®äº†æˆ‘ä¸€ä¸ªé—®é¢˜ï¼Œ**reactå‡½æ•°åº”è¯¥å®šä¹‰åœ¨ä»€ä¹ˆåœ°æ–¹**ï¼Ÿä»–å‘ç°æœ‰äº›å‡½æ•°å†™åœ¨reactç»„ä»¶ä¹‹å†…ï¼Œæœ‰äº›å´å†™åœ¨reactå‡½æ•°ä¹‹å¤–ã€‚ä»–æƒ³çŸ¥é“å“ªç§åšæ³•æ˜¯æœ€åˆé€‚çš„ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ï¼Œå› ä¸ºè¿™ä½“ç°äº†å¯¹äºä»£ç è§„èŒƒçš„è¿½æ±‚ã€‚ç°åœ¨æˆ‘å¸Œæœ›åœ¨æ­¤å¦¥å–„çš„æ¢³ç†ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚

## çœ‹æ³•

å…ˆå¼€é—¨è§å±±çš„è¯´ä¸€ä¸‹æˆ‘çš„çœ‹æ³•ï¼Œæˆ‘çš„çœ‹æ³•å°±æ˜¯&lt;mark&gt;åº”å¤–å°½å¤–&lt;/mark&gt;ï¼Œæ„æ€å°±æ˜¯**èƒ½å¤Ÿ**æ”¾åˆ°ç»„ä»¶å¤–éƒ¨çš„å‡½æ•°éƒ½åº”è¯¥æ”¾åˆ°å¤–éƒ¨ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰æ»¡è¶³ä¸€å®šæ¡ä»¶çš„å‡½æ•°æ‰èƒ½å¤Ÿæ”¾åˆ°ç»„ä»¶å¤–éƒ¨ã€‚åœ¨å…·ä½“çš„è®¨è®ºè¿™äº›è§„åˆ™ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆæ¥çœ‹ä¸€ä¸‹å‡½æ•°å†™åœ¨ç»„ä»¶å†…ä¸ç»„ä»¶å¤–éƒ¨çš„&lt;mark&gt;åŒºåˆ«&lt;/mark&gt;ã€‚

## åŒºåˆ«

å…¶å®ä¸¤è€…çš„åŒºåˆ«ååˆ†æ˜¾è‘—ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™`jsx`æ–‡ä»¶çš„æ—¶å€™ä¸€èˆ¬æ¯ä¸ªæ–‡ä»¶ä¼šæš´éœ²ä¸€ä¸ªæ–‡ä»¶å…¥å£ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ç»„ä»¶å‡½æ•°ã€‚å½“æˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶ä½¿ç”¨æˆ‘ä»¬çš„å­ç»„ä»¶çš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±ç›¸å½“äº`new`å‡ºäº†ä¸€ä¸ªæ–°çš„ç»„ä»¶å®ä¾‹ã€‚è€Œåœ¨ç»„ä»¶å¤–çš„å‡½æ•°æˆ–è€…å˜é‡ï¼Œåˆ™ä¸ç»„ä»¶å½¢æˆäº†é—­åŒ…ã€‚ï¼ˆä¸å¤ªäº†è§£é—­åŒ…çš„å¯ä»¥ç†è§£ä¸ºç»„ä»¶å†…çš„ä¸œè¥¿æ˜¯åŸå‹æ¨¡å¼ï¼Œè€Œç»„ä»¶å¤–çš„ä¸œè¥¿æ˜¯å•ä¾‹æ¨¡å¼ï¼‰

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š

é¦–å…ˆæˆ‘ä»¬æœ‰ä¸€ä¸ªTestç»„ä»¶ï¼š

```jsx
let a = &quot;123&quot;;

const Test = (props) =&gt; {
    return(
        &lt;&gt;
            &lt;button onClick={()=&gt;{console.log(a);a = props.value;}}&gt;change&lt;/button&gt;
        &lt;/&gt;

    )
}

export default Test;
```

ç„¶åæˆ‘ä»¬åœ¨App.jsä¸­è°ƒç”¨è¿™ä¸ªç»„ä»¶ï¼š

```js
function App() {
  return (
    &lt;div className=&quot;App&quot;&gt;
      &lt;Test value={666}&gt;&lt;/Test&gt;
      &lt;Test value={777}&gt;&lt;/Test&gt;
    &lt;/div&gt;
  );
}
```

å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨è¿™é‡Œè°ƒç”¨äº†ä¸¤æ¬¡Testç»„ä»¶ï¼Œé¡µé¢ä¸Šåº”å½“æœ‰ä¸¤ä¸ªæŒ‰é’®ã€‚

è¿™æ—¶æˆ‘ä»¬åº”è¯¥æƒ³ä¸€ä¸‹ï¼Œå½“æˆ‘ä»¬ä¾æ¬¡ç‚¹å‡»è¿™ä¸¤ä¸ªæŒ‰é’®çš„æ—¶å€™è¾“å‡ºçš„æ˜¯

&gt; 123 123

è¿˜æ˜¯

&gt; 123 666

å‘¢ï¼Ÿ

ç­”æ¡ˆæ˜¾è€Œæ˜“è§ï¼Œæ˜¯`123 666`ï¼Œå„ä½å¯ä»¥è‡ªå·±å»å°è¯•ä¸€ä¸‹ã€‚å¯¼è‡´è¿™ç§ç°è±¡å‡ºç°çš„åŸå› å…¶å®ä¸æ˜¯reactçš„ç»„ä»¶ï¼Œè€Œæ˜¯æˆ‘ä»¬çš„`esm`ã€‚æˆ‘ä»¬åº”è¯¥éƒ½å¯¹é—­åŒ…æœ‰ä¸€å®šçš„æ¦‚å¿µï¼Œå…¶å®æˆ‘ä»¬çš„æ¨¡å—åŒ–æ­£æ˜¯ä½¿ç”¨äº†é—­åŒ…è¿™ä¸€æ¦‚å¿µã€‚å½“æˆ‘ä»¬åƒä¸Šæ–‡é‚£æ ·ç¼–å†™Testç»„ä»¶çš„æ—¶å€™ï¼Œå…¶å®é—­åŒ…å°±å·²ç»å½¢æˆäº†ã€‚

ä¸‹é¢æˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹å“ªäº›å‡½æ•°æ˜¯éœ€è¦æ”¾åˆ°ç»„ä»¶å†…çš„ä»¥åŠè¿™å…¶ä¸­çš„åŸå› ã€‚

## éœ€è¦åœ¨ç»„ä»¶å†…çš„å‡½æ•°

### Hookå‡½æ•°

ä¸€ä¸ªhookå‡½æ•°åªèƒ½åœ¨ä»¥ä¸‹ä¸¤ä¸ªä½ç½®å®šä¹‰ï¼š

1. è‡ªå®šä¹‰hookå‡½æ•°å†…éƒ¨

2. Reactç»„ä»¶å†…éƒ¨

ä½†æ˜¯å…¶å®æˆ‘ä»¬çš„è‡ªå®šä¹‰hookæœ€ç»ˆä¹Ÿæ˜¯åœ¨Reactç»„ä»¶å†…éƒ¨è°ƒç”¨ï¼Œæ‰€ä»¥è¿™å°±ç›¸å½“äºæ¯ä¸€ä¸ªHookå‡½æ•°æœ€ç»ˆéƒ½å¿…é¡»åœ¨Reactç»„ä»¶å†…éƒ¨ç¯å¢ƒä¸­æ‰§è¡Œã€‚

### ä¾èµ–Hookå‡½æ•°çš„å‡½æ•°

ä¸Šæ–‡è¯´è¿‡ï¼Œhookå‡½æ•°åªèƒ½åœ¨Reactç»„ä»¶å†…éƒ¨è°ƒç”¨ï¼Œé‚£ä¹ˆè°ƒç”¨hookå‡½æ•°çš„å‡½æ•°ä¹Ÿç†æ‰€åº”å½“çš„éœ€è¦å†™åœ¨ç»„ä»¶å†…éƒ¨ã€‚

### ä¾èµ–Stateçš„å‡½æ•°

å¦‚æœæˆ‘ä»¬çš„å‡½æ•°éœ€è¦ç›´æ¥ä½¿ç”¨Stateçš„å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªå‡½æ•°æ”¾ç½®åœ¨ç»„ä»¶å†…éƒ¨ï¼Œå› ä¸ºstateæ˜¯æ¯ä¸€ä¸ªç»„ä»¶å®ä¾‹ç§æœ‰çš„ï¼Œåœ¨å¤–éƒ¨çš„å‡½æ•°æ— æ³•è¯»å–åˆ°è¿™ä¸ªå€¼ã€‚ä½†æ˜¯å¯¹äºå¯èƒ½ä¼šå¤ç”¨çš„å‡½æ•°æˆ‘ä»¬è¿˜æ˜¯æ›´æ¨èå¤§å®¶ä½¿ç”¨å‚æ•°ä¼ é€’çš„æ–¹å¼ä¼ é€’stateçš„å€¼ç„¶åå†ä½¿ç”¨setStateçš„æ–¹å¼è®¾ç½®è¿”å›å€¼ã€‚

ä¸æ¨èï¼š

```jsx
// :(   not recommend

// a.jsx
const [count,setCount] = useState(1);
function a(){
    setCount(count+2);
}
// b.jsx
const [count,setCount] = useState(2);
function b(){
    setCount(count+2);
}
```

æ¨è

```jsx
// :)  recommend

//calcCount.js
function calcCount(count){
    return count+2;
}
//a.jsx
const [count,setCount] = useState(1);
setCount(calcCount(count));
// b.jsx
const [count,setCount] = useState(2);
setCount(calcCount(count));
```

### ä¾èµ–propsçš„å‡½æ•°

ä¾èµ–propsçš„å‡½æ•°å½“ç„¶ä¹Ÿä¸èƒ½å°†å…¶å†™åœ¨ç»„ä»¶å¤–é¢ã€‚æˆ‘ä»¬å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯é€šè¿‡propså»åŒºåˆ«æŸä¸€ä¸ªç»„ä»¶å‡½æ•°çš„ä¸åŒå®ä¾‹çš„ï¼Œæ‰€ä»¥propsä¹Ÿæ˜¯ç»„ä»¶å®ä¾‹ç§æœ‰çš„ï¼Œéœ€è¦å†™åœ¨å¤–é¢ã€‚

### äº‹ä»¶å¤„ç†å‡½æ•°

è™½ç„¶äº‹ä»¶å¤„ç†å‡½æ•°ä»ç†è®ºä¸Šæ¥è¯´å®Œå…¨å¯ä»¥æ”¾ç½®åˆ°ç»„ä»¶å¤–éƒ¨ï¼ˆåªè¦ä¸ä¾èµ–ä¸Šé¢æ‰€è¯´çš„ï¼‰ï¼Œä½†æ˜¯æˆ‘ä»¬ä¼šè®¤ä¸ºäº‹ä»¶å¤„ç†å‡½æ•°æ˜¯æ¯”è¾ƒç§äººçš„ä¸œè¥¿ï¼Œä»ä¹ æƒ¯ä¸Šæ¥è¯´æˆ‘ä»¬è¿˜æ˜¯æ›´ä¹ æƒ¯å°†å…¶æ”¾åˆ°ç»„ä»¶çš„å†…éƒ¨è€Œä¸æ˜¯æŠ½å‡ºåˆ°ä¸€ä¸ªutilæ–‡ä»¶ä¸­ï¼Œè€Œä¸”å¯¹äºä¸åŒç»„ä»¶çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œæˆ‘ä»¬èƒ½æŠ½è±¡çš„éƒ¨åˆ†ä¹Ÿä¼˜å…ˆã€‚

è€Œä¸”æ¯”èµ·å°†äº‹ä»¶å¤„ç†å‡½æ•°æŠ½è±¡å‡ºæ¥ï¼Œæˆ‘ä»¬æ›´æ¨èå°†äº‹ä»¶å¤„ç†å‡½æ•°ä¸­å¤„ç†é€»è¾‘çš„éƒ¨åˆ†ä»£ç æŠ½å–å‡ºæ¥ï¼Œç±»ä¼¼æˆ‘ä»¬åœ¨MVCæ¡†æ¶ä¸­æ‰€ä½œçš„é‚£æ ·ï¼Œmodelä¸controllerçš„åˆ†ç¦»æ˜¯å€¼å¾—æ¨å´‡çš„è®¾è®¡æ€æƒ³ã€‚

### å…¶ä»–ä¾èµ–ç»„ä»¶å®ä¾‹çš„æ–¹æ³•ã€å˜é‡çš„å‡½æ•°

å…¶å®æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå‡¡æ˜¯æˆ‘ä»¬çš„å‡½æ•°ä¾èµ–äº†æˆ‘ä»¬ç»„ä»¶å®ä¾‹çš„ç§æœ‰å˜é‡ã€æ–¹æ³•ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ”¾åœ¨ç»„ä»¶å†…éƒ¨ã€‚

## ä¸ºå•¥åº”å¤–å°½å¤–ï¼Ÿ

ä»¥ä¸Šæˆ‘ä»¬æ•´ç†å‡ºå¾ˆå¤šéœ€è¦æ”¾åˆ°ç»„ä»¶å†…éƒ¨çš„æƒ…å†µï¼Œé‚£ä¸ºå•¥è¿˜æ¨èæ”¾åˆ°å‡½æ•°å¤–éƒ¨å‘¢ï¼Ÿç›´æ¥å…¨éƒ¨æ”¾åˆ°å‡½æ•°å†…éƒ¨ä¸æ˜¯ä¼šç®€å•å¾ˆå¤šå—ï¼Ÿ

å°½é‡å°†å‡½æ•°æ”¾åˆ°å¤–é¢å…¶å®æ˜¯ä¸€ç§å‡½æ•°å¼ä¸æ¨¡å—åŒ–çš„è®¾è®¡æ€æƒ³ï¼Œä»–é©±ä½¿æˆ‘ä»¬å°½å¯èƒ½å»å¤ç”¨æˆ‘ä»¬çš„å‡½æ•°ä»¥åŠä½¿ç”¨çº¯å‡½æ•°ï¼Œç»¼åˆæ¥è¯´ï¼Œå°†å‡½æ•°ä¸å˜é‡æ”¾åˆ°å¤–éƒ¨æœ‰å¦‚ä¸‹å‡ ä¸ªå¥½å¤„ï¼š

- å‡å°‘å†…å­˜å ç”¨ï¼šå‡å°‘ç»„ä»¶å†…éƒ¨çš„å‡½æ•°ä¸å˜é‡å¯ä»¥å‡å°‘ç»„ä»¶å®ä¾‹ä¸­çš„å†…å®¹ï¼Œå‡å°‘å¯¹å†…å­˜çš„å ç”¨

- é‡ç”¨ä»£ç ï¼šæˆ‘ä»¬å®Œå…¨å¯ä»¥å°†ä¸€äº›è´Ÿè´£é€»è¾‘ã€å¯ä»¥é‡ç”¨çš„å‡½æ•°å½’ç±»å¹¶ä¸”æ”¾ç½®åˆ°æ–¹æ³•ç±»ï¼ˆutils.jsä¹‹ç±»ï¼‰ä¸­ï¼Œå‡å°‘æˆ‘ä»¬çš„ä»£ç é‡

- æ¨¡å—åŒ–ï¼šæˆ‘ä»¬å°†é€»è¾‘ä¸è§†å›¾æŠ½ç¦»å®Œå…¨å¯ä»¥å‡å°‘æˆ‘ä»¬ç»„ä»¶çš„è€¦åˆåº¦ï¼Œå¹¶ä¸”å¯ä»¥é™ä½æ¨¡å—ä½“ç§¯ï¼Œæé«˜æˆ‘ä»¬æ¨¡å—åŒ–çš„â€œæ•ˆç‡â€ã€‚è€Œä¸”èƒ½å¤Ÿä½¿æˆ‘ä»¬å°½é‡å»ä½¿ç”¨çº¯å‡½æ•°ç¼–å†™æ›´ä¼˜é›…ã€æ›´å®¹æ˜“ç»´æŠ¤çš„ä»£ç 

- å…±äº«ä¿¡æ¯ï¼šæˆ‘ä»¬å¯ä»¥åˆ»æ„çš„é€šè¿‡å°†æ•°æ®æ”¾ç½®åˆ°ç»„ä»¶å¤–è®©è¿™ä¸ªç»„ä»¶çš„ä¸åŒå®ä¾‹å»å…±äº«ä¿¡æ¯ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬æ”¾åˆ°ç»„ä»¶å¤–çš„æ•°æ®è‚¯å®šä¸æ˜¯`React State`ï¼Œè¿™å°±æ„å‘³ç€å®ƒä»¬ä¸æ˜¯å“åº”å¼çš„ï¼ˆä¸€èˆ¬ä¸ä¼šæœ‰äººè¿™ä¹ˆåšå§ï¼Ÿï¼‰

ç»¼ä¸Šæ‰€è¿°ï¼Œå¯¹äºèƒ½å¤Ÿæ”¾ç½®åˆ°ç»„ä»¶å‡½æ•°å¤–çš„åº”è¯¥å°½é‡æ”¾ç½®åˆ°å‡½æ•°å¤–ï¼Œå¯¹äºèƒ½å¤Ÿå¤ç”¨çš„ä»£ç ç‰‡ï¼Œæœ€å¥½æ˜¯èƒ½å¤ŸæŠ½å–æˆå…¨å±€çš„å‡½æ•°ï¼Œè¿™æ ·æ‰æ›´ç¬¦åˆæ¨¡å—åŒ–çš„è¦æ±‚ã€‚</p> </div> </div> </a>  </div><div class="card-item" data-astro-cid-p3vyftr4> <a href="/blog/technology/react/why_useref/" class="card-link" data-astro-cid-dohjnao5> <div class="card" data-astro-cid-dohjnao5> <div class="card-image" data-astro-cid-dohjnao5>  </div> <div class="card-content" data-astro-cid-dohjnao5> <h3 class="card-title" data-astro-cid-dohjnao5>ä¸ºä½•ä¸æ¨èåœ¨reactç»„ä»¶ä¸­ç›´æ¥å®šä¹‰å˜é‡ï¼Ÿæ¢ç§˜useRefçš„ä½¿ç”¨ä»¥åŠuserRefä¸useStateçš„åŒºåˆ«</h3> <p class="card-description" data-astro-cid-dohjnao5># ä¸ºä½•ä¸æ¨èåœ¨reactç»„ä»¶ä¸­ç›´æ¥å®šä¹‰å˜é‡ï¼Ÿæ¢ç§˜useRefçš„ä½¿ç”¨ä»¥åŠuserRefä¸useStateçš„åŒºåˆ«

## å‰è¨€

ä»Šå¤©åœ¨å†™ä»£ç çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘çš„ä¸€ä¸ªç»„ä»¶éœ€è¦ç»´æŠ¤ä¸€ä¸ªä¸éœ€è¦åœ¨é¡µé¢ä¸­æ¸²æŸ“çš„å˜é‡ã€‚é‚£ä¹ˆæˆ‘æƒ³ï¼Œæ—¢ç„¶å®ƒä¸éœ€è¦æ¸²æŸ“ï¼Œæˆ‘ç›´æ¥ç”¨`let`å˜é‡æ–°å»ºä¸€ä¸ªä¸å°±å¯ä»¥äº†å—ï¼Ÿ

ä½†æ˜¯å½“æˆ‘çœŸæ­£ç”¨è¿™ä¸ª`let`åˆ›å»ºçš„å˜é‡æ—¶ï¼Œæ‰æ„è¯†åˆ°å¤§äº‹ä¸å¥½ï¼ŒåŸæ¥è¿™ä¹ˆä½¿ç”¨å˜é‡æœ‰ä¸€ä¸ªå¤§é—®é¢˜ï¼

## ä¸ºä»€ä¹ˆè¦æœ‰hook

è¦è¯´æ˜é—®é¢˜æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¼„æ˜ç™½ä¸€ä»¶äº‹æƒ…ï¼Œ**æˆ‘ä»¬ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶æ—¶æˆ‘ä»¬æ€ä¹ˆå»`render`** ï¼Ÿåœ¨æˆ‘ä»¬ä½¿ç”¨ç±»å¼ç»„ä»¶æ—¶ï¼Œ`rerender`å¯èƒ½æ˜¯ç®€å•çš„è°ƒç”¨ä¸€æ¬¡`render`æ–¹æ³•ï¼Œé‚£å¯¹äºå‡½æ•°å¼ç»„ä»¶å‘¢ï¼Ÿå‡½æ•°å¼ç»„ä»¶çš„`render`å†™åœ¨`return`è¯­å¥ä¸­ï¼Œå¾ˆæ˜æ˜¾æˆ‘ä»¬éœ€è¦é‡æ–°æ‰§è¡Œæ•´ä¸ªå‡½æ•°ã€‚

é‚£ä¹ˆæˆ‘åœ¨å‰è¨€éƒ¨åˆ†æåˆ°çš„é—®é¢˜å°±å‘¼ä¹‹æ¬²å‡ºäº†ï¼šç»„ä»¶æ¯æ¬¡æ¸²æŸ“æ›´æ–°éƒ½ä¼šä½¿å¾—å˜é‡å˜ä¸ºåˆå§‹å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘åœ¨ç»„ä»¶çš„ä¸€ä¸ªå‡½æ•°ä¸­ä¿®æ”¹å˜é‡å¹¶æ›´æ–°ç»„ä»¶ï¼Œæƒ³åœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­ä½¿ç”¨æ—¶æˆ‘ä»¬è·å–åˆ°çš„å°±åªä¼šæ˜¯åˆå§‹å€¼äº†ã€‚

å¯ä»¥çœ‹åˆ°ï¼Œå‡½æ•°å¼ç»„ä»¶æ˜¯æ²¡æœ‰çŠ¶æ€çš„ï¼è€Œreactå¼•å…¥`hook`çš„åŸå› å°±æ˜¯è¡¥å…¨å‡½æ•°å¼ç»„ä»¶åœ¨è¿™æ–¹é¢çš„ç¼ºé™·ã€‚æ¯”å¦‚useStateï¼Œå½“å‡½æ•°é‡æ–°æ¸²æŸ“æ—¶ï¼Œstateèƒ½å¤Ÿä»çŠ¶æ€æ± ä¸­è·å–åˆ°ä¸Šæ¬¡renderçš„çŠ¶æ€ï¼ŒåƒuseEffectèƒ½æ ¹æ®å˜é‡æ¥ç¡®å®šæ˜¯å¦éœ€è¦æ¸²æŸ“ï¼Œä»è€Œèµ·åˆ°ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„ä½œç”¨ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ä¸ªèƒ½åœ¨æ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™ä¸è¢«é‡æ–°åˆå§‹åŒ–çš„å˜é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å€ŸåŠ©hookäº†ã€‚

é‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨å“ªä¸€ä¸ª`hook`å‘¢ï¼Ÿè¿™é‡Œæˆ‘æ¨èä¸€ä¸ªï¼š`useRef`ã€‚

## useRef

æˆ‘ä»¬ä½¿ç”¨`useRef()`åˆ›å»ºçš„å˜é‡ä¸ä¼šæ¯æ¬¡éƒ½è¢«é‡æ–°æ¸²æŸ“

```js
let count = 0 // æ¯æ¬¡renderéƒ½ä¼šinit
let count = useRef(0) // rerenderæ—¶ä¸ä¼šinit
```

`useRef`çš„ç‰¹æ€§å¦‚ä¸‹ï¼š

- refçš„å€¼é€šè¿‡`current`å±æ€§è·å–

- refæ˜¯å¯ä»¥æ›´æ”¹çš„

- æ›´æ”¹refçš„å€¼**ä¸ä¼š**å¼•èµ·`rerender`

- å¦‚æœrefçš„å€¼è¢«ç”¨äºæ¸²æŸ“ï¼Œé‚£ä¹ˆåˆ™ä¸å¯æ›´æ”¹

- ä¸å»ºè®®åœ¨ç»„ä»¶æ¸²æŸ“ä¸­**è¯»**å†™refçš„`current`ï¼Œæ¨èåœ¨`useEffect`ä¸`event handler`ä¸­ä½¿ç”¨ä½¿ç”¨`ref.current`

å¯ä»¥çœ‹åˆ°ï¼Œrefå°±æ˜¯ä¸ºæˆ‘ä»¬ä¿å­˜**ä¸ç”¨æ¯æ¬¡åˆå§‹åŒ–**è€Œä¸”**ä¸å¿…æ¸²æŸ“**çš„å˜é‡è€Œç”Ÿçš„ã€‚

### useRefä¸useState

é‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç”¨refè€Œä¸å»ä½¿ç”¨stateå‘¢ï¼Ÿè¿™ä¸¤ä¸ªhookæœ‰ä¸¤ä¸ªéå¸¸å¤§çš„åŒºåˆ«ï¼š

- **refä¸ä¼šå¼•èµ·rerenderï¼Œè€Œstateä¼š**ã€‚å½“æˆ‘ä»¬è°ƒç”¨setStateæ—¶ï¼Œä¼šè§¦å‘rerenderï¼Œè€Œåœ¨ä½¿ç”¨refå°±ä¸å¿…æ‹…å¿ƒè¿™ä¸ªï¼Œä½ å¯ä»¥éšæ„çš„ä½¿ç”¨

- **refæ˜¯åŒæ­¥çš„ï¼Œstateæ˜¯å¼‚æ­¥çš„**ã€‚å½“æˆ‘ä»¬åŒæ­¥çš„ä½¿ç”¨useStateæ›´æ–°æ•°æ®ä¹‹åï¼Œæˆ‘ä»¬ä¼šè·å–ä¸åˆ°æœ€æ–°çš„å€¼ï¼Œå› ä¸ºä»–æ˜¯å¼‚æ­¥æ›´æ–°çš„ã€‚è€Œrefåˆ™ä¸ä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼Œä½ å¯ä»¥åœ¨æ›´æ–°ä¹‹åç«‹åˆ»è·å–åˆ°æœ€æ–°çš„å€¼ã€‚

æ‰€ä»¥å¯¹æˆ‘ç°åœ¨çš„éœ€æ±‚æ¥è¯´ï¼Œ`useRef`è¦æ¯”`useState`åˆé€‚çš„å¤šã€‚

### ä½¿ç”¨useRefæ“ä½œdom

useRefçš„å¦ä¸€ä¸ªé‡è¦çš„ä½œç”¨å°±æ˜¯æ“ä½œdomï¼Œæˆ‘ä»¬åœ¨è¿™è¾¹ä¹Ÿé¡ºå¸¦æä¸€ä¸‹å§ã€‚

æˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨refï¼š

```jsx
const domRef = useRef(null)

function focusInput(){
    domRef.current.focus();
}

return (
&lt;&gt;
    &lt;input ref={domRef}/&gt;
    &lt;button onClick={focusInput}&gt;click to focus&lt;button&gt;
&lt;/&gt;
)
```

æˆ‘ä»¬é€šè¿‡jsxä¸­çš„`VNODE`çš„refå±æ€§å±æ€§ä¼ é€’æˆ‘ä»¬çš„refï¼Œè¿™æ ·reactä¼šåœ¨æ¸²æŸ“çš„æ—¶å€™è‡ªåŠ¨å°†`current`çš„å€¼è®¾ç½®ä¸ºnodeã€‚ç„¶åæˆ‘ä»¬å°±å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªnodeäº†ã€‚

å½“è¿™ä¸ªnodeè¢«ä»é¡µé¢ä¸­ç§»é™¤æ—¶ï¼Œ`ref.current`ä¹Ÿä¼šè¢«è®¾ç½®ä¸º`null`

## æ€»ç»“

å¦‚æœä½ å¸Œæœ›åœ¨reactå‡½æ•°å¼ç»„ä»¶ä¸­ä¿å­˜ä¸€ä¸ªä¸ä¼šæ¯æ¬¡æ¸²æŸ“æ—¶æ›´æ–°å¹¶ä¸”æ— é¡»è¢«æ¸²æŸ“çš„å€¼ï¼Œé‚£ä¹ˆ`useRef`æ˜¯ä½ çš„ä¸äºŒä¹‹é€‰</p> </div> </div> </a>  </div><div class="card-item" data-astro-cid-p3vyftr4> <a href="/blog/technology/react/rn_input_selection/" class="card-link" data-astro-cid-dohjnao5> <div class="card" data-astro-cid-dohjnao5> <div class="card-image" data-astro-cid-dohjnao5>  </div> <div class="card-content" data-astro-cid-dohjnao5> <h3 class="card-title" data-astro-cid-dohjnao5>React Native ç§»åŠ¨å…‰æ ‡ï¼Œéƒ½ä»€ä¹ˆå¹´ä»£è¿˜åœ¨ç”¨ä¼ ç»ŸsetNativeProps</h3> <p class="card-description" data-astro-cid-dohjnao5># React Native ç§»åŠ¨å…‰æ ‡ï¼Œéƒ½ä»€ä¹ˆå¹´ä»£è¿˜åœ¨ç”¨ä¼ ç»ŸsetNativePropsï¼Ÿ

å¯¹æˆ‘çš„æ•…äº‹ä¸æ„Ÿå…´è¶£çš„ç›´æ¥è·³è½¬æ­£æ–‡éƒ¨åˆ†ã€‚

## å¿µå¨

ä»Šå¤©é‡åˆ°ä¸€ä¸ªbugï¼Œè¦è§£å†³è¿™ä¸ªbugå‘¢å°±éœ€è¦æ‰‹åŠ¨ç§»åŠ¨inputçš„å…‰æ ‡ã€‚ç„¶åæˆ‘å‘ç°ä¹‹å‰æˆ‘åœ¨~~æŠ„~~å€Ÿäººå®¶çš„ä»£ç çš„æ—¶å€™å·²ç»å€Ÿè¿‡ç§»åŠ¨å…‰æ ‡çš„ä»£ç äº†ï¼š

```typescript
inputRef.current.setNativeProps({selection: {start: 1, end: 1}});
```

äºæ˜¯æˆ‘å…ˆå»æœç´¢äº†ä¸€ä¸‹`setNativeProps`çš„ç”¨æ³•ï¼Œåœ¨æœ€æ–°ç‰ˆæœ¬çš„RNæ–‡æ¡£ä¸Šæ˜ç¡®çš„ç»™å‡ºäº†è¿™ä¸ªæ–¹æ³•çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œä½†æ˜¯å´æ²¡æœ‰APIæ–‡æ¡£ã€‚ã€‚ã€‚ğŸ˜“

ä¹Ÿå°±æ˜¯è¯´ï¼Œç†è®ºä¸Šï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œäºæ˜¯æˆ‘åˆæœç´¢äº†ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨è¿™ä¸ªæ–¹æ³•å®ç°ç§»åŠ¨å…‰æ ‡ï¼Œç»“æœæˆ‘å‘ç°**ä¸Šè¿°å†™æ³•æ˜¯å®Œå…¨æ­£ç¡®çš„ï¼Œä½†æ˜¯å®Œå…¨æ²¡ç”¨ï¼**

æˆ‘è¿˜å‘ç°è¿™äº›æ–‡ç« è¿˜è¯´æœ‰ä¸€ä¸ª`_lastNativeSelection`å±æ€§å¯ä¾›è¯»å–ï¼Œä½†æ˜¯æˆ‘åªè¯»åˆ°äº†`undefined`ã€‚äºæ˜¯ä¹ï¼Œæˆ‘å¤§èƒ†çš„æ€€ç–‘ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ä¸æ˜¯å·²ç»å¯„äº†ğŸ˜°

ç„¶åæˆ‘æ‰“å°äº†ä¸€ä¸‹`inputRef.current`å‘ç°æœ‰è¿™ä¹ˆä¸€ä¸ªå±æ€§ï¼š`&quot;setSelection&quot;: [Function setSelection],`ï¼Œäºæ˜¯ä¹æˆ‘å¤§èƒ†å°è¯•ï¼Œè¯·çœ‹ä¸‹æ–‡â€¦â€¦

## æ­£æ–‡

ä¸è¦å†ä½¿ç”¨`setNativeProps`æ–¹æ³•äº†ï¼Œè¿™ä¸ªæ–¹æ³•ç–‘ä¼¼ä¸å†å—åˆ°æ”¯æŒäº†ã€‚å¦‚æœä½ éœ€è¦æ“ä½œinputçš„å…‰æ ‡ï¼Œè¯·ç›´æ¥ä½¿ç”¨`setSelection`ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š

```tsx
inputRef.current.setSelection(1, 1);
```

å‡½æ•°ç­¾åï¼ˆ&lt;u&gt;æˆ‘çŒœçš„&lt;/u&gt;ï¼‰ï¼š

`setSelection(selectionStart,selectionEnd)`

- `selectionStart`
  - è¢«é€‰ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ä½ç½®ç´¢å¼•ï¼Œä» 0 å¼€å§‹ã€‚å¦‚æœè¿™ä¸ªå€¼æ¯”å…ƒç´ çš„Â `value`Â é•¿åº¦è¿˜å¤§ï¼Œåˆ™ä¼šè¢«çœ‹ä½œÂ `value`Â æœ€åä¸€ä¸ªä½ç½®çš„ç´¢å¼•ã€‚
- `selectionEnd`
  - : è¢«é€‰ä¸­çš„æœ€åä¸€ä¸ªå­—ç¬¦çš„Â *ä¸‹ä¸€ä¸ª*Â ä½ç½®ç´¢å¼•ã€‚å¦‚æœè¿™ä¸ªå€¼æ¯”å…ƒç´ çš„ value é•¿åº¦è¿˜å¤§ï¼Œåˆ™ä¼šè¢«çœ‹ä½œ value æœ€åä¸€ä¸ªä½ç½®çš„ç´¢å¼•ã€‚</p> </div> </div> </a>  </div><div class="card-item" data-astro-cid-p3vyftr4> <a href="/blog/technology/react/rn_use_realm/" class="card-link" data-astro-cid-dohjnao5> <div class="card" data-astro-cid-dohjnao5> <div class="card-image" data-astro-cid-dohjnao5>  </div> <div class="card-content" data-astro-cid-dohjnao5> <h3 class="card-title" data-astro-cid-dohjnao5>react native å¦‚ä½•æ­£ç¡®ä½¿ç”¨realm</h3> <p class="card-description" data-astro-cid-dohjnao5># react native å¦‚ä½•æ­£ç¡®ä½¿ç”¨realm

Realmæ˜¯ä¸€ä¸ªæ”¯æŒäº‘åŒæ­¥çš„å¿«é€Ÿçš„æ–°å‹çš„æ•°æ®åº“ï¼Œæ˜¯SQLiteçš„æ›¿ä»£å“ã€‚Realmçš„å®˜ç½‘å®é™…ä¸Šå¯¹Realmçš„ä½¿ç”¨æœ‰ç›¸å½“è¯¦ç»†çš„è®²è§£ï¼Œä½†æ˜¯å¯¹äºæˆ‘ä»¬å®é™…å¼€å‘ä¸­å¯èƒ½å‡ºç°çš„ä¸€äº›é—®é¢˜å®˜æ–¹æ–‡æ¡£å¯èƒ½ä¼šæœ‰æ²¡æœ‰æåˆ°çš„åœ°æ–¹ï¼Œè¿™ç¯‡åšå®¢æ—¨åœ¨è®°å½•ç¬”è€…åœ¨ä½¿ç”¨realmæ—¶è¸©åˆ°çš„ä¸€äº›å‘

## å®‰è£…

å®‰è£…è¿‡ç¨‹å®˜æ–¹è¯´çš„å¾ˆæ˜ç¡®ï¼Œä½†æ˜¯è¦æ³¨æ„æˆ‘ä»¬éœ€è¦å®‰è£…ä¸¤ä¸ªä¾èµ–ï¼š

```shell
# å®‰è£…realmåº“
npm install realm
# å®‰è£…ä¸€äº›æ“ä½œrealmçš„hooksç­‰
npm install @realm/react
```

åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿéœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬å¼•å…¥ä¾èµ–çš„ä½ç½®ã€‚

## ä½¿ç”¨

ç›®å‰çš„realmæ”¯æŒä¸¤ç§å†™æ³•ï¼Œä¸€ç§æ˜¯ç›´æ¥å¼•å…¥çš„æ–¹æ³•ï¼š

```tsx
import React from &#39;react&#39;;
import {RealmProvider} from &#39;@realm/react&#39;;
// Import your models
import {Profile} from &#39;../../../models&#39;;

export const AppWrapper = () =&gt; {
  return (
    &lt;RealmProvider schema={[Profile]}&gt;
      &lt;RestOfApp /&gt;
    &lt;/RealmProvider&gt;
  );
};
```

åœ¨ä½ éœ€è¦çš„æ—¶å€™ä»…éœ€è¦ï¼š

```ts
import {useQuery} from &#39;@realm/react&#39;;
const profiles = useQuery(Profile);
```

å¦‚æœä½ æœ‰å¤šä¸ªschemaï¼Œæˆ–è€…è¯´å¤šä¸ªè¡¨ï¼Œç›´æ¥åœ¨`RealmProvider`ä¸­çš„`schema`å±æ€§ä¸­æ·»åŠ å³å¯ï¼Œå› ä¸ºè¿™é‡Œå®ƒæ¥å—ä¸€ä¸ª**æ•°ç»„**å˜›ã€‚

## æ›´å¥½çš„ä½¿ç”¨

ä½†æ˜¯æˆ‘è®¤ä¸ºä¸Šè¿°æ–¹æ³•å¹¶ä¸æ˜¯æœ€å¥½çš„ä½¿ç”¨æ–¹æ³•ï¼Œæˆ‘è¿™é‡Œè¿˜æ˜¯æ¨èç›´æ¥ä½¿ç”¨`createRealmContext`çš„æ–¹å¼ï¼Œè¿™æ ·èƒ½å¤Ÿè®©æˆ‘ä»¬æ›´çµæ´»çš„ä½¿ç”¨`realm config`ã€‚

```tsx
// é…ç½®realm
const config: Realm.Configuration = {
  schema: [Settings, DarftSchema],
  schemaVersion: 1,
  onMigration: (oldRealm, newRealm) =&gt; {
    newRealm.deleteAll();
  },
};


// åˆ›å»ºProvider
const {RealmProvider, useRealm, useObject, useQuery} =
  createRealmContext(config);


// åŒ…è£¹Appå‰©ä½™éƒ¨åˆ†
function App(): React.JSX.Element {
  return (
    &lt;RealmProvider&gt;
      &lt;RealmContext.Provider value={{useRealm, useObject, useQuery}}&gt;
        &lt;LayoutWarp /&gt;
      &lt;/RealmContext.Provider&gt;
    &lt;/RealmProvider&gt;
  );
}
```

ä½†æ˜¯ç”±äºæˆ‘ä»¬ä½¿ç”¨äº†è¿™ç§æ–¹å¼ä¹‹åï¼Œå°±ä¸èƒ½ä½¿ç”¨ç›´æ¥å¼•ç”¨çš„å…¨å±€apiäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»æƒ³åŠæ³•æŠŠapiä¼ é€’ç»™åä»£ç»„ä»¶ã€‚æˆ‘çš„å»ºè®®æ˜¯ï¼š`useContext`

```ts
export const RealmContext = createContext({
  useRealm,
  useObject,
  useQuery,
});
```

åœ¨éœ€è¦ä½¿ç”¨è¿™äº›apiçš„å­ç»„ä»¶è°ƒç”¨ï¼š

```ts
const {useRealm, useObject} = useContext(RealmContext);
const realm = useRealm();
```

è¿™æ ·å°±ä¸ä¼šæŠ¥é”™äº†ã€‚</p> </div> </div> </a>  </div><div class="card-item" data-astro-cid-p3vyftr4> <a href="/blog/technology/react/rn_opt/" class="card-link" data-astro-cid-dohjnao5> <div class="card" data-astro-cid-dohjnao5> <div class="card-image" data-astro-cid-dohjnao5>  </div> <div class="card-content" data-astro-cid-dohjnao5> <h3 class="card-title" data-astro-cid-dohjnao5>åŸºäºå‘½ä»¤æ¨¡å¼ä½¿ç”¨ React å®ç°ä¸­æ–‡è‡ªåŠ¨å‰è¿›è¾“å…¥æ¡†ï¼ˆOTPï¼‰</h3> <p class="card-description" data-astro-cid-dohjnao5># åŸºäºå‘½ä»¤æ¨¡å¼ä½¿ç”¨ React å®ç°ä¸­æ–‡è‡ªåŠ¨å‰è¿›è¾“å…¥æ¡†ï¼ˆOTPï¼‰

æœ€è¿‘å†™çš„é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªéœ€è¦è‡ªåŠ¨æ¢æ ¼å­ã€è‡ªåŠ¨èšç„¦å¹¶ä¸”è®©çˆ¶ç»„ä»¶è·å–è¾“å…¥å€¼çš„éœ€æ±‚ã€‚è¿™ä¸ªéœ€æ±‚è®©æˆ‘å¾ˆå¤´å¤§ï¼Œå› ä¸ºåœ¨ RN ä¸­æƒ³è¦æ§åˆ¶ DOM ç»éä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ã€‚

## éš¾ç‚¹åˆ†æ

- RN æ§åˆ¶ dom ç›¸å¯¹éº»çƒ¦

- è¾“å…¥çš„æ˜¯ä¸­æ–‡ï¼Œéœ€è¦å¤„ç†è¾“å…¥æ³•æˆ–å¤åˆ¶ç²˜è´´çš„é—®é¢˜

- å†…å®¹éœ€è¦å’Œçˆ¶å­ç»„ä»¶åŒæ­¥

- æ ¼å­æ•°é‡ä¸å®šé•¿

- æ¯ä¸ª input ç›¸å¯¹å¤æ‚

## è§£å†³æ–¹æ¡ˆ

React çš„å•å‘æ•°æ®æµä¸ç»„ä»¶åŒ–çš„æ¨¡å¼ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æé«˜æˆ‘ä»¬ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ï¼Œè€Œå¦ä¸€æ–¹é¢è¿™ç§è®¾è®¡ä¹Ÿä¼šå¯¼è‡´æˆ‘ä»¬çš„çˆ¶å­ç»„ä»¶é€šä¿¡ç›¸å¯¹éº»çƒ¦ã€‚åœ¨æ­¤å¤„å¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨`ref`æ¥ç»´æŠ¤ä¸€ä¸ª input æ•°ç»„è¿™æ˜¾ç„¶æ˜¯ä¸ç°å®çš„ï¼Œå› ä¸ºæˆ‘ä»¬**ä¸èƒ½åœ¨ for å¾ªç¯ä¸­å®šä¹‰`react hooks`**ã€‚è€Œä¸”æˆ‘çš„æ¯ä¸ª Input éƒ½ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©æ¯ä¸ª input å°è£…ä¸€ä¸ªç»„ä»¶ï¼Œç„¶ååœ¨ç»„ä»¶ä¸­ä½¿ç”¨`ref`æ¥æ§åˆ¶`vDom`ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•é€šä¿¡å‘¢ï¼Ÿè‡ªç„¶å°±æ˜¯**ä¼ å‚**å’¯ã€‚é‚£ä¹ˆå­ç»„ä»¶å¦‚ä½•ä¼˜é›…çš„é€šçŸ¥çˆ¶ç»„ä»¶è‡ªèº«è¾“å…¥çš„æ”¹å˜å‘¢ï¼Ÿç»è¿‡æ€ç´¢æˆ‘æƒ³åˆ°äº†ä¸€ç§è®¾è®¡æ¨¡å¼ï¼š&lt;mark&gt;å‘½ä»¤æ¨¡å¼&lt;/mark&gt;ã€‚**é€šè¿‡å‘½ä»¤æ¨¡å¼+çŠ¶æ€å‡½æ•°æˆ‘ä»¬å¯ä»¥ä¼˜é›…çš„å°†å­ç»„ä»¶çš„å˜åŒ–é€šçŸ¥çˆ¶ç»„ä»¶**ã€‚ä¸‹é¢æˆ‘ä»¬å…ˆæ¥å°è¯•å®ç°ä¸€ä¸‹æœ€åŸºæœ¬çš„åŠŸèƒ½ï¼Œè‡ªåŠ¨è·³è½¬ä¸èšç„¦ã€‚

### è‡ªåŠ¨èšç„¦

é¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆæ€è€ƒï¼Œä¸€ä¸ªè¾“å…¥æ¡†å¯èƒ½æœ‰å‡ ç§çŠ¶æ€ï¼Œå…¶å®æ— éä¸¤ç§`è¾“å…¥`å’Œ`åˆ é™¤`ã€‚ä½†æ˜¯æˆ‘ä»¬æ˜¯ä¸€ç»„è¾“å…¥æ¡†ï¼Œåœ¨å…¶ä¸­æ¥å›è·³ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ª`å›é€€`çŠ¶æ€ã€‚

```ts
// å®šä¹‰å‘½ä»¤æ ¼å¼
interface BaseCommand {
  name: string;
  value?: unknown;
}

interface CheckInputCommand extends BaseCommand {
  value?: string | undefined;
  additionalValue?: string;
  callarIndex: number;
}
```

```tsx
// çˆ¶ç»„ä»¶ä¸­å®šä¹‰å‘½ä»¤çŠ¶æ€
const [command, setCommand] = useState&lt;CheckInputCommand&gt;();
```

è¿™æ ·ï¼Œç¡®å®šäº†çŠ¶æ€ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¡®å®šä¸€ä»¶äº‹æƒ…ï¼Œæˆ‘ä»¬çš„å­ç»„ä»¶è¦æ¥å—å“ªäº›å‚æ•°å‘¢ï¼Ÿ

é¦–å…ˆï¼Œè®¾ç½®å‘½ä»¤çš„çŠ¶æ€å‡½æ•°ä¸€å®šæ˜¯å¿…é¡»çš„ï¼Œå¦å¤–æˆ‘ä»¬è¿˜éœ€è¦ä¼ é€’ä¸€ä¸ªä¸‹æ ‡æ¥è®©ç»„ä»¶çŸ¥é“å®ƒçš„åºå·ä»¥åŠä¸€ä¸ª`boolean`æ¥è¡¨ç¤ºæ˜¯å¦èšç„¦ï¼Œä»£ç å¦‚ä¸‹ï¼š

```tsx
// å®šä¹‰å­ç»„ä»¶
type propsType = {
  setCommand: Dispatch&lt;SetStateAction&lt;CheckInputCommand | undefined&gt;&gt;;
  index: number;
  focus: boolean;
};
function InputCheck({
  setCommand,
  index,
  focus,
}: propsType): React.JSX.Element {}
```

å¹¶ä¸”æˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶ä¸­åº”è¯¥å¦‚æ˜¯è°ƒç”¨å­ç»„ä»¶ï¼š

```tsx
// çˆ¶ç»„ä»¶
// èšç„¦å…ƒç´ çš„ä¸‹æ ‡ï¼Œé»˜è®¤ç¬¬ä¸€ä¸ªå…ƒç´ èšç„¦
const [foucsElement, setFoucsElement] = useState(0);
return (
  // æ­¤å¤„çœç•¥nä¸ªå­—
  &lt;View&gt;
    {arr.map((item, keyIndex) =&gt; {
      return (
        &lt;InputCheck
          key={`${index}-${keyIndex}`}
          setCommand={setCommand}
          index={keyIndex}
          // ä¸‹æ ‡ä¸èšç„¦å…ƒç´ çš„ä¸‹æ ‡ç›¸åŒåˆ™èšç„¦
          focus={foucsElement === keyIndex}
        /&gt;
      );
    })}
  &lt;/View&gt;
);
```

é€šè¿‡ä¸Šè¿°çš„ä»£ç ï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤Ÿå¾—çŸ¥æˆ‘ä»¬å¦‚ä½•æ¥è®©ä¸€ä¸ªå…ƒç´ èšç„¦äº†ï¼š**å¦‚æœä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡ä¸æˆ‘ä»¬å¸Œæœ›èšç„¦çš„å…ƒç´ ä¸‹æ ‡ç›¸åŒåˆ™è®©ä»–èšç„¦**ã€‚æˆ‘ä»¬çŸ¥é“åœ¨ react ä¸­ï¼Œ**å¦‚æœ state å‘ç”Ÿäº†å˜åŒ–åˆ™ä¼šå¼•èµ·å‘ç”Ÿå˜åŒ–çš„èŠ‚ç‚¹`rerender`ï¼Œå¹¶ä¸”å¦‚æœç»„ä»¶çš„ props å‘ç”Ÿäº†å˜åŒ–ä¼šå¼•èµ·`reaction`çš„ï¼Œè¿™ä¸€ç³»åˆ—ååº”è®©æˆ‘ä»¬å¯ä»¥é€šè¿‡çˆ¶èŠ‚ç‚¹çš„`state`æ¥æ§åˆ¶å­ç»„ä»¶ã€‚**

é‚£ä¹ˆåœ¨å­ç»„ä»¶æˆ‘ä»¬åº”è¯¥å¦‚ä½•å¤„ç†è¿™ç§å˜åŒ–å‘¢ï¼Ÿ

é‚£è‡ªç„¶æ˜¯`useEffect`å•Š!

```jsx
// å­ç»„ä»¶
const [char, setChar] = useState(&quot;&quot;);
const inputRef = useRef&lt;any&gt;();
// å¤„ç†èšç„¦
useEffect(() =&gt; {
    if (focus) {
      inputRef.current.focus();
      inputRef.current.setNativeProps({selection: {start: 1, end: 1}});
    }
  }, [focus, setInputValue]);
return (
    &lt;TextInput
      value={char}
      onChange={e =&gt; {
        TextInputHandler(e.nativeEvent.text);
      }}
      ref={inputRef}
    /&gt;
  );
```

å¥½çš„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¤„ç†çˆ¶ç»„ä»¶ä¼ é€’çš„`focus`å‚æ•°å¹¶ä¸”è‡ªåŠ¨èšç„¦äº†ã€‚è€Œä¸”é€šè¿‡ä¸Šé¢çš„ä»£ç æˆ‘ä»¬ä¹Ÿèƒ½å‘ç°æˆ‘ä»¬è¿”å›çš„`TextInput`æ˜¯ä¸€ä¸ª&lt;mark&gt;å—æ§ç»„ä»¶&lt;/mark&gt;å“~é‚£æˆ‘ä»¬åˆæ˜¯å¦‚ä½•å¤„ç†è¾“å…¥çš„å‘¢ï¼Ÿ

è¯¦æƒ…è¿˜è¯·çœ‹ä»£ç ï¼š

```jsx
/** å‘é€æŒ‡ä»¤çš„å‡½æ•° */
const sendCommand = useCallback(
  (name: string, commandValue?: string, additionalValue?: string) =&gt; {
    const command: CheckInputCommand = {
      name: name,
      value: commandValue,
      callarIndex: index,
      additionalValue: additionalValue,
    };
    setCommand(command);
  },
  [index, setCommand]
);

/** çœŸæ­£å¤„ç†è¾“å…¥çš„é€»è¾‘ */
const setInputValue = useCallback(
  (str: string) =&gt; {
    setChar(displayChar);
    // å‘é€å‘½ä»¤
    sendCommand(&quot;input&quot;, commandStr, displayChar);
  },
  [sendCommand]
);

/** å¤„ç†è¾“å…¥ */
const TextInputHandler = (inputChar: string) =&gt; {
  setInputValue(inputChar);
};
```

è¿™æ ·å½“æˆ‘ä»¬è¾“å…¥çš„æ—¶å€™ï¼Œå­ç»„ä»¶å°±å·²ç»èƒ½å¤Ÿå‘é€å‘½ä»¤é€šçŸ¥çˆ¶ç»„ä»¶è‡ªå·±çš„å˜åŒ–äº†ï¼Œè¿™æ—¶æˆ‘ä»¬å°±è¿˜éœ€è¦çˆ¶ç»„ä»¶å»ç›‘å¬å­ç»„ä»¶ä»¥åŠåšå‡ºç›¸åº”çš„ååº”å’¯ï¼š

```jsx
// çˆ¶ç»„ä»¶
/** ç›‘å¬commandå˜åŒ– */
useEffect(() =&gt; {
  /** æ¥æ”¶å­ç»„ä»¶å‘é€çš„å‘½ä»¤ */
  if (command &amp;&amp; command.name === &quot;input&quot;) {
    if (command.callarIndex === format.tunes.length - 1) {
      return;
    }
    setFoucsElement(command.callarIndex + 1);
    setChars(command.value || &quot;&quot;);
  }
}, [command, format.tunes, format.tunes.length]);
```

è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è‡ªåŠ¨çš„å‰è¿›å¹¶èšç„¦å•¦ï¼

### å¤„ç†ä¸­æ–‡

ä½†æ˜¯è€ƒè™‘åˆ°æˆ‘ä»¬è¾“å…¥çš„æ˜¯ä¸­æ–‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¦å¯¹è¾“å…¥è¿›è¡Œä¸€å®šçš„å¤„ç†ã€‚é¦–å…ˆæ˜¯ä¸­æ–‡æœ‰è¾“å…¥æ³•çš„é—®é¢˜ï¼Œ**è¿™æ ·æˆ‘ä»¬å°±éœ€è¦åˆ¤æ–­æ˜¯å¦æ˜¯ä¸­æ–‡ï¼Œç„¶ååªå¯¹ä¸­æ–‡åšå‡ºç›¸åº”**ã€‚

```ts
// ä¸­æ–‡åŒ¹é…æ­£åˆ™
const reg = /^[\u4E00-\u9FA5]+$/;

/** æ£€æŸ¥æ˜¯å¦æ˜¯ä¸­æ–‡ */
const verifyCharIsChinese = (char: string) =&gt; {
  if (reg.test(char)) {
    return true;
  }
  return false;
};
```

```jsx
// å­ç»„ä»¶
 /** çœŸæ­£å¤„ç†è¾“å…¥çš„é€»è¾‘ */
  const setInputValue = useCallback({
      if (!verifyCharIsChinese(str)) {
        return;
      }
// æˆªå–ä¸­æ–‡
      let displayChar = str.substring(0, 1);
      let commandStr = str.substring(1);
      setChar(displayChar);
      // å‘é€å‘½ä»¤
      sendCommand(&quot;input&quot;, commandStr, displayChar);
    },
    [sendCommand],
  );
```

å¦å¤–å› ä¸ºä¸­æ–‡ä¼šå­˜åœ¨ä¸€æ¬¡æ€§è¾“å…¥å¤šä¸ªå­—ç¬¦çš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦å°†è¾“å…¥çš„å­—ç¬¦ä¼ é€’ç»™çˆ¶ç»„ä»¶çš„é—®é¢˜ã€‚åƒä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°æˆ‘ä»¬å·²ç»æˆªå–äº†è¾“å…¥ï¼Œç„¶åå‘é€åˆ°çˆ¶ç»„ä»¶ï¼Œæˆ‘ä»¬åˆè¯¥å¦‚ä½•è®©çˆ¶ç»„ä»¶å°†å¤šå‡ºçš„å­—ç¬¦ä¼ é€’ç»™å‰©ä¸‹çš„å­ç»„ä»¶å‘¢ï¼Ÿ**æˆ‘æƒ³åˆ°çš„æ–¹æ³•æ˜¯ï¼š`useContext`ï¼**

```tsx
// çˆ¶ç»„ä»¶
export const StrContext: Context&lt;string&gt; = createContext(&quot;&quot;);

fn(){ //çœç•¥å‡½æ•°å®šä¹‰
    const [content, setContent] = useState&lt;Array&lt;string&gt;&gt;([]); // ä¿å­˜çœŸæ­£çš„å†…å®¹

if (command &amp;&amp; command.name === &quot;input&quot;) {
  useEffect(() =&gt; {
    if (command.callarIndex === format.tunes.length - 1) {
      return;
    }
    setFoucsElement(command.callarIndex + 1);
    setChars(command.value || &quot;&quot;);
  }
}
return(
// ...æ­¤å¤„çœç•¥n-mä¸ªå­—
    &lt;StrContext.Provider value={chars}&gt;
        &lt;View&gt;
          {arr.map((item, keyIndex) =&gt; {
            return (
              &lt;InputCheck
                key={`${index}-${keyIndex}`}
                setCommand={setCommand}
                index={keyIndex}
                // ä¸‹æ ‡ä¸èšç„¦å…ƒç´ çš„ä¸‹æ ‡ç›¸åŒåˆ™èšç„¦
                focus={foucsElement === keyIndex}
              /&gt;
            );
          })}
        &lt;/View&gt;
    &lt;/StrContext&gt;
)
}
```

åŒæ—¶æˆ‘ä»¬**éœ€è¦è®©å¾—åˆ°ç„¦ç‚¹çš„å­ç»„ä»¶å»å¤„ç†æˆ‘ä»¬çš„ä¸Šä¸‹æ–‡**ï¼Œå³è¾“å…¥ä¸é‡æ–°å‘é€æŒ‡ä»¤ï¼š

```jsx
const value = useContext(StrContext);

/** è‡ªåŠ¨ç§»åŠ¨å­—ç¬¦ */
useEffect(() =&gt; {
  if (focus) {
    inputRef.current.focus();
    inputRef.current.setNativeProps({ selection: { start: 1, end: 1 } });
    // åœ¨ä¸Šæ–‡çš„å¤„ç†èšç„¦çš„å‡½æ•°ä¸­æ·»åŠ åˆ¤æ–­æ˜¯å¦æœ‰å…¨å±€å­—ç¬¦ä¸²çš„æ–¹æ³•
    if (value) {
      setInputValue(value);
    }
  }
}, [focus, setInputValue, value]);
```

### å¤„ç†åˆ é™¤ä¸åé€€

å¦‚æœå…‰å‰è¿›å´ä¸èƒ½åé€€é‚£ä¸æ˜¯æ²¡è¿‡æ²³çš„&lt;font color=&quot;green&quot;&gt;å’&lt;/font&gt;å­å˜›ã€‚çœ‹åˆ°å¦‚ä½•å¤„ç†å‰è¿›é‚£ä¹ˆå¦‚ä½•å¤„ç†åé€€åº”è¯¥ä¹Ÿå¾ˆæ˜ç¡®äº†ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œåˆ é™¤ä¸åé€€å¹¶ä¸ä¸€æ ·ï¼Œ

- **åˆ é™¤**ï¼šè¾“å…¥ä¸ºç©º

- **åé€€**ï¼šè¾“å…¥å·²ç»ä¸ºç©ºå¹¶ä¸”ç»§ç»­åˆ é™¤

æˆ‘ä»¬å…ˆæ¥å®ç°åˆ é™¤ï¼Œåˆ é™¤éå¸¸ç®€å•ï¼Œåœ¨å¤„ç†è¾“å…¥çš„æ—¶å€™åˆ¤æ–­æ˜¯å¦ä¸ºç©ºå³å¯ï¼š

```jsx
// å­ç»„ä»¶
/** çœŸæ­£å¤„ç†è¾“å…¥çš„é€»è¾‘ */
const setInputValue = useCallback(
  (str: string) =&gt; {
    // è¾“å…¥ä¸ºç©ºåˆ™å‘é€åˆ é™¤å‘½ä»¤
    if (!str) {
      setChar(&quot;&quot;);
      sendCommand(&quot;delete&quot;);
      return;
    }
    if (!verifyCharIsChinese(str)) {
      return;
    }
    let displayChar = str.substring(0, 1);
    let commandStr = str.substring(1);
    setChar(displayChar);
    // å‘é€å‘½ä»¤
    sendCommand(&quot;input&quot;, commandStr, displayChar);
  },
  [sendCommand]
);
```

&lt;u&gt;_çˆ¶ç»„ä»¶è¯¥å¦‚ä½•å¤„ç†æˆ‘è¿™é‡Œå°±æ è¿‡å’¯_&lt;/u&gt;~

å¤„ç†åé€€è¦ç¨å¾®å¤æ‚ä¸€äº›ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨å­ç»„ä»¶ä¸­æ–°å¢ä¸€ä¸ªç›‘å¬ï¼Œç›‘å¬æˆ‘ä»¬çš„é”®ç›˜è¾“å…¥ï¼š

```tsx
// å­ç»„ä»¶
/** ç›‘å¬é”®ç›˜äº‹ä»¶ï¼Œå¤„ç†é€€æ ¼äº‹ä»¶ */
const backSpaceHandler = (keyName: string) =&gt; {
  if (keyName === &quot;Backspace&quot; &amp;&amp; !char) {
    sendCommand(&quot;back&quot;);
  }
};

return (
  &lt;TextInput
    style={TuneStyle}
    value={char}
    onChange={(e) =&gt; {
      TextInputHandler(e.nativeEvent.text);
    }}
    onKeyPress={(e) =&gt; {
      backSpaceHandler(e.nativeEvent.key);
    }}
    ref={inputRef}
  /&gt;
);
```

ç„¶åçˆ¶ç»„ä»¶ä¹Ÿéœ€è¦å¤„ç†é€€æ ¼äº‹ä»¶ï¼š

```jsx
// çˆ¶ç»„ä»¶
else if (command &amp;&amp; command.name === &quot;back&quot;) {
  if (command.callarIndex === 0) {
    return;
  }
  setFoucsElement(command.callarIndex - 1);
}
```

### å†…å®¹åŒæ­¥

å“å‘€ï¼Œå†…å®¹åŒæ­¥è¿™ç§äº‹æƒ…è¯»è€…æœ‹å‹ä»¬è‡ªå·±ä¸ªæ€§åŒ–å‘æŒ¥å°±å¥½ï¼Œæ¯•ç«Ÿæˆ‘åœ¨å‘½ä»¤æ¨¡å¼ä¸­æºå¸¦äº†æŒºå¤šå‚æ•°å‘¢ï¼Œè¯·å¤§å®¶æ ¹æ®å„è‡ªçš„éœ€æ±‚éšæ„å‘æŒ¥å°±å¥½ã€‚

## å®Œæ•´ä»£ç 

çˆ¶ç»„ä»¶ï¼š

```jsx
export const StrContext: Context&lt;string&gt; = createContext(&quot;&quot;);

export default function fn(): React.JSX.Element {
  const [command, setCommand] = useState&lt;CheckInputCommand&gt;();
  const [foucsElement, setFoucsElement] = useState(0);
  const [chars, setChars] = useState(&quot;&quot;); // å¤šå‡ºçš„æ–‡å­—ï¼Œè‡ªåŠ¨å¡«å……åˆ°ä¸‹ä¸€ä¸ªblock
  const [content, setContent] = useState&lt;Array&lt;string&gt;&gt;([]); // ä¿å­˜çœŸæ­£çš„å†…å®¹
  /** ç›‘å¬commandå˜åŒ– */
  useEffect(() =&gt; {
    /** æ¥æ”¶å­ç»„ä»¶å‘é€çš„å‘½ä»¤ */
    if (command &amp;&amp; command.name === &quot;input&quot;) {
      // æ·»åŠ åˆ°å†…å®¹
      if (command.callarIndex &gt;= 0) {
        setContent(e =&gt; {
          e[command.callarIndex] = addContentChar(
            command.additionalValue || &quot;&quot;,
            command.callarIndex,
          );
          return [...e];
        });
      }
      if (command.callarIndex === format.tunes.length - 1) {
        return;
      }
      setFoucsElement(command.callarIndex + 1);
      setChars(command.value || &quot;&quot;);
    } else if (command &amp;&amp; command.name === &quot;delete&quot;) {
      setContent(e =&gt; {
        e[command.callarIndex] = &quot;&quot;;
        return [...e];
      });
    } else if (command &amp;&amp; command.name === &quot;back&quot;) {
      if (command.callarIndex === 0) {
        return;
      }
      setFoucsElement(command.callarIndex - 1);
    }
  }, [command]);
  return (
    &lt;StrContext.Provider key={index} value={chars}&gt;
      &lt;View style={fillPoemStyle.inlineContainer} key={index}&gt;
        {arr.map((item, keyIndex) =&gt; {
          return (
            &lt;InputCheck
              tune={item.tune}
              rhythm={item.rhythm}
              key={`${index}-${keyIndex}`}
              setCommand={setCommand}
              index={item.index as number}
              focus={foucsElement === item.index}
              rhymeWord={rhymeWord}
            /&gt;
          );
        })}
      &lt;/View&gt;
    &lt;/StrContext.Provider&gt;
}


```

å­ç»„ä»¶

```jsx
type propsType = {
  setCommand: Dispatch&lt;SetStateAction&lt;CheckInputCommand | undefined&gt;&gt;;
  index: number;
  focus: boolean;
};

function InputCheck({
  setCommand,
  index,
  focus,
}: propsType): React.JSX.Element {
  const [char, setChar] = useState(&quot;&quot;);
  const inputRef = useRef&lt;any&gt;();
  const value = useContext(StrContext);
  const sendCommand = useCallback(
    (name: string, commandValue?: string, additionalValue?: string) =&gt; {
      const command: CheckInputCommand = {
        name: name,
        value: commandValue,
        callarIndex: index,
        additionalValue: additionalValue,
      };
      setCommand(command);
    },
    [index, setCommand],
  );
  /** çœŸæ­£å¤„ç†è¾“å…¥çš„é€»è¾‘ */
  const setInputValue = useCallback(
    (str: string) =&gt; {
      if (!str) {
        setChar(&quot;&quot;);
        sendCommand(&quot;delete&quot;);
        return;
      }
      if (!verifyCharIsChinese(str)) {
        return;
      }
      let displayChar = str.substring(0, 1);
      let commandStr = str.substring(1);
      setChar(displayChar);
      // å‘é€å‘½ä»¤
      sendCommand(&quot;input&quot;, commandStr, displayChar);
    },
    [sendCommand],
  );
  /** è‡ªåŠ¨ç§»åŠ¨å­—ç¬¦ */
  useEffect(() =&gt; {
    if (focus) {
      inputRef.current.focus();
      inputRef.current.setNativeProps({selection: {start: 1, end: 1}});
      if (value) {
        setInputValue(value);
      }
    }
  }, [focus, setInputValue, value]);
  /** å¤„ç†è¾“å…¥ */
  const TextInputHandler = (inputChar: string) =&gt; {
    setInputValue(inputChar);
  };
  /** ç›‘å¬é”®ç›˜äº‹ä»¶ï¼Œå¤„ç†é€€æ ¼äº‹ä»¶ */
  const backSpaceHandler = (keyName: string) =&gt; {
    if (keyName === &quot;Backspace&quot; &amp;&amp; !char) {
      sendCommand(&quot;back&quot;);
    }
  };
  return (
    &lt;TextInput
      style={TuneStyle}
      value={char}
      onChange={e =&gt; {
        TextInputHandler(e.nativeEvent.text);
      }}
      onKeyPress={e =&gt; {
        backSpaceHandler(e.nativeEvent.key);
      }}
      ref={inputRef}
    /&gt;
  );
}

export default InputCheck;
```

types

```ts
// å®šä¹‰å‘½ä»¤æ ¼å¼
interface BaseCommand {
  name: string;
  value?: unknown;
}

interface CheckInputCommand extends BaseCommand {
  value?: string | undefined;
  additionalValue?: string;
  callarIndex: number;
}
```</p> </div> </div> </a>  </div> </div>    </main> <footer data-astro-cid-sz7xmlte>
&copy; 2026 @charlesix59. All rights reserved.
<div class="social-links" data-astro-cid-sz7xmlte> <a href="https://https://github.com/charlesix59" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>find me on Github</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/github" data-astro-cid-sz7xmlte><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </footer>  </body></html>