<!DOCTYPE html><html lang="en" data-astro-cid-bvzihdzo> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="茶理的博客" href="https://example.com/rss.xml"><meta name="generator" content="Astro v5.16.6"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://example.com/blog/subject/ssm/"><!-- Primary Meta Tags --><title>SSM &amp; SpringBoot 138问138答</title><meta name="title" content="SSM &#38; SpringBoot 138问138答"><meta name="description" content><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://example.com/blog/subject/ssm/"><meta property="og:title" content="SSM &#38; SpringBoot 138问138答"><meta property="og:description" content><meta property="og:image" content="https://example.com/_astro/default.DOL7xRHI.png"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://example.com/blog/subject/ssm/"><meta property="twitter:title" content="SSM &#38; SpringBoot 138问138答"><meta property="twitter:description" content><meta property="twitter:image" content="https://example.com/_astro/default.DOL7xRHI.png"><link rel="stylesheet" href="/_astro/about.CafuXOta.css">
<link rel="stylesheet" href="/_astro/about.B-Pvx2p8.css"></head> <body data-astro-cid-bvzihdzo> <header data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2><a href="/" data-astro-cid-3ef6ksr2>茶理的博客</a></h2> <div class="internal-links" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> 首页 </a>  <a href="/tags" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> 标签 </a>  <a href="/about" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> 关于我 </a>  </div> <div class="social-links" data-astro-cid-3ef6ksr2> <a href="https://https://github.com/charlesix59" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>find me on Github</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-3ef6ksr2></path></svg> </a> </div> </nav> </header>  <main class="blog-container" data-astro-cid-bvzihdzo> <article class="blog-article" data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo>  </div> <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <h1 data-astro-cid-bvzihdzo>SSM &amp; SpringBoot 138问138答</h1> <hr data-astro-cid-bvzihdzo> </div>  <h1 id="ssm-73问">SSM 73问</h1>
<h2 id="mybaits-21问">mybaits 21问</h2>
<h3 id="mybaits与hibernate的异同">Mybaits与Hibernate的异同？</h3>
<p>Hibernate与MyBatis都是ORM框架，都有相应的代码生成工具，可以生成简单基本的DAO层方法。</p>
<p>Mybaits是半ORM框架，Hibernate是全ORM框架</p>
<p>Mybaits需要手动写SQL语句，Hibernate不需要</p>
<h3 id="什么是orm">什么是ORM？</h3>
<p><strong>对象关系映射</strong>（英语：<strong>Object Relational Mapping</strong>，简称<strong>ORM</strong>，或<strong>O/RM</strong>，或<strong>O/R mapping</strong>），是一种程序设计技术，用于实现面向对象编程语言里不同类型系统的数据之间的转换。</p>
<p>目的是<strong>使用面向对象的方法操纵数据库</strong></p>
<h3 id="mybatis怎么配置环境信息">mybatis怎么配置环境信息？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">environments</span><span style="color:#B392F0"> default</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"development"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--        default:默认的环境 ID--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">environment</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"development"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--            事务管理器的配置</span></span>
<span class="line"><span style="color:#6A737D">如果你正在使用 Spring + MyBatis，则没有必要配置事务管理器</span></span>
<span class="line"><span style="color:#6A737D"> - JDBC – 这个配置就是直接使用了 JDBC 的提交和回滚设置，它依赖于从数据源得到的连接来管理事务范围。</span></span>
<span class="line"><span style="color:#6A737D"> - MANAGED – 这个配置几乎没做什么。它从来不提交或回滚一个连接，而是让容器来管理事务的整个生命周期</span></span>
<span class="line"><span style="color:#6A737D">--></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">transactionManager</span><span style="color:#B392F0"> type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"JDBC"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"..."</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"..."</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;/</span><span style="color:#85E89D">transactionManager</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--            数据源的配置--></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">dataSource</span><span style="color:#B392F0"> type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"POOLED"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"driver"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${driver}"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"url"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${url}"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"username"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${username}"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"password"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${password}"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;/</span><span style="color:#85E89D">dataSource</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">environment</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">environments</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="mybaits的setting有什么作用">mybaits的setting有什么作用？</h3>
<p>这是 MyBatis 中极为重要的调整设置，它们会改变 MyBatis 的运行时行为。下表描述了设置中各项的意图、默认值等。</p>















































































































































<table><thead><tr><th>设置参数</th><th>描述</th><th>有效值</th><th>默认值</th></tr></thead><tbody><tr><td>cacheEnabled</td><td>该配置影响的所有映射器中配置的缓存的全局开关。</td><td>true,false</td><td>true</td></tr><tr><td>lazyLoadingEnabled</td><td>延迟加载的全局开关。当开启时，所有关联对象都会延迟加载。 特定关联关系中可通过设置<code>fetchType</code>属性来覆盖该项的开关状态。</td><td>true,false</td><td>false</td></tr><tr><td>aggressiveLazyLoading</td><td>当启用时，对任意延迟属性的调用会使带有延迟加载属性的对象完整加载；反之，每种属性将会按需加载。</td><td>true,false</td><td>false （在 3.4.1 及之前的版本中默认为 true）</td></tr><tr><td>multipleResultSetsEnabled</td><td>是否允许单一语句返回多结果集（需要兼容驱动）。</td><td>true,false</td><td>true</td></tr><tr><td>useColumnLabel</td><td>使用列标签代替列名。不同的驱动在这方面会有不同的表现， 具体可参考相关驱动文档或通过测试这两种不同的模式来观察所用驱动的结果。</td><td>true,false</td><td>true</td></tr><tr><td>useGeneratedKeys</td><td>允许 JDBC 支持自动生成主键，需要驱动兼容。 如果设置为 true 则这个设置强制使用自动生成主键，尽管一些驱动不能兼容但仍可正常工作（比如 Derby）。</td><td>true,false</td><td>False</td></tr><tr><td>autoMappingBehavior</td><td>指定 MyBatis 应如何自动映射列到字段或属性。 NONE 表示取消自动映射；PARTIAL 只会自动映射没有定义嵌套结果集映射的结果集。 FULL 会自动映射任意复杂的结果集（无论是否嵌套）。</td><td>NONE, PARTIAL, FULL</td><td>PARTIAL</td></tr><tr><td>defaultExecutorType</td><td>配置默认的执行器。SIMPLE 就是普通的执行器；REUSE 执行器会重用预处理语句（prepared statements）； BATCH 执行器将重用语句并执行批量更新。</td><td>SIMPLE REUSE BATCH</td><td>SIMPLE</td></tr><tr><td>defaultStatementTimeout</td><td>设置超时时间，它决定驱动等待数据库响应的秒数。</td><td>Any positive integer</td><td>Not Set (null)</td></tr><tr><td>safeRowBoundsEnabled</td><td>允许在嵌套语句中使用分页（RowBounds）。</td><td>true,false</td><td>False</td></tr><tr><td>mapUnderscoreToCamelCase</td><td>是否开启自动驼峰命名规则（camel case）映射，即从经典数据库列名 A_COLUMN 到经典 Java 属性名 aColumn 的类似映射。</td><td>true, false</td><td>False</td></tr><tr><td>localCacheScope</td><td>MyBatis 利用本地缓存机制（Local Cache）防止循环引用（circular references）和加速重复嵌套查询。 默认值为 SESSION，这种情况下会缓存一个会话中执行的所有查询。 若设置值为 STATEMENT，本地会话仅用在语句执行上，对相同 SqlSession 的不同调用将不会共享数据。</td><td>SESSION,STATEMENT</td><td>SESSION</td></tr><tr><td>jdbcTypeForNull</td><td>当没有为参数提供特定的 JDBC 类型时，为空值指定 JDBC 类型。 某些驱动需要指定列的 JDBC 类型，多数情况直接用一般类型即可，比如 NULL、VARCHAR 或 OTHER。</td><td>JdbcType enumeration. Most common are: NULL, VARCHAR and OTHER</td><td>OTHER</td></tr><tr><td>lazyLoadTriggerMethods</td><td>指定哪个对象的方法触发一次延迟加载。</td><td>A method name list separated by commas</td><td>equals,clone,hashCode,toString</td></tr><tr><td>defaultScriptingLanguage</td><td>指定动态 SQL 生成的默认语言。</td><td>A type alias or fully qualified class name.</td><td>org.<br>apache<br>.ibatis.<br>scripting.<br>xmltags.<br>XMLDynamicLanguageDriver</td></tr><tr><td>callSettersOnNulls</td><td>指定当结果集中值为 null 的时候是否调用映射对象的 setter（map 对象时为 put）方法，这对于有 Map.keySet() 依赖或 null 值初始化的时候是有用的。注意基本类型（int、boolean等）是不能设置成 null 的。</td><td>true,false</td><td>false</td></tr><tr><td>logPrefix</td><td>指定 MyBatis 增加到日志名称的前缀。</td><td>Any String</td><td>Not set</td></tr><tr><td>logImpl</td><td>指定 MyBatis 所用日志的具体实现，未指定时将自动查找。</td><td>SLF4J<br>,LOG4J<br>,LOG4J2,<br>JDK_LOGGING,<br>COMMONS_LOGGING,<br>STDOUT_LOGGING,<br>NO_LOGGING</td><td>Not set</td></tr><tr><td>proxyFactory<br><br></td><td>指定 Mybatis 创建具有延迟加载能力的对象所用到的代理工具。</td><td>CGLIB JAVASSIST</td><td>CGLIB<br><br></td></tr><tr><td>vfslmpl<br><br></td><td>指定 VFS 的实现</td><td>自定义 VFS 的实现的类全限定名，以逗号分隔。</td><td>no set<br><br></td></tr><tr><td>useActualParamName<br><br></td><td>允许使用方法签名中的名称作为语句参数名称。 为了使用该特性，你的项目必须采用 Java 8 编译，并且加上 <code>-parameters</code> 选项。（新增于 3.4.1）</td><td>true \</td><td>false</td></tr><tr><td>configurationFactory<br><br></td><td>指定一个提供 <code>Configuration</code> 实例的类。 这个被返回的 Configuration 实例用来加载被反序列化对象的延迟加载属性值。 这个类必须包含一个签名为<code>static Configuration getConfiguration()</code> 的方法。（新增于 3.2.3）</td><td>类型别名或者全类名.</td><td>no set</td></tr></tbody></table>
<p>一个配置完整的 settings 元素的示例如下：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">settings</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">setting</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"cacheEnabled"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"true"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">setting</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"lazyLoadingEnabled"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"true"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">setting</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"multipleResultSetsEnabled"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"true"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">setting</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"useColumnLabel"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"true"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">setting</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"useGeneratedKeys"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"false"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">setting</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"autoMappingBehavior"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"PARTIAL"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">setting</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"defaultExecutorType"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"SIMPLE"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">setting</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"defaultStatementTimeout"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"25"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">setting</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"safeRowBoundsEnabled"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"false"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">setting</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"mapUnderscoreToCamelCase"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"false"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">setting</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"localCacheScope"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"SESSION"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">setting</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"jdbcTypeForNull"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"OTHER"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">setting</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"lazyLoadTriggerMethods"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"equals,clone,hashCode,toString"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">settings</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="如何配置类型别名">如何配置类型别名？</h3>
<p>类型别名是为 Java 类型设置一个短的名字,存在的意义仅在于用来减少类完全限定名的冗余。例如:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">typeAliases</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">typeAlias</span><span style="color:#B392F0"> alias</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"Author"</span><span style="color:#B392F0"> type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"domain.blog.Author"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">typeAlias</span><span style="color:#B392F0"> alias</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"Blog"</span><span style="color:#B392F0"> type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"domain.blog.Blog"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">typeAlias</span><span style="color:#B392F0"> alias</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"Comment"</span><span style="color:#B392F0"> type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"domain.blog.Comment"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">typeAlias</span><span style="color:#B392F0"> alias</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"Post"</span><span style="color:#B392F0"> type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"domain.blog.Post"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">typeAlias</span><span style="color:#B392F0"> alias</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"Section"</span><span style="color:#B392F0"> type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"domain.blog.Section"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">typeAlias</span><span style="color:#B392F0"> alias</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"Tag"</span><span style="color:#B392F0"> type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"domain.blog.Tag"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">typeAliases</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>当这样配置时，<code>Blog</code>可以用在任何使用<code>domain.blog.Blog</code>的地方。</p>
<p>也可以指定一个包名，MyBatis 会在包名下面搜索需要的 Java Bean，比如:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">typeAliases</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">package</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"domain.blog"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">typeAliases</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>每一个在包 <code>domain.blog</code> 中的 Java Bean，在没有注解的情况下，会使用 Bean 的首字母小写的非限定类名来作为它的别名。 比如 <code>domain.blog.Author</code> 的别名为 <code>author</code>；若有注解，则别名为其注解值。看下面的例子：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">Alias</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"author"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> Author</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">        ...</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span></code></pre>
<h3 id="三种数据源类型的区别">三种数据源类型的区别？</h3>
<p><strong>UNPOOLED</strong>– 这个数据源的实现只是每次被请求时打开和关闭连接。虽然一点慢，它对在及时可用连接方面没有性能要求的简单应用程序是一个很好的选择。</p>
<p><strong>POOLED</strong>– 这种数据源的实现利用”池”的概念将 JDBC 连接对象组织起来，避免了创建新的连接实例时所必需的初始化和认证时间。 这是一种使得并发 Web 应用快速响应请求的流行处理方式。</p>
<p><strong>JNDI</strong>– 这个数据源的实现是为了能在如 EJB 或应用服务器这类容器中使用，容器可以集中或在外部配置数据源，然后放置一个 JNDI 上下文的引用。</p>
<h3 id="如何指定映射文件">如何指定映射文件？</h3>
<p>最佳的方式是告诉 MyBatis 到哪里去找映射文件。你可以使用相对于类路径的资源引用， 或完全限定资源定位符（包括 <code>file:///</code> 的 URL），或类名和包名等。例如：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!-- 使用相对类路径定义资源 --></span><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">mappers</span><span style="color:#E1E4E8">>  </span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">mapper</span><span style="color:#B392F0"> resource</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org/mybatis/builder/AuthorMapper.xml"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">mappers</span><span style="color:#E1E4E8">>  </span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 使用完全限定资源定位符 --></span><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">mappers</span><span style="color:#E1E4E8">>  </span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">mapper</span><span style="color:#B392F0"> url</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"file:///var/mappers/AuthorMapper.xml"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">mappers</span><span style="color:#E1E4E8">>  </span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 使用包名+类名 --></span><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">mappers</span><span style="color:#E1E4E8">>  </span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">mapper</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.mybatis.builder.AuthorMapper"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">mappers</span><span style="color:#E1E4E8">>  </span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 注册包内所有mapper --></span><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">mappers</span><span style="color:#E1E4E8">>  </span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">package</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.mybatis.builder"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">mappers</span><span style="color:#E1E4E8">>  </span></span></code></pre>
<h3 id="select与属性的用法">select与属性的用法？</h3>
<p>简单查询的 select 元素是非常简单的。比如：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">select</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"selectPerson"</span><span style="color:#B392F0"> parameterType</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"int"</span><span style="color:#B392F0"> resultType</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"hashmap"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  SELECT * FROM PERSON WHERE ID = #{id}</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">select</span><span style="color:#E1E4E8">>    </span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--</span></span>
<span class="line"><span style="color:#6A737D">id：查询的名称</span></span>
<span class="line"><span style="color:#6A737D">parameterType：参数类型</span></span>
<span class="line"><span style="color:#6A737D">resultType：返回值类型</span></span>
<span class="line"><span style="color:#6A737D">--></span></span></code></pre>
<p>select 元素有很多属性允许你配置，来决定每条语句的作用细节。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8"> &#x3C;</span><span style="color:#85E89D">select</span></span>
<span class="line"><span style="color:#B392F0">  id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"selectPerson"</span></span>
<span class="line"><span style="color:#B392F0">  parameterType</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"int"</span></span>
<span class="line"><span style="color:#B392F0">  parameterMap</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"deprecated"</span></span>
<span class="line"><span style="color:#B392F0">  resultType</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"hashmap"</span></span>
<span class="line"><span style="color:#B392F0">  resultMap</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"personResultMap"</span></span>
<span class="line"><span style="color:#B392F0">  flushCache</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"false"</span></span>
<span class="line"><span style="color:#B392F0">  useCache</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"true"</span></span>
<span class="line"><span style="color:#B392F0">  timeout</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"10000"</span></span>
<span class="line"><span style="color:#B392F0">  fetchSize</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"256"</span></span>
<span class="line"><span style="color:#B392F0">  statementType</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"PREPARED"</span></span>
<span class="line"><span style="color:#B392F0">  resultSetType</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"FORWARD_ONLY"</span><span style="color:#E1E4E8">>    </span></span></code></pre>
<p>属性的含义：</p>





























































<table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>在命名空间中唯一的标识符，可以被用来引用这条语句。</td></tr><tr><td>parameterType</td><td>将会传入这条语句的参数类的完全限定名或别名。这个属性是可选的，因为 MyBatis 可以通过 TypeHandler 推断出具体传入语句的参数，默认值为 unset。</td></tr><tr><td>resultType</td><td>从这条语句中返回的期望类型的类的完全限定名或别名。注意如果是集合情形，那应该是集合可以包含的类型，而不能是集合本身。使用 resultType 或 resultMap，但不能同时使用。</td></tr><tr><td>resultMap</td><td>外部 resultMap 的命名引用。结果集的映射是 MyBatis 最强大的特性，对其有一个很好的理解的话，许多复杂映射的情形都能迎刃而解。使用 resultMap 或 resultType，但不能同时使用。</td></tr><tr><td>flushCache</td><td>将其设置为 true，任何时候只要语句被调用，都会导致本地缓存和二级缓存都会被清空，默认值：false。</td></tr><tr><td>useCache</td><td>将其设置为 true，将会导致本条语句的结果被二级缓存，默认值：对 select 元素为 true。</td></tr><tr><td>timeout</td><td>这个设置是在抛出异常之前，驱动程序等待数据库返回请求结果的秒数。默认值为 unset（依赖驱动）。</td></tr><tr><td>fetchSize</td><td>这是尝试影响驱动程序每次批量返回的结果行数和这个设置值相等。默认值为 unset（依赖驱动）。</td></tr><tr><td>statementType</td><td>STATEMENT，PREPARED 或 CALLABLE 的一个。这会让 MyBatis 分别使用 Statement，PreparedStatement 或 CallableStatement，默认值：PREPARED。</td></tr><tr><td>resultSetType</td><td>FORWARD_ONLY，SCROLL_SENSITIVE 或 SCROLL_INSENSITIVE 中的一个，默认值为 unset （依赖驱动）。</td></tr><tr><td>databaseId</td><td>如果配置了 databaseIdProvider，MyBatis 会加载所有的不带 databaseId 或匹配当前 databaseId 的语句；如果带或者不带的语句都有，则不带的会被忽略。</td></tr><tr><td>resultOrdered</td><td>这个设置仅针对嵌套结果 select 语句适用：如果为 true，就是假设包含了嵌套结果集或是分组了，这样的话当返回一个主结果行的时候，就不会发生有对前面结果集的引用的情况。这就使得在获取嵌套的结果集的时候不至于导致内存不够用。默认值：false。</td></tr><tr><td>resultSets</td><td>这个设置仅对多结果集的情况适用，它将列出语句执行后返回的结果集并每个结果集给一个名称，名称是逗号分隔的。</td></tr></tbody></table>
<h3 id="insertupdatedelete的用法">insert、update、delete的用法？</h3>
<p>数据变更语句 insert，update 和 delete 的实现非常接近：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">insert</span></span>
<span class="line"><span style="color:#B392F0">  id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"insertAuthor"</span></span>
<span class="line"><span style="color:#B392F0">  parameterType</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"domain.blog.Author"</span></span>
<span class="line"><span style="color:#B392F0">  flushCache</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"true"</span></span>
<span class="line"><span style="color:#B392F0">  statementType</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"PREPARED"</span></span>
<span class="line"><span style="color:#B392F0">  keyProperty</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">""</span></span>
<span class="line"><span style="color:#B392F0">  keyColumn</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">""</span></span>
<span class="line"><span style="color:#B392F0">  useGeneratedKeys</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">""</span></span>
<span class="line"><span style="color:#B392F0">  timeout</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"20"</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">update</span></span>
<span class="line"><span style="color:#B392F0">  id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"updateAuthor"</span></span>
<span class="line"><span style="color:#B392F0">  parameterType</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"domain.blog.Author"</span></span>
<span class="line"><span style="color:#B392F0">  flushCache</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"true"</span></span>
<span class="line"><span style="color:#B392F0">  statementType</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"PREPARED"</span></span>
<span class="line"><span style="color:#B392F0">  timeout</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"20"</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">delete</span></span>
<span class="line"><span style="color:#B392F0">  id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"deleteAuthor"</span></span>
<span class="line"><span style="color:#B392F0">  parameterType</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"domain.blog.Author"</span></span>
<span class="line"><span style="color:#B392F0">  flushCache</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"true"</span></span>
<span class="line"><span style="color:#B392F0">  statementType</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"PREPARED"</span></span>
<span class="line"><span style="color:#B392F0">  timeout</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"20"</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>Insert, Update 和 Delete 的属性</p>













































<table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>命名空间中的唯一标识符，可被用来代表这条语句。</td></tr><tr><td>parameterType</td><td>将要传入语句的参数的完全限定类名或别名。这个属性是可选的，因为 MyBatis 可以通过 TypeHandler 推断出具体传入语句的参数，默认值为 unset。</td></tr><tr><td>flushCache</td><td>将其设置为 true，任何时候只要语句被调用，都会导致本地缓存和二级缓存都会被清空，默认值：true（对应插入、更新和删除语句）。</td></tr><tr><td>timeout</td><td>这个设置是在抛出异常之前，驱动程序等待数据库返回请求结果的秒数。默认值为 unset（依赖驱动）。</td></tr><tr><td>statementType</td><td>STATEMENT，PREPARED 或 CALLABLE 的一个。这会让 MyBatis 分别使用 Statement，PreparedStatement 或 CallableStatement，默认值：PREPARED。</td></tr><tr><td>useGeneratedKeys</td><td>（仅对 insert 和 update 有用）这会令 MyBatis 使用 JDBC 的 getGeneratedKeys 方法来取出由数据库内部生成的主键（比如：像 MySQL 和 SQL Server 这样的关系数据库管理系统的自动递增字段），默认值：false。</td></tr><tr><td>keyProperty</td><td>（仅对 insert 和 update 有用）唯一标记一个属性，MyBatis 会通过 getGeneratedKeys 的返回值或者通过 insert 语句的 selectKey 子元素设置它的键值，默认：unset。如果希望得到多个生成的列，也可以是逗号分隔的属性名称列表。</td></tr><tr><td>keyColumn</td><td>（仅对 insert 和 update 有用）通过生成的键值设置表中的列名，这个设置仅在某些数据库（像 PostgreSQL）是必须的，当主键列不是表中的第一列的时候需要设置。如果希望得到多个生成的列，也可以是逗号分隔的属性名称列表。</td></tr><tr><td>databaseId</td><td>如果配置了 databaseIdProvider，MyBatis 会加载所有的不带 databaseId 或匹配当前 databaseId 的语句；如果带或者不带的语句都有，则不带的会被忽略。</td></tr></tbody></table>
<p>下面就是 insert，update 和 delete 语句的示例：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">insert</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"insertAuthor"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  insert into Author (id,username,password,email,bio)</span></span>
<span class="line"><span style="color:#E1E4E8">  values (#{id},#{username},#{password},#{email},#{bio})</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">insert</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">update</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"updateAuthor"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  update Author set</span></span>
<span class="line"><span style="color:#E1E4E8">    username = #{username},</span></span>
<span class="line"><span style="color:#E1E4E8">    password = #{password},</span></span>
<span class="line"><span style="color:#E1E4E8">    email = #{email},</span></span>
<span class="line"><span style="color:#E1E4E8">    bio = #{bio}</span></span>
<span class="line"><span style="color:#E1E4E8">  where id = #{id}</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">update</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">delete</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"deleteAuthor"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  delete from Author where id = #{id}</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">delete</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="两种字符串替换的区别">两种字符串替换的区别？</h3>

























<table><thead><tr><th>#{}</th><th>${}</th></tr></thead><tbody><tr><td>参数占位符，即预编译</td><td>字符串替换符，即SQL拼接</td></tr><tr><td>很大程度上能防止sql 注入</td><td>不能防止sql 注入</td></tr><tr><td>将传入的数据都当成一个字符串，会对传入的变量自动加一个单引号</td><td>将传入的参数直接显示生成在sql中，且不加任何引号</td></tr><tr><td></td><td>排序时使用order by 动态参数时需要注意，用$而不是#</td></tr></tbody></table>
<h3 id="三种自动映射等级">三种自动映射等级？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">setting</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"autoMappingBehavior"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"PARTIAL"</span><span style="color:#E1E4E8">/></span></span></code></pre>
<p>NONE 表示取消自动映射</p>
<p>PARTIAL 只会自动映射没有定义嵌套结果集映射的结果集</p>
<p>FULL 会自动映射任意复杂的结果集（无论是否嵌套）</p>
<h3 id="if标签的作用">if标签的作用？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">select</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"findActiveBlogWithTitleLike"</span></span>
<span class="line"><span style="color:#B392F0">     resultType</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"Blog"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  SELECT * FROM BLOG </span></span>
<span class="line"><span style="color:#E1E4E8">  WHERE state = ‘ACTIVE’ </span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">if</span><span style="color:#B392F0"> test</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"title != null"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--      如果test为true则语句包含if内的内容--></span></span>
<span class="line"><span style="color:#E1E4E8">    AND title like #{title}</span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">if</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">select</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="foreach标签的用法">foreach标签的用法？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">select</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"selectPostIn"</span><span style="color:#B392F0"> resultType</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"domain.blog.Post"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  SELECT *</span></span>
<span class="line"><span style="color:#E1E4E8">  FROM POST P</span></span>
<span class="line"><span style="color:#E1E4E8">  WHERE ID in</span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">foreach</span><span style="color:#B392F0"> item</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"item"</span><span style="color:#B392F0"> index</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"index"</span><span style="color:#B392F0"> collection</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"list"</span></span>
<span class="line"><span style="color:#B392F0">      open</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"("</span><span style="color:#B392F0"> separator</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">","</span><span style="color:#B392F0"> close</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">")"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        #{item}</span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">foreach</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">select</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--        foreach 允许你指定一个集合，声明可以用在元素体内的集合项和索引变量--></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--        也允许你指定开闭匹配的字符串以及在迭代中间放置分隔符。--></span></span></code></pre>
<h3 id="怎么配置日志级别">怎么配置日志级别？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="properties"><code><span class="line"><span style="color:#6A737D"># 全局日志等级</span></span>
<span class="line"><span style="color:#F97583">log4j.rootLogger</span><span style="color:#E1E4E8">=ERROR, stdout</span></span>
<span class="line"><span style="color:#6A737D"># mabatis mapper日志等级</span></span>
<span class="line"><span style="color:#F97583">log4j.logger.org.mybatis.example.BlogMapper</span><span style="color:#E1E4E8">=TRACE</span></span></code></pre>
<h3 id="一级缓存和二级缓存的定义与区别">一级缓存和二级缓存的定义与区别？</h3>
<ul>
<li>一级缓存
<ul>
<li>定义
<ul>
<li>一级缓存作用域是sqlsession级别的，同一个sqlsession中执行相同的sql查询（相同的sql和参数），第一次会去查询数据库并写到缓存中，第二次从一级缓存中取。</li>
<li>一级缓存是基于 PerpetualCache 的 HashMap 本地缓存，默认打开一级缓存。</li>
</ul>
</li>
<li>清空一级缓存
<ul>
<li>如果中间sqlSession去执行commit操作（执行插入、更新、删除），则会清空SqlSession中的一级缓存，这样做的目的为了让缓存中存储的是最新的信息，避免脏读。</li>
<li>一级缓存时执行commit，close，增删改等操作，就会清空当前的一级缓存；当对SqlSession执行更新操作（update、delete、insert）后并执行commit时，不仅清空其自身的一级缓存（执行更新操作的效果），也清空二级缓存（执行commit()的效果）。</li>
</ul>
</li>
<li>一级缓存无过期时间，只有生命周期</li>
</ul>
</li>
<li>二级缓存
<ul>
<li>简介
<ul>
<li>它指的是Mybatis中SqlSessionFactory对象的缓存。由同一个SqlSessionFactory对象创建的SqlSession共享其缓存。</li>
<li>二级缓存是 mapper 映射级别的缓存，多个 SqlSession 去操作同一个 Mapper 映射的 sql 语句，多个SqlSession 可以共用二级缓存，二级缓存是跨 SqlSession 的。 、</li>
</ul>
</li>
<li>何时存入
<ul>
<li>在关闭sqlsession后(close)，才会把该sqlsession一级缓存中的数据添加到namespace的二级缓存中。</li>
<li>开启了二级缓存后，还需要将要缓存的pojo实现Serializable接口，为了将缓存数据取出执行反序列化操作，因为二级缓存数据存储介质多种多样，不一定只存在内存中，有可能存在硬盘中。</li>
</ul>
</li>
<li>二级缓存有过期时间，但没有后台线程进行检测
<ul>
<li>需要注意的是，并不是key-value的过期时间，而是这个cache的过期时间，是flushInterval，意味着整个清空缓存cache，所以不需要后台线程去定时检测。</li>
<li>每当存取数据的时候，都要检测一下cache的生命时间，默认是1小时，如果这个cache存活了一个小时，那么将整个清空一下。</li>
</ul>
</li>
<li>当 Mybatis 调用 Dao 层查询数据库时，先查询二级缓存，二级缓存中无对应数据，再去查询一级缓存，一级缓存中也没有，最后去数据库查找。</li>
</ul>
</li>
</ul>
<h3 id="usecache与flushcache的作用">useCache与flushCache的作用？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8"> &#x3C;</span><span style="color:#85E89D">select</span></span>
<span class="line"><span style="color:#B392F0">  flushCache</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"false"</span></span>
<span class="line"><span style="color:#B392F0">  useCache</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"true"</span></span>
<span class="line"><span style="color:#E1E4E8">  ></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--useCache:将其设置为 true，将会导致本条语句的结果被二级缓存，默认值：对 select 元素为 true。--></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--flushCache：将其设置为 true，任何时候只要语句被调用，都会导致本地缓存和二级缓存都会被清空，默认值：false。--></span></span></code></pre>
<h3 id="redis的概念">Redis的概念？</h3>
<p>Redis 是一个高性能的key-value数据库。经常用作缓存</p>
<h3 id="那个注解是对dao组件的修饰">那个注解是对dao组件的修饰？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Mapper</span><span style="color:#6A737D"> //Mybatis 需要找到对应的 mapper，在编译的时候动态生成代理类</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Repository</span><span style="color:#6A737D"> //用于标注数据访问组件，即DAO组件</span></span></code></pre>
<h3 id="javamodelgenerator配置sqlmappergenerator配置与javaclientgenerator配置的作用">JavaModelGenerator配置、sqlMapperGenerator配置与JavaClientGenerator配置的作用？</h3>
<ul>
<li>JavaModelGenerator配置生成的实体类的存放的位置(entity层的java文件)</li>
<li>sqlMapperGenerator配置生成的映射文件的位置(resources/dao中的xml文件)</li>
<li>JavaClientGenerator配置生成的mapper接口文件的位置(dao层中的java文件)</li>
</ul>
<h3 id="如何实现分页">如何实现分页？</h3>
<p>导入依赖包</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">>com.github.pagehelper&#x3C;/</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">>pagehelper-spring-boot-starter&#x3C;/</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">version</span><span style="color:#E1E4E8">>1.2.3&#x3C;/</span><span style="color:#85E89D">version</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>配置properties</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="properties"><code><span class="line"><span style="color:#6A737D">#pagehelper配置</span></span>
<span class="line"><span style="color:#F97583">pagehelper.helper-dialect</span><span style="color:#E1E4E8">=mysql</span></span>
<span class="line"><span style="color:#F97583">pagehelper.reasonable</span><span style="color:#E1E4E8">=true</span></span>
<span class="line"><span style="color:#F97583">pagehelper.support-methods-arguments</span><span style="color:#E1E4E8">=true</span></span>
<span class="line"><span style="color:#F97583">pagehelper.params</span><span style="color:#E1E4E8">=</span><span style="color:#F97583">count</span><span style="color:#E1E4E8">=countSql</span></span></code></pre>
<p>使用</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Transactional</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">readOnly</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#E1E4E8"> PageInfo</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Student</span><span style="color:#F97583">></span><span style="color:#B392F0"> getStudentListByBatchName</span><span style="color:#E1E4E8">(String batchName, Integer pageNo) {</span></span>
<span class="line"><span style="color:#6A737D">    //spring boot程序中，添加了PageHelper的启动依赖后，直接调用对应方法分页查询即可</span></span>
<span class="line"><span style="color:#E1E4E8">    PageHelper.</span><span style="color:#B392F0">startPage</span><span style="color:#E1E4E8">(pageNo, </span><span style="color:#79B8FF">5</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    List&#x3C;</span><span style="color:#F97583">Student</span><span style="color:#E1E4E8">> list </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> studentMapper.</span><span style="color:#B392F0">getListByBatchName</span><span style="color:#E1E4E8">(batchName);</span></span>
<span class="line"><span style="color:#6A737D">    //传入查询的列表，创建一个PageInfo对象，用于包含分页的所有信息</span></span>
<span class="line"><span style="color:#6A737D">    //还可以传入第二个参数，表示导航页码的数量</span></span>
<span class="line"><span style="color:#E1E4E8">    PageInfo&#x3C;</span><span style="color:#F97583">Student</span><span style="color:#E1E4E8">> pageInfo</span><span style="color:#F97583">=new</span><span style="color:#E1E4E8"> PageInfo&#x3C;>(list,</span><span style="color:#79B8FF">5</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> pageInfo;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="分页最后封装成什么数据">分页最后封装成什么数据？</h3>
<p><code>PageInfo&#x3C;T></code></p>
<h2 id="spring-framework-40问">spring Framework 40问</h2>
<h3 id="依赖注入的概念">依赖注入的概念？</h3>
<p>Spring 通过 IoC 容器来管理所有 Java 对象的实例化和初始化，控制对象与对象之间的依赖关系.</p>
<p>控制反转核心思想就是由 Spring 负责对象的创建。DI是IOC的一种。在对象创建过程中，Spring 会自动根据依赖关系，将它依赖的对象注入到当前对象中，这就是所谓的“依赖注入”。</p>
<h3 id="springcorecontainer是什么">springCoreContainer是什么？</h3>
<p><img alt="img.png" loading="lazy" decoding="async" fetchpriority="auto" width="720" height="540" src="/_astro/core_container.CrkmzBLE_Z1yWGN7.webp" ></p>
<ul>
<li>Core：核心工具包，包括字节码操作cglib、asm，资源的抽象Resource，对象实例化化工具等等。</li>
<li>Beans：Bean 的定义、Bean 的创建以及对 Bean 的解析。</li>
<li>Context：Context模块建立在Core和Beans模块之上，是Bean运行环境（即保存维护Bean的状态、数据，Bean之间的关系），又称之为Ioc容器。</li>
<li>SpEL：提供了一个强大的表达式语言，可以在运行时查询和操作对象。</li>
</ul>
<h3 id="springioc容器的类型">springIoC容器的类型？</h3>
<h4 id="spring-beanfactory-容器">spring BeanFactory 容器</h4>
<ul>
<li>是Spring bean容器的根接口，提供获取bean，是否包含bean,是否单例与原型，获取bean类型，bean 别名的方法 。</li>
<li>BeanFactory不支持国际化功能</li>
<li>不支持事件机制</li>
<li>没有扩展ResourceLoader，只能加载一个Resource</li>
<li>BeanFactory采用的是延迟加载形式来注入Bean的，即只有在使用到某个Bean时(调用getBean())，才对该Bean进行加载实例化</li>
<li>BeanFactory需要手动注册</li>
</ul>
<h4 id="spring-applicationcontext-容器">Spring ApplicationContext 容器</h4>
<ul>
<li>ApplicationContext继承了BeanFactory</li>
<li>扩展了MessageResource接口，因而具有消息处理的能力(i18N)</li>
<li>通过ApplicationEvent和ApplicationListener这两个接口实现事件机制</li>
<li>扩展了ResourceLoader(资源加载器)接口，从而可以用来加载多个Resource</li>
<li>在容器启动时，一次性创建了所有的Bean</li>
<li>而ApplicationContext则是自动注册</li>
</ul>
<h3 id="applicationcontext容器的实现有哪些">ApplicationContext容器的实现有哪些？</h3>
<p>ApplicationContext 有两个直接子接口：WebApplicationContext 和 ConfigurableApplicationContext。</p>
<p>ConfigurableApplicationContext：扩展于ApplicationContext, 新增加两个主要方法。refresh()和close()，让ApplicationContext具有启动、刷新和关闭上下文的能力。ApplicationContext在初始化上下文时就实例化所有的单例Bean.</p>
<p>WebApplicationContext：WebApplicationContext是专门为WEB应用而准备的，它允许从相对于WEB根目录的路径中完成初始化工作。</p>
<p>最常用的两个实现类：</p>
<p>ClassPathXmlApplicationContext : 从类路径下加载配置文件。</p>
<p>FileSystemXmlApplicationContext : 从文件系统中加载配置文件。</p>
<p>两个都是继承ConfigurableApplicationContext</p>
<h3 id="bean标记的使用">bean标记的使用？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"Bean 唯一标志符"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"包名+类名"</span><span style="color:#B392F0"> p:普通属性</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"普通属性值"</span><span style="color:#B392F0"> p:对象属性-ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"对象的引用"</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>Spring 框架提供了 2 种短命名空间，可以简化 Spring 的 XML 配置，如下表。</p>




















<table><thead><tr><th>短命名空间</th><th>简化的 XML 配置</th><th>说明</th></tr></thead><tbody><tr><td>p 命名空间</td><td><bean> 元素中嵌套的 <property> 元素</property></bean></td><td>是 setter 方式属性注入的一种快捷实现方式</td></tr><tr><td>c 命名空间</td><td><bean> 元素中嵌套的 <constructor> 元素</constructor></bean></td><td>是构造函数属性注入的一种快捷实现方式</td></tr></tbody></table>
<h3 id="bean的范围有哪些">bean的范围有哪些？</h3>
<p>Spring 5 共提供了 6 种 scope 作用域，如下表。</p>

































<table><thead><tr><th>作用范围</th><th>描述</th></tr></thead><tbody><tr><td>singleton</td><td>默认值，单例模式，表示在 Spring 容器中只有一个 Bean 实例</td></tr><tr><td>prototype</td><td>原型模式，表示每次通过 Spring 容器获取 Bean 时，容器都会创建一个新的 Bean 实例。</td></tr><tr><td>request</td><td>每次 HTTP 请求，容器都会创建一个 Bean 实例。该作用域只在当前 HTTP Request 内有效。</td></tr><tr><td>session</td><td>同一个 HTTP Session 共享一个 Bean 实例，不同的 Session 使用不同的 Bean 实例。该作用域仅在当前 HTTP Session 内有效。</td></tr><tr><td>application</td><td>同一个 Web 应用共享一个 Bean 实例，该作用域在当前 ServletContext 内有效。 与 singleton 类似，但 singleton 表示每个 IoC 容器中仅有一个 Bean 实例，而一个 Web 应用中可能会存在多个 IoC 容器，但一个 Web 应用只会有一个 ServletContext，也可以说 application 才是 Web 应用中货真价实的单例模式。</td></tr><tr><td>websocket</td><td>websocket 的作用域是 WebSocket ，即在整个 WebSocket 中有效。</td></tr></tbody></table>
<h3 id="如何获取bean">如何获取bean？</h3>
<ol>
<li>在初始化时保存ApplicationContext对象</li>
<li>通过Spring提供的utils类获取ApplicationContext对象</li>
<li>继承自抽象类ApplicationObjectSupport</li>
<li>继承自抽象类WebApplicationObjectSupport</li>
<li>实现接口ApplicationContextAware</li>
<li>通过Spring提供的ContextLoader</li>
</ol>
<h3 id="bean的生命周期和生命周期方法">bean的生命周期和生命周期方法？</h3>
<p>在传统的 Java 应用中，Bean 的生命周期很简单，使用 Java 关键字 new 进行 Bean 的实例化后，这个 Bean 就可以使用了。一旦这个 Bean 长期不被使用，Java 自动进行垃圾回收。</p>
<p>相比之下，Spring 中 Bean 的生命周期较复杂，大致可以分为以下 5 个阶段：</p>
<ol>
<li>Bean 的实例化</li>
<li>Bean 属性赋值</li>
<li>Bean 的初始化</li>
<li>Bean 的使用</li>
<li>Bean 的销毁</li>
</ol>
<p>Spring 根据 Bean 的作用域来选择 Bean 的管理方式，</p>
<ul>
<li>对于 singleton 作用域的 Bean 来说，Spring IoC 容器能够精确地控制 Bean 何时被创建、何时初始化完成以及何时被销毁；</li>
<li>对于 prototype 作用域的 Bean 来说，Spring IoC 容器只负责创建，然后就将 Bean 的实例交给客户端代码管理，Spring IoC 容器将不再跟踪其生命周期。</li>
</ul>
<p><img alt="Spring 生命周期流程" loading="lazy" decoding="async" fetchpriority="auto" width="982" height="364" src="/_astro/1F32KG1-0.CTVf428K_Z1N96mT.webp" >
Bean 的生命周期回调方法主要有两种：</p>
<ul>
<li>初始化回调方法：在 Spring Bean 被初始化后调用，执行一些自定义的回调操作。</li>
<li>销毁回调方法：在 Spring Bean 被销毁前调用，执行一些自定义的回调操作。</li>
</ul>
<p><strong>通过接口实现</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">//in bean class</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> afterPropertiesSet</span><span style="color:#E1E4E8">() throws Exception {</span></span>
<span class="line"><span style="color:#E1E4E8">   System.out</span></span>
<span class="line"><span style="color:#E1E4E8">           .</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"【InitializingBean接口】调用InitializingBean.afterPropertiesSet()"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 这是DiposibleBean接口方法</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> destroy</span><span style="color:#E1E4E8">() throws Exception {</span></span>
<span class="line"><span style="color:#E1E4E8">   System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"【DiposibleBean接口】调用DiposibleBean.destory()"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p><strong>通过XML配置实现</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">//in bean class</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> myInit</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">    System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"【init-method】调用&#x3C;bean>的init-method属性指定的初始化方法"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> myDestory</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">    System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"【destroy-method】调用&#x3C;bean>的destroy-method属性指定的初始化方法"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"person"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"springBeanTest.Person"</span><span style="color:#B392F0"> init-method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"myInit"</span></span>
<span class="line"><span style="color:#B392F0">        destroy-method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"myDestory"</span><span style="color:#B392F0"> scope</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"singleton"</span><span style="color:#B392F0"> p:name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"张三"</span><span style="color:#B392F0"> p:address</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"广州"</span></span>
<span class="line"><span style="color:#B392F0">        p:phone</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"15900000000"</span><span style="color:#E1E4E8"> /></span></span></code></pre>
<p><strong>通过注解实现</strong></p>

















<table><thead><tr><th>注解</th><th>描述</th></tr></thead><tbody><tr><td>@PostConstruct</td><td>指定初始化回调方法，这个方法会在 Spring Bean 被初始化后被调用，执行一些自定义的回调操作。</td></tr><tr><td>@PreDestroy</td><td>指定销毁回调方法，这个方法会在 Spring Bean 被销毁前被调用，执行一些自定义的回调操作。</td></tr></tbody></table>
<p><strong>通过后置处理器实现</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> interface</span><span style="color:#B392F0"> BeanPostProcessor</span><span style="color:#E1E4E8"> {   </span></span>
<span class="line"><span style="color:#E1E4E8">    Object </span><span style="color:#B392F0">postProcessBeforeInitialization</span><span style="color:#E1E4E8">(Object </span><span style="color:#FFAB70">bean</span><span style="color:#E1E4E8">, String </span><span style="color:#FFAB70">beanName</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">throws</span><span style="color:#E1E4E8"> BeansException;   </span></span>
<span class="line"><span style="color:#E1E4E8">    Object </span><span style="color:#B392F0">postProcessAfterInitialization</span><span style="color:#E1E4E8">(Object </span><span style="color:#FFAB70">bean</span><span style="color:#E1E4E8">, String </span><span style="color:#FFAB70">beanName</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">throws</span><span style="color:#E1E4E8"> BeansException;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="两种显式装配">两种显式装配？</h3>
<p><strong>构造函数注入</strong></p>
<p>使用构造函数实现属性注入大致步骤如下：</p>
<ol>
<li>在 Bean 中添加一个有参构造函数，构造函数内的每一个参数代表一个需要注入的属性；</li>
<li>在 Spring 的 XML 配置文件中，通过 <code>&#x3C;beans></code> 及其子元素 <code>&#x3C;bean></code> 对 Bean 进行定义；</li>
<li>在 <code>&#x3C;bean></code> 元素内使用 <code>&#x3C;constructor-arg></code>元素，对构造函数内的属性进行赋值，Bean 的构造函数内有多少参数，就需要使用多少个 <code>&#x3C;constructor-arg></code> 元素。</li>
</ol>
<p><b><strong>setter注入</strong></b></p>
<p>使用 setter 注入的方式进行属性注入，大致步骤如下：</p>
<ol>
<li>在 Bean 中提供一个默认的无参构造函数（在没有其他带参构造函数的情况下，可省略），并为所有需要注入的属性提供一个 setXxx() 方法；</li>
<li>在 Spring 的 XML 配置文件中，使用 <code>&#x3C;beans></code> 及其子元素 <code>&#x3C;bean></code>对 Bean 进行定义；</li>
<li>在 <code>&#x3C;bean></code>元素内使用 <code>&#x3C;property></code> 元素对各个属性进行赋值。</li>
</ol>
<h3 id="value和ref的区别">value和ref的区别？</h3>
<p>value用于注入字面量属性，ref用于注入引用属性</p>
<h3 id="如何注入集合">如何注入集合？</h3>
<p>标签说明<list>用于注入 list 类型的值，允许重复<set>用于注入 set 类型的值，不允许重复<map>用于注入 key-value 的集合，其中 key 和 value 都可以是任意类型<props>用于注入 key-value 的集合，其中 key 和 value 都是字符串类型</props></map></set></list></p>

























<table><thead><tr><th>标签</th><th>说明</th></tr></thead><tbody><tr><td><code>&#x3C;list></code></td><td>用于注入 list 类型的值，允许重复</td></tr><tr><td><code>&#x3C;set></code></td><td>用于注入 set 类型的值，不允许重复</td></tr><tr><td><code>&#x3C;map></code></td><td>用于注入 key-value 的集合，其中 key 和 value 都可以是任意类型</td></tr><tr><td><code>&#x3C;props></code></td><td>用于注入 key-value 的集合，其中 key 和 value 都是字符串类型</td></tr></tbody></table>
<h3 id="构造函数注入">构造函数注入？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"bean名"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"类"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">constructor-arg</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"属性名"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"值"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">constructor-arg</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"属性名"</span><span style="color:#B392F0"> ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"引用"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>或使用c:命名空间</p>
<h3 id="parent属性的作用">parent属性的作用？</h3>
<p>在 Spring XML 配置中，我们通过子 Bean 的 parent 属性来指定需要继承的父 Bean，配置格式如下。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>&#x3C;!--父Bean--></span></span>
<span class="line"><span>&#x3C;bean id="parentBean" class="xxx.xxxx.xxx.ParentBean" ></span></span>
<span class="line"><span>  &#x3C;property name="xxx" value="xxx"/></span></span>
<span class="line"><span>  &#x3C;property name="xxx" value="xxx"/></span></span>
<span class="line"><span>&#x3C;/bean> </span></span>
<span class="line"><span>&#x3C;!--子Bean--></span></span>
<span class="line"><span>&#x3C;bean id="childBean" class="xxx.xxx.xxx.ChildBean" parent="parentBean"/></span></span></code></pre>
<h3 id="如何使用工厂方法实现di">如何使用工厂方法实现DI？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> AnimalFactory</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">	public</span><span style="color:#F97583"> static</span><span style="color:#E1E4E8"> Animal </span><span style="color:#B392F0">getAnimal1</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">		System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"调用AnimalFactory类的静态工厂方法getAnimal1()................."</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Dog</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#F97583">	public</span><span style="color:#E1E4E8"> Animal </span><span style="color:#B392F0">getAnimal2</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">		System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"调用AnimalFactory类的实例工厂方法getAnimal2()................."</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Pig</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#F97583">	private</span><span style="color:#F97583"> static</span><span style="color:#E1E4E8"> Map&#x3C;</span><span style="color:#F97583">Integer</span><span style="color:#E1E4E8">,</span><span style="color:#F97583">Animal</span><span style="color:#E1E4E8">> map;</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#F97583">	static</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">		map</span><span style="color:#F97583">=new</span><span style="color:#E1E4E8"> HashMap&#x3C;>();</span></span>
<span class="line"><span style="color:#E1E4E8">		map.</span><span style="color:#B392F0">put</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">,</span><span style="color:#F97583">new</span><span style="color:#B392F0"> Dog</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">		map.</span><span style="color:#B392F0">put</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">,</span><span style="color:#F97583">new</span><span style="color:#B392F0"> Pig</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">		map.</span><span style="color:#B392F0">put</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">3</span><span style="color:#E1E4E8">,</span><span style="color:#F97583">new</span><span style="color:#B392F0"> Sheep</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#F97583">	public</span><span style="color:#F97583"> static</span><span style="color:#E1E4E8"> Animal </span><span style="color:#B392F0">getAnimal3</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">int</span><span style="color:#FFAB70"> type</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">		System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"调用AnimalFactory类的静态工厂方法getAnimal3()................."</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#E1E4E8"> map.</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(type);</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>使用静态工厂方法返回自身实例</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!-- 如果想通过一个工厂类的静态工厂方法创建bean</span></span>
<span class="line"><span style="color:#6A737D">     可通过factory-method属性指定创建实例的方法的名称</span></span>
<span class="line"><span style="color:#6A737D">     class指定工厂类的类型</span></span>
<span class="line"><span style="color:#6A737D">--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.qdu.bean.A"</span><span style="color:#B392F0"> factory-method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"getA"</span><span style="color:#E1E4E8"> /></span></span></code></pre>
<p>使用静态工厂方法返回其他类实例</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!-- 如果希望调用A类的静态方法来获取B类的实例 --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 这种情况下，class指定的应该是工厂方法所在的类的名称 --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- factory-method属性指定创建实例的方法的名称 --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 实际创建的对象不是AnimalFactory类型，而是Dog类型 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"animal"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.qdu.bean.AnimalFactory"</span></span>
<span class="line"><span style="color:#B392F0">        factory-method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"getAnimal1"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 希望通过AnimalFactory这个工厂类的静态方法getAnimal3(int type) --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 来创建要托给spring管理的Dog或Pig或Sheep的实例 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"animal"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.qdu.bean.AnimalFactory"</span><span style="color:#B392F0"> factory-method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"getAnimal3"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- constructor-arg在构造函数注入的时候是构造函数参数的名称 --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 但是对于工厂方法，就是指定一个普通方法参数的信息 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">constructor-arg</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"type"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"2"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>使用非静态工厂方法返回其他类实例(不考)</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!-- 如果希望通过工厂类A的非静态方法来实例化B --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 必须先有一个A的对象才可以 --></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"animalFactory"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.qdu.bean.AnimalFactory"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 如果希望通过工厂类A的非静态方法来实例化B </span></span>
<span class="line"><span style="color:#6A737D">     这时候不再使用class属性来指定生成的bean的类型</span></span>
<span class="line"><span style="color:#6A737D">     factory-bean属性指定创建bean实例（如这里的Pig）的工厂对象是哪个，指定其id或name</span></span>
<span class="line"><span style="color:#6A737D">     factory-method属性指定创建bean实例的工厂方法的名称 </span></span>
<span class="line"><span style="color:#6A737D">     id为animal的bean实际是一个Pig实例，也即是getAnimal2()方法返回的实例</span></span>
<span class="line"><span style="color:#6A737D">--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"animal"</span><span style="color:#B392F0"> factory-bean</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"animalFactory"</span><span style="color:#B392F0"> factory-method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"getAnimal2"</span><span style="color:#E1E4E8"> /></span></span></code></pre>
<p>在java中获取bean</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> static</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> main</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">String</span><span style="color:#E1E4E8">[] args) {</span></span>
<span class="line"><span style="color:#E1E4E8">    ApplicationContext ctx </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> ClassPathXmlApplicationContext</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"config/beans1.xml"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    A a </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> ctx.</span><span style="color:#B392F0">getBean</span><span style="color:#E1E4E8">(A.class);</span></span>
<span class="line"><span style="color:#E1E4E8">    a.</span><span style="color:#B392F0">methodOfA</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="自动装配的模式有哪些">自动装配的模式有哪些？</h3>
<p>Spring 共提供了 5 中自动装配规则，它们分别与 autowire 属性的 5 个取值对应，具体说明如下表。</p>





























<table><thead><tr><th>属性值</th><th>说明</th></tr></thead><tbody><tr><td>byName</td><td>按名称自动装配。 Spring 会根据的 Java 类中对象属性的名称，在整个应用的上下文 ApplicationContext（IoC 容器）中查找。若某个 Bean 的 id 或 name 属性值与这个对象属性的名称相同，则获取这个 Bean，并与当前的 Java 类 Bean 建立关联关系。</td></tr><tr><td>byType</td><td>按类型自动装配。 Spring 会根据 Java 类中的对象属性的类型，在整个应用的上下文 ApplicationContext（IoC 容器）中查找。若某个 Bean 的 class 属性值与这个对象属性的类型相匹配，则获取这个 Bean，并与当前的 Java 类的 Bean 建立关联关系。</td></tr><tr><td>constructor</td><td>与 byType 模式相似，不同之处在与它应用于构造器参数（依赖项），如果在容器中没有找到与构造器参数类型一致的 Bean，那么将抛出异常。 其实就是根据构造器参数的数据类型，进行 byType 模式的自动装配。</td></tr><tr><td>default</td><td>表示默认采用上一级元素 <beans> 设置的自动装配规则（default-autowire）进行装配。</beans></td></tr><tr><td>no</td><td>默认值，表示不使用自动装配，Bean 的依赖关系必须通过 <constructor-arg>和 <property> 元素的 ref 属性来定义。</property></constructor-arg></td></tr></tbody></table>
<p><strong>基于注解的自动装配</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!--开启组件扫描--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">context:component-scan</span><span style="color:#B392F0"> base-package</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">""</span><span style="color:#E1E4E8">/></span></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Autowired</span></span></code></pre>
<h3 id="显式装配与自动装配的关系">显式装配与自动装配的关系？</h3>
<p>显式装配是在 XML 配置中通过 <constructor-arg>和 <property> 中的 ref 属性，手动维护 Bean 与 Bean 之间的依赖关系的。</property></constructor-arg></p>
<p>Spring 的自动装配功能可以让 Spring 容器依据某种规则（自动装配的规则，有五种），为指定的 Bean 从应用的上下文（AppplicationContext 容器）中查找它所依赖的 Bean，并自动建立 Bean 之间的依赖关系。而这一过程是在完全不使用任何 <constructor-arg>和 <property> 元素 ref 属性的情况下进行的。</property></constructor-arg></p>
<h3 id="依赖注入使用哪些注解">依赖注入使用哪些注解？</h3>
<p>Spring 提供了以下多个注解，这些注解可以直接标注在 Java 类上，将它们定义成 Spring Bean。</p>

























<table><thead><tr><th>注解</th><th>说明</th></tr></thead><tbody><tr><td>@Component</td><td>该注解用于描述 Spring 中的 Bean，它是一个泛化的概念，仅仅表示容器中的一个组件（Bean），并且可以作用在应用的任何层次，例如 Service 层、Dao 层等。 使用时只需将该注解标注在相应类上即可。</td></tr><tr><td>@Repository</td><td>该注解用于将数据访问层（Dao 层）的类标识为 Spring 中的 Bean，其功能与 @Component 相同。</td></tr><tr><td>@Service</td><td>该注解通常作用在业务层（Service 层），用于将业务层的类标识为 Spring 中的 Bean，其功能与 @Component 相同。</td></tr><tr><td>@Controller</td><td>该注解通常作用在控制层（如 Struts2 的 Action、SpringMVC 的 Controller），用于将控制层的类标识为 Spring 中的 Bean，其功能与 @Component 相同。</td></tr></tbody></table>
<p>我们可以通过以下注解将定义好 Bean 装配到其它的 Bean 中。</p>





















<table><thead><tr><th>注解</th><th>说明</th></tr></thead><tbody><tr><td>@Autowired</td><td>可以应用到 Bean 的属性变量、setter 方法、非 setter 方法及构造函数等，默认按照 Bean 的类型进行装配。 @Autowired 注解默认按照 Bean 的类型进行装配，默认情况下它要求依赖对象必须存在，如果允许 null 值，可以设置它的 required 属性为 false。如果我们想使用按照名称（byName）来装配，可以结合 @Qualifier 注解一起使用</td></tr><tr><td>@Resource</td><td>作用与 Autowired 相同，区别在于 @Autowired 默认按照 Bean 类型装配，而 @Resource 默认按照 Bean 的名称进行装配。 @Resource 中有两个重要属性：name 和 type。 Spring 将 name 属性解析为 Bean 的实例名称，type 属性解析为 Bean 的实例类型。如果指定 name 属性，则按实例名称进行装配；如果指定 type 属性，则按 Bean 类型进行装配；如果都不指定，则先按 Bean 实例名称装配，如果不能匹配，则再按照 Bean 类型进行装配；如果都无法匹配，则抛出 NoSuchBeanDefinitionException 异常。</td></tr><tr><td>@Qualifier</td><td>与 @Autowired 注解配合使用，会将默认的按 Bean 类型装配修改为按 Bean 的实例名称装配，Bean 的实例名称由 @Qualifier 注解的参数指定。</td></tr></tbody></table>
<h3 id="configuration和bean注解的作用">@Configuration和@Bean注解的作用</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">/*</span></span>
<span class="line"><span style="color:#6A737D">@Configration 注解作用在类、接口（包含注解）上</span></span>
<span class="line"><span style="color:#6A737D">@Configuration 用于定义配置类，可替换 xml 配置文件</span></span>
<span class="line"><span style="color:#6A737D">@Configration 注解类中可以声明一个或多个 @Bean 方法</span></span>
<span class="line"><span style="color:#6A737D">*/</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Configuration</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> MyConfig</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  /*</span></span>
<span class="line"><span style="color:#6A737D">    @Bean 注解作用在方法上</span></span>
<span class="line"><span style="color:#6A737D">    @Bean 指示一个方法返回一个 Spring 容器管理的 Bean，也就是说方法返回值就是给Springr容器装配的bean</span></span>
<span class="line"><span style="color:#6A737D">    @Bean 一般和 @Component 或者 @Configuration 一起使用，也可以在 @Service 里使用，没有特定要求，主要看项目的需求。</span></span>
<span class="line"><span style="color:#6A737D">    @Bean 注解默认作用域为单例 singleton 作用域，可通过 @Scope(“prototype”) 设置为原型作用域</span></span>
<span class="line"><span style="color:#6A737D">  */</span></span>
<span class="line"><span style="color:#E1E4E8">  @</span><span style="color:#F97583">Bean</span></span>
<span class="line"><span style="color:#F97583">  public</span><span style="color:#E1E4E8"> MyBean </span><span style="color:#B392F0">myBean</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">      return</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> MyBean</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">  @</span><span style="color:#F97583">Bean</span></span>
<span class="line"><span style="color:#F97583">  public</span><span style="color:#E1E4E8"> MyBean </span><span style="color:#B392F0">myBean1</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">      return</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> MyBean</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span></code></pre>
<h3 id="什么是aop">什么是AOP？</h3>
<p>AOP 的全称是“Aspect Oriented Programming”，译为“面向切面编程”，和 OOP（面向对象编程）类似，它也是一种编程思想。</p>
<h3 id="通知的概念">通知的概念？</h3>
<p>AOP的一套术语</p>





































<table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>Joinpoint（连接点）</td><td>AOP 的核心概念，指的是程序执行期间明确定义的一个点，例如方法的调用、类初始化、对象实例化等。  在 Spring 中，连接点则指可以被动态代理拦截目标类的方法。</td></tr><tr><td>Pointcut（切入点）</td><td>又称切点，指要对哪些 Joinpoint 进行拦截，即被拦截的连接点。</td></tr><tr><td>Advice（通知）</td><td>指拦截到 Joinpoint 之后要执行的代码，即对切入点增强的内容。</td></tr><tr><td>Target（目标）</td><td>指代理的目标对象，通常也被称为被通知（advised）对象。</td></tr><tr><td>Weaving（织入）</td><td>指把增强代码应用到目标对象上，生成代理对象的过程。</td></tr><tr><td>Proxy（代理）</td><td>指生成的代理对象。</td></tr><tr><td>Aspect（切面）</td><td>切面是切入点（Pointcut）和通知（Advice）的结合。</td></tr></tbody></table>
<h3 id="连接点的概念">连接点的概念？</h3>
<p>见上条</p>
<h3 id="通知的类型位置">通知的类型（位置）？</h3>
<p>共有5种：</p>





























<table><thead><tr><th>通知</th><th>说明</th></tr></thead><tbody><tr><td>before（前置通知）</td><td>通知方法在目标方法调用之前执行</td></tr><tr><td>after（后置通知）</td><td>通知方法在目标方法返回或异常后调用</td></tr><tr><td>after-returning（返回后通知）</td><td>通知方法会在目标方法返回后调用</td></tr><tr><td>after-throwing（抛出异常通知）</td><td>通知方法会在目标方法抛出异常后调用</td></tr><tr><td>around（环绕通知）</td><td>通知方法会将目标方法封装起来</td></tr></tbody></table>
<h3 id="用来创建通知的注解有哪些">用来创建通知的注解有哪些？</h3>









































<table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>@Aspect</td><td>用于定义一个切面。</td></tr><tr><td>@Pointcut</td><td>用于定义一个切入点。</td></tr><tr><td>@Before</td><td>用于定义前置通知，相当于 BeforeAdvice。</td></tr><tr><td>@AfterReturning</td><td>用于定义后置通知，相当于 AfterReturningAdvice。</td></tr><tr><td>@Around</td><td>用于定义环绕通知，相当于 MethodInterceptor。</td></tr><tr><td>@AfterThrowing</td><td>用于定义抛出通知，相当于 ThrowAdvice。</td></tr><tr><td>@After</td><td>用于定义最终通知，不管是否异常，该通知都会执行。</td></tr><tr><td>@DeclareParents</td><td>用于定义引介通知，相当于 IntroductionInterceptor（不要求掌握）。</td></tr></tbody></table>
<h3 id="如何声明切入点">如何声明切入点？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">//Pointcut表示式</span></span>
<span class="line"><span style="color:#6A737D">//我除了可以通过切入点表达式（execution）直接对切点进行定义外</span></span>
<span class="line"><span style="color:#6A737D">//还可以通过切入点方法的名称来引用其他的切入点</span></span>
<span class="line"><span style="color:#6A737D">//在使用方法名引用其他切入点时，还可以使用“&#x26;&#x26;”、“||”和“!”等表示“与”、“或”、“非”的含义</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Pointcut</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"execution(* com.savage.aop.MessageSender.*(..))"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#6A737D">//定义为切点的方法，它的返回值类型必须为 void</span></span>
<span class="line"><span style="color:#F97583">private</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> log</span><span style="color:#E1E4E8">(){}</span></span></code></pre>
<h3 id="在返回后通知中如何获取目标方法的返回值">在返回后通知中如何获取目标方法的返回值？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">AfterReturning</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">value</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "pt()"</span><span style="color:#E1E4E8">,</span><span style="color:#79B8FF">returning</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "ret"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> afterReturning</span><span style="color:#E1E4E8">(Object ret) {</span></span>
<span class="line"><span style="color:#E1E4E8">    System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"afterReturning advice ..."</span><span style="color:#F97583">+</span><span style="color:#E1E4E8">ret);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="xml如何配置aop">XML如何配置AOP？</h3>
<p>在 Spring 的 XML 配置文件中，添加以下内容启用 @AspectJ 注解支持。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!-- 开启注解扫描 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">context:component-scan</span><span style="color:#B392F0"> base-package</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">""</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--开启AspectJ 自动代理--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">aop:aspectj-autoproxy</span><span style="color:#E1E4E8">/></span></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!-- 默认是不启用@AspectJ的支持，也就是默认情况下，@Aspect等注解是不起作用的，启用AspectJ支持后才会起作用 --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 该注解的作用是启用@AspectJ风格的Spring AOP --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 如果是基于xml schema的aop是否还需要使用该标记: 不用 --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- &#x3C;aop:aspectj-autoproxy /> --></span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 方面对应的类需要注册为spring管理的bean，才能将方面切入到需要的地方 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"logAspect1"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.qdu.aop.LogAspect1"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"logAspect2"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.qdu.aop.LogAspect2"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.qdu.service.impl.StudentServiceImpl"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.qdu.service.impl.TeacherServiceImpl"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.qdu.service.impl.MathServiceImpl"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- execution(* com.qdu.service.StudentService.*(..)) --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- execution(* com.qdu.service.MathService.add(..)) --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- execution(* com.qdu.service.MathService.divide(..)) --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- execution(* com.qdu.service.MathService.multiply(..)) --></span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- aop:config用于以xml格式配置aop --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">aop:config</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- aop:config标记中可以定义切入点，这样的切入点可以在多个aop:aspect标记中使用 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">aop:pointcut</span></span>
<span class="line"><span style="color:#B392F0">        expression</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"execution(* com.qdu.service.StudentService.*(..))"</span></span>
<span class="line"><span style="color:#B392F0">        id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"pt1"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- aop:aspect用于配置一个方面对应的类 --></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- ref指定方面类bean的id或name --></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- order用于控制通知的执行顺序，值越小，该方面类中对应的通知就会先执行 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">aop:aspect</span><span style="color:#B392F0"> ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"logAspect1"</span><span style="color:#B392F0"> order</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"2"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- 在aop:aspect标记内定义的切入点只能在该aop:aspect标记中使用 --></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">aop:pointcut</span></span>
<span class="line"><span style="color:#B392F0">            expression</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"execution(* com.qdu.service.MathService.add(..))"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"pt2"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">aop:pointcut</span></span>
<span class="line"><span style="color:#B392F0">            expression</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"execution(* com.qdu.service.MathService.divide(..))"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"pt3"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">aop:pointcut</span></span>
<span class="line"><span style="color:#B392F0">            expression</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"execution(* com.qdu.service.MathService.multiply(..))"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"pt4"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- aop:before用于配置前置通知，method指定作为前置通知的方法的名称 --></span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- pointcut属性用于指定切入点表达式，pointcut-ref用于指定引用的切入点的id --></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">aop:before</span><span style="color:#B392F0"> method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"before1"</span><span style="color:#B392F0"> pointcut-ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"pt1"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">aop:before</span><span style="color:#B392F0"> method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"before2"</span><span style="color:#B392F0"> pointcut-ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"pt1"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- aop:after-returning用于配置返回后通知，returning用于指定一个参数名（可随便起，尽量有意义） --></span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- 这样可以在返回后通知对应的方法上添加一个该名称的参数，用于接收目标方法的返回值 --></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">aop:after-returning</span><span style="color:#B392F0"> method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"afterReturning"</span><span style="color:#B392F0"> pointcut-ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"pt2"</span><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#B392F0">                returning</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"returnValue"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- aop:after-throwing用于配置抛出后通知，throwing属性指定一个参数名（可随便起，尽量有意义） --></span><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- 这样可以抛出后通知对应的方法上添加一个该名称的参数，用于接收抛出的异常对象 --></span><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">aop:after-throwing</span><span style="color:#B392F0"> method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"afterThrowing"</span><span style="color:#B392F0"> pointcut-ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"pt3"</span><span style="color:#B392F0"> throwing</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"ex"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- aop:after用于配置最终通知/后置通知 --></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">aop:after</span><span style="color:#B392F0"> method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"after"</span><span style="color:#B392F0"> pointcut-ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"pt3"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- aop:around用于配置环绕通知 --></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">aop:around</span><span style="color:#B392F0"> method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"around"</span><span style="color:#B392F0"> pointcut-ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"pt4"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">aop:aspect</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">aop:aspect</span><span style="color:#B392F0"> ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"logAspect2"</span><span style="color:#B392F0"> order</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"1"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">aop:before</span><span style="color:#B392F0"> method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"before3"</span><span style="color:#B392F0"> pointcut-ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"pt1"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">aop:before</span><span style="color:#B392F0"> method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"before4"</span><span style="color:#B392F0"> pointcut-ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"pt1"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">aop:aspect</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">aop:config</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="jdbc-template的crud操作有哪些">JDBC Template的CRUD操作有哪些？</h3>





































<table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>public int update(String sql)</td><td>用于执行新增、更新、删除等语句；sql：需要执行的 SQL 语句；args 表示需要传入到 SQL 语句中的参数。</td></tr><tr><td>public int update(String sql,Object… args)</td><td></td></tr><tr><td>public void execute(String sql)</td><td>可以执行任意 SQL，一般用于执行 DDL 语句； sql：需要执行的 SQL 语句；action 表示执行完 SQL 语句后，要调用的函数。</td></tr><tr><td>public T execute(String sql, PreparedStatementCallback action)</td><td></td></tr><tr><td>public <t> List<t> query(String sql, RowMapper<t> rowMapper, @Nullable Object… args)</t></t></t></td><td>用于执行查询语句；sql：需要执行的 SQL 语句；rowMapper：用于确定返回的集合（List）的类型；args：表示需要传入到 SQL 语句的参数。</td></tr><tr><td>public <t> T queryForObject(String sql, RowMapper<t> rowMapper, @Nullable Object… args)</t></t></td><td></td></tr><tr><td>public int[] batchUpdate(String sql, List&#x3C;Object[]> batchArgs, final int[] argTypes)</td><td>用于批量执行新增、更新、删除等语句； sql：需要执行的 SQL 语句；argTypes：需要注入的 SQL 参数的 JDBC 类型；batchArgs：表示需要传入到 SQL 语句的参数。</td></tr></tbody></table>
<h3 id="如何创建处理全局异常">如何创建处理全局异常？</h3>
<p>局部异常</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">//可以在控制器类中添加方法，用于处理异常，这个方法就叫做局部异常处理程序</span></span>
<span class="line"><span style="color:#6A737D">//这样该方法可以处理这个控制器类里发生的异常</span></span>
<span class="line"><span style="color:#6A737D">//异常处理程序使用@ExceptionHandler注解修饰，说明这个方法用于处理异常</span></span>
<span class="line"><span style="color:#6A737D">//value属性用于指定处理的异常类型，多个类型使用一个数组给出</span></span>
<span class="line"><span style="color:#6A737D">//在异常处理程序中，可以跳转到某个错误页面，返回一个字符串指定视图名称即可</span></span>
<span class="line"><span style="color:#6A737D">//在异常处理程序中，可以使用Model等对象返回一些数据给页面</span></span>
<span class="line"><span style="color:#6A737D">//如果希望获取异常信息，可以在方法上添加一个对应异常类型(如ArithmeticException)的参数</span></span>
<span class="line"><span style="color:#6A737D">//也可使用Throwable来接收所有类型的异常对象 </span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">ExceptionHandler</span><span style="color:#E1E4E8">({ArithmeticException.class,NumberFormatException.class})</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#E1E4E8"> String </span><span style="color:#B392F0">handleException</span><span style="color:#E1E4E8">(Model model, Throwable ex) {</span></span>
<span class="line"><span style="color:#6A737D">    //可以考虑使用Log4J2等日志框架将异常记录到日志</span></span>
<span class="line"><span style="color:#E1E4E8">    logger.</span><span style="color:#B392F0">error</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"发生异常，异常消息： "</span><span style="color:#F97583">+</span><span style="color:#E1E4E8">ex.</span><span style="color:#B392F0">getMessage</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#6A737D">    //如果需要返回一些数据显示在页面，可以添加到Model对象中</span></span>
<span class="line"><span style="color:#E1E4E8">    model.</span><span style="color:#B392F0">addAttribute</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"msg"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"局部异常处理程序，异常消息： "</span><span style="color:#F97583">+</span><span style="color:#E1E4E8">ex.</span><span style="color:#B392F0">getMessage</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#9ECBFF"> "error"</span><span style="color:#E1E4E8">; </span><span style="color:#6A737D">//指定要跳转的视图的名称</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>全局异常</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">//全局异常处理程序所在的类也要成为spring mvc容器管理的bean</span></span>
<span class="line"><span style="color:#6A737D">//@Controller、@Service、@Repository、@Component</span></span>
<span class="line"><span style="color:#6A737D">//@RestController、@Configuration、@ControllerAdvice</span></span>
<span class="line"><span style="color:#6A737D">//@ControllerAdvice也会将一个类注册为spring管理的bean</span></span>
<span class="line"><span style="color:#6A737D">//@ControllerAdvice作用很多，其中一个作用是修饰包含全局异常处理程序类</span></span>
<span class="line"><span style="color:#6A737D">//这样，需要开启对这个类所在的包的扫描，但是这里我们直接将类放到了com.qdu.controller的子包</span></span>
<span class="line"><span style="color:#6A737D">//com.qdu.controller.advice包下，所以不需要额外开启包扫描</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">ControllerAdvice</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> GlobalExceptionHandler</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">	private</span><span style="color:#F97583"> static</span><span style="color:#E1E4E8"> Logger logger</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">LoggerFactory.</span><span style="color:#B392F0">getLogger</span><span style="color:#E1E4E8">(GlobalExceptionHandler.class);</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	//添加一个方法，作为异常处理程序</span></span>
<span class="line"><span style="color:#6A737D">	//方法需要使用@ExceptionHandler注解进行修饰</span></span>
<span class="line"><span style="color:#6A737D">	//可以考虑处理异常后，跳转到一个友好的错误页面，如果需要，也可在错误页面显示一些信息</span></span>
<span class="line"><span style="color:#6A737D">	//如果同时定义了全局异常处理和局部异常处理程序，那么会使用局部异常处理程序</span></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">ExceptionHandler</span><span style="color:#E1E4E8">({ArithmeticException.class})</span></span>
<span class="line"><span style="color:#F97583">	public</span><span style="color:#E1E4E8"> String </span><span style="color:#B392F0">handleException</span><span style="color:#E1E4E8">(Model </span><span style="color:#FFAB70">model</span><span style="color:#E1E4E8">, ArithmeticException </span><span style="color:#FFAB70">e</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">		logger.</span><span style="color:#B392F0">error</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"全局异常处理程序：程序发生异常，异常消息-"</span><span style="color:#F97583">+</span><span style="color:#E1E4E8">e.</span><span style="color:#B392F0">getMessage</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">		model.</span><span style="color:#B392F0">addAttribute</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"msg"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"全局异常处理程序，异常消息： "</span><span style="color:#F97583">+</span><span style="color:#E1E4E8">e.</span><span style="color:#B392F0">getMessage</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#9ECBFF"> "error"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	//异常处理程序前也可使用@ResponseBody注解，让返回的内容成为响应正文内容显示</span></span>
<span class="line"><span style="color:#6A737D">	//而不是要跳转的页面的名称</span></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">ExceptionHandler</span><span style="color:#E1E4E8">({IOException.class,ArrayIndexOutOfBoundsException.class})</span></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">ResponseBody</span></span>
<span class="line"><span style="color:#F97583">	public</span><span style="color:#E1E4E8"> String </span><span style="color:#B392F0">exceptionHandler2</span><span style="color:#E1E4E8">(Throwable </span><span style="color:#FFAB70">ex</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#9ECBFF"> "Exception occurred, exception message: "</span><span style="color:#F97583">+</span><span style="color:#E1E4E8">ex.</span><span style="color:#B392F0">getMessage</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="jdbc-template-和-namedparameterjdbctemplate的区别">JDBC Template 和 NamedParameterJDBCTemplate的区别</h3>
<p>JDBC Template：最基本的JDBC模板，支持基于索引参数（<code>?</code>）的查询</p>
<p>NamedParameterJdbcTemplate：使用该模板类执行查询的时候使用命名参数的方式绑定到SQL而不是索引参数</p>
<h3 id="事务的特征">事务的特征？</h3>
<p>事务具有 4 个特性：原子性、一致性、隔离性和持久性，简称为 ACID 特性。</p>
<ul>
<li>原子性（Atomicity）：一个事务是一个不可分割的工作单位，事务中包括的动作要么都做要么都不做。</li>
<li>一致性（Consistency）：事务必须保证数据库从一个一致性状态变到另一个一致性状态，一致性和原子性是密切相关的。</li>
<li>隔离性（Isolation）：一个事务的执行不能被其它事务干扰，即一个事务内部的操作及使用的数据对并发的其它事务是隔离的，并发执行的各个事务之间不能互相打扰。</li>
<li>持久性（Durability）：持久性也称为永久性，指一个事务一旦提交，它对数据库中数据的改变就是永久性的，后面的其它操作和故障都不应该对其有任何影响。</li>
</ul>
<h3 id="事务的传播行为">事务的传播行为？</h3>
<p>事务传播行为（propagation behavior）指的是，当一个事务方法被另一个事务方法调用时，这个事务方法应该如何运行。
Spring 提供了以下 7 种不同的事务传播行为。</p>





































<table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>PROPAGATION_MANDATORY</td><td>支持当前事务，如果不存在当前事务，则引发异常。</td></tr><tr><td>PROPAGATION_NESTED</td><td>如果当前事务存在，则在嵌套事务中执行。</td></tr><tr><td>PROPAGATION_NEVER</td><td>不支持当前事务，如果当前事务存在，则引发异常。</td></tr><tr><td>PROPAGATION_NOT_SUPPORTED</td><td>不支持当前事务，始终以非事务方式执行。</td></tr><tr><td>PROPAGATION_REQUIRED</td><td>默认传播行为，如果存在当前事务，则当前方法就在当前事务中运行，如果不存在，则创建一个新的事务，并在这个新建的事务中运行。</td></tr><tr><td>PROPAGATION_REQUIRES_NEW</td><td>创建新事务，如果已经存在事务则暂停当前事务。</td></tr><tr><td>PROPAGATION_SUPPORTS</td><td>支持当前事务，如果不存在事务，则以非事务方式执行。</td></tr></tbody></table>
<h3 id="事务并发可能导致的问题">事务并发可能导致的问题？</h3>
<p>事务的隔离级别定义了一个事务可能受其他并发事务影响的程度。</p>
<p>在实际应用中，经常会出现多个事务同时对同一数据执行不同操作，来实现各自的任务的情况。此时就有可能导致脏读、幻读以及不可重复读等问题的出现。</p>
<p>在理想情况下，事务之间是完全隔离的，这自然不会出现上述问题。但完全的事务隔离会导致性能问题，而且并不是所有的应用都需要事务的完全隔离，因此有时应用程序在事务隔离上也有一定的灵活性。</p>
<p>Spring 中提供了以下隔离级别，我们可以根据自身的需求自行选择合适的隔离级别。</p>





























<table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>ISOLATION_DEFAULT</td><td>使用后端数据库默认的隔离级别</td></tr><tr><td>ISOLATION_READ_UNCOMMITTED</td><td>允许读取尚未提交的更改，可能导致脏读、幻读和不可重复读</td></tr><tr><td>ISOLATION_READ_COMMITTED</td><td>Oracle 默认级别，允许读取已提交的并发事务，防止脏读，可能出现幻读和不可重复读</td></tr><tr><td>ISOLATION_REPEATABLE_READ</td><td>MySQL 默认级别，多次读取相同字段的结果是一致的，防止脏读和不可重复读，可能出现幻读</td></tr><tr><td>ISOLATION_SERIALIZABLE</td><td>完全服从 ACID 的隔离级别，防止脏读、不可重复读和幻读</td></tr></tbody></table>
<h3 id="platformtransactionmanager接口的作用">PlatformTransactionManager接口的作用？</h3>
<p>Spring 并不会直接管理事务，而是通过事务管理器对事务进行管理的。</p>
<p>在 Spring 中提供了一个 org.springframework.transaction.PlatformTransactionManager 接口，这个接口被称为 Spring 的事务管理器，其源码如下。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> interface</span><span style="color:#B392F0"> PlatformTransactionManager</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> TransactionManager</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    TransactionStatus </span><span style="color:#B392F0">getTransaction</span><span style="color:#E1E4E8">(@</span><span style="color:#F97583">Nullable</span><span style="color:#E1E4E8"> TransactionDefinition </span><span style="color:#FFAB70">definition</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">throws</span><span style="color:#E1E4E8"> TransactionException;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    void</span><span style="color:#B392F0"> commit</span><span style="color:#E1E4E8">(TransactionStatus </span><span style="color:#FFAB70">status</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">throws</span><span style="color:#E1E4E8"> TransactionException;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    void</span><span style="color:#B392F0"> rollback</span><span style="color:#E1E4E8">(TransactionStatus </span><span style="color:#FFAB70">status</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">throws</span><span style="color:#E1E4E8"> TransactionException;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>该接口中各方法说明如下：</p>





















<table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>TransactionStatus getTransaction(TransactionDefinition definition)</td><td>用于获取事务的状态信息</td></tr><tr><td>void commit(TransactionStatus status)</td><td>用于提交事务</td></tr><tr><td>void rollback(TransactionStatus status)</td><td>用于回滚事务</td></tr></tbody></table>
<p>Spring 为不同的持久化框架或平台（例如 JDBC、Hibernate、JPA 以及 JTA 等）提供了不同的 PlatformTransactionManager 接口实现，这些实现类被称为事务管理器实现。</p>





























<table><thead><tr><th>实现类</th><th>说明</th></tr></thead><tbody><tr><td>org.springframework.<br>jdbc.datasource.<br>DataSourceTransactionManager</td><td>使用 Spring JDBC 或 iBatis 进行持久化数据时使用。</td></tr><tr><td>org.springframework.<br>orm.hibernate3.<br>HibernateTransactionManager</td><td>使用 Hibernate 3.0 及以上版本进行持久化数据时使用。</td></tr><tr><td>org.springframework<br>.orm.jpa.<br>JpaTransactionManager</td><td>使用 JPA 进行持久化时使用。</td></tr><tr><td>org.springframework<br>.jdo.<br>JdoTransactionManager</td><td>当持久化机制是 Jdo 时使用。</td></tr><tr><td>org.springframework.<br>transaction.<br>jta.JtaTransactionManager</td><td>使用 JTA 来实现事务管理，在一个事务跨越多个不同的资源（即分布式事务）使用该实现。</td></tr></tbody></table>
<p>这些事务管理器的使用方式十分简单，我们只要根据持久化框架（或平台）选用相应的事务管理器实现，即可实现对事物的管理，而不必关心实际事务实现到底是什么。</p>
<h3 id="如何使用xml配置事务">如何使用XML配置事务？</h3>
<h4 id="1-引入-tx-命名空间">1. 引入 tx 命名空间</h4>
<p>Spring 提供了一个 tx 命名空间，借助它可以极大地简化 Spring 中的声明式事务的配置。</p>
<p>想要使用 tx 命名空间，第一步就是要在 XML 配置文件中添加 tx 命名空间的约束。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;?</span><span style="color:#85E89D">xml</span><span style="color:#B392F0"> version</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"1.0"</span><span style="color:#B392F0"> encoding</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"UTF-8"</span><span style="color:#E1E4E8">?></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">beans</span><span style="color:#B392F0"> xmlns</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.springframework.org/schema/beans"</span></span>
<span class="line"><span style="color:#B392F0">       xmlns:xsi</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.w3.org/2001/XMLSchema-instance"</span></span>
<span class="line"><span style="color:#B392F0">       xmlns:context</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.springframework.org/schema/context"</span></span>
<span class="line"><span style="color:#B392F0">       xmlns:aop</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.springframework.org/schema/aop"</span></span>
<span class="line"><span style="color:#B392F0">       xmlns:tx</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.springframework.org/schema/tx"</span></span>
<span class="line"><span style="color:#B392F0">       xsi:schemaLocation</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.springframework.org/schema/beans</span></span>
<span class="line"><span style="color:#9ECBFF">        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span></span>
<span class="line"><span style="color:#9ECBFF">        http://www.springframework.org/schema/context</span></span>
<span class="line"><span style="color:#9ECBFF">        http://www.springframework.org/schema/context/spring-context.xsd</span></span>
<span class="line"><span style="color:#9ECBFF">        http://www.springframework.org/schema/aop</span></span>
<span class="line"><span style="color:#9ECBFF">        http://www.springframework.org/schema/aop/spring-aop.xsd</span></span>
<span class="line"><span style="color:#9ECBFF">        http://www.springframework.org/schema/tx</span></span>
<span class="line"><span style="color:#9ECBFF">        http://www.springframework.org/schema/tx/spring-tx.xsd"</span><span style="color:#E1E4E8">>    </span></span></code></pre>
<blockquote>
<p>**注意：**由于 Spring 提供的声明式事务管理是依赖于 Spring AOP 实现的，因此我们在 XML 配置文件中还应该添加与 aop 命名空间相关的配置。</p>
</blockquote>
<h4 id="2-配置事务管理器">2. 配置事务管理器</h4>
<p>接下来，我们就需要借助数据源配置，定义相应的事务管理器实现（PlatformTransactionManager 接口的实现类）的 Bean，配置内容如下。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!--配置数据源 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"dataSource"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--数据库连接地址--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"url"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"xxx"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--数据库的用户名--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"username"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"xxx"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--数据库的密码--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"password"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"xxx"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--数据库驱动--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"driverClassName"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"xxx"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--配置事务管理器，以 JDBC 为例--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"transactionManager"</span></span>
<span class="line"><span style="color:#B392F0">      class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"dataSource"</span><span style="color:#B392F0"> ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"dataSource"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>在以上配置中，配置的事务管理器实现为 DataSourceTransactionManager，即为 JDBC 和 iBatis 提供的 PlatformTransactionManager 接口实现。</p>
<h4 id="3-配置事务通知">3. 配置事务通知</h4>
<p>在 Spring 的 XML 配置文件中配置事务通知，指定事务作用的方法以及所需的事务属性。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!--配置通知--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">tx:advice</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tx-advice"</span><span style="color:#B392F0"> transaction-manager</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"transactionManager"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--配置事务参数--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">tx:attributes</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">tx:method</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"create*"</span><span style="color:#B392F0"> propagation</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"REQUIRED"</span><span style="color:#B392F0"> isolation</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"DEFAULT"</span><span style="color:#B392F0"> read-only</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"false"</span><span style="color:#B392F0"> timeout</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"10"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">tx:attributes</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">tx:advice</span><span style="color:#E1E4E8">></span></span></code></pre>
<h5 id="事务管理器配置">事务管理器配置</h5>
<p>当我们使用 <a href="tx:advice">tx:advice</a> 来声明事务时，需要通过 transaction-manager 参数来定义一个事务管理器，这个参数的取值默认为 transactionManager。</p>
<p>如果我们自己设置的事务管理器（第 2 步中设置的事务管理器 id）恰好与默认值相同，则可以省略对改参数的配置。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">tx:advice</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tx-advice"</span><span style="color:#E1E4E8"> ></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--配置事务参数--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">tx:attributes</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">tx:method</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"create*"</span><span style="color:#B392F0"> propagation</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"REQUIRED"</span><span style="color:#B392F0"> isolation</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"DEFAULT"</span><span style="color:#B392F0"> read-only</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"false"</span><span style="color:#B392F0"> timeout</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"10"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">tx:attributes</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">tx:advice</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>但如果我们自己设置的事务管理器 id 与默认值不同，则必须手动在 <a href="tx:advice">tx:advice</a> 元素中通过 transaction-manager 参数指定。</p>
<h5 id="事务属性配置">事务属性配置</h5>
<p>对于<a href="tx:advice">tx:advice</a> 来说，事务属性是被定义在<a href="tx:attributes">tx:attributes</a> 中的，该元素可以包含一个或多个 <a href="tx:method">tx:method</a> 元素。</p>
<p><a href="tx:method">tx:method</a> 元素包含多个属性参数，可以为某个或某些指定的方法（name 属性定义的方法）定义事务属性，如下表所示。</p>

































<table><thead><tr><th>事务属性</th><th>说明</th></tr></thead><tbody><tr><td>propagation</td><td>指定事务的传播行为。</td></tr><tr><td>isolation</td><td>指定事务的隔离级别。</td></tr><tr><td>read-only</td><td>指定是否为只读事务。</td></tr><tr><td>timeout</td><td>表示超时时间，单位为“秒”；声明的事务在指定的超时时间后，自动回滚，避免事务长时间不提交会回滚导致的数据库资源的占用。</td></tr><tr><td>rollback-for</td><td>指定事务对于那些类型的异常应当回滚，而不提交。</td></tr><tr><td>no-rollback-for</td><td>指定事务对于那些异常应当继续运行，而不回滚。</td></tr></tbody></table>
<h3 id="4-配置切点切面">4. 配置切点切面</h3>
<p><a href="tx:advice">tx:advice</a> 元素只是定义了一个 AOP 通知，它并不是一个完整的事务性切面。我们在 <a href="tx:advice">tx:advice</a> 元素中并没有定义哪些 Bean 应该被通知，因此我们需要一个切点来做这件事。</p>
<p>在 Spring 的 XML 配置中，我们可以利用 Spring AOP 技术将事务通知（tx-advice）和切点配置到切面中，配置内容如下。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!--配置切点和切面--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">aop:config</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--配置切点--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">aop:pointcut</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tx-pt"</span><span style="color:#B392F0"> expression</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"execution(* net.biancheng.c.service.impl.OrderServiceImpl.*(..))"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--配置切面--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">aop:advisor</span><span style="color:#B392F0"> advice-ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tx-advice"</span><span style="color:#B392F0"> pointcut-ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tx-pt"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">aop:advisor</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">aop:config</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="如何启用注解驱动的事务编程模型">如何启用注解驱动的事务编程模型？</h3>
<h4 id="1-开启注解事务">1. 开启注解事务</h4>
<p>tx 命名空间提供了一个 <a href="tx:annotation-driven">tx:annotation-driven</a> 元素，用来开启注解事务，简化 Spring 声明式事务的 XML 配置。</p>
<p><a href="tx:annotation-driven">tx:annotation-driven</a> 元素的使用方式也十分的简单，我们只要在 Spring 的 XML 配置中添加这样一行配置即可。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">tx:annotation-driven</span><span style="color:#B392F0"> transaction-manager</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"transactionManager"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">tx:annotation-driven</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>与 <a href="tx:advice">tx:advice</a> 元素一样，<a href="tx:annotation-driven">tx:annotation-driven</a> 也需要通过 transaction-manager 属性来定义一个事务管理器，这个参数的取值默认为 transactionManager。如果我们使用的事务管理器的 id 与默认值相同，则可以省略对该属性的配置，形式如下。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">tx:annotation-driven</span><span style="color:#E1E4E8">/></span></span></code></pre>
<p>通过 <a href="tx:annotation-driven">tx:annotation-driven</a> 元素开启注解事务后，Spring 会自动对容器中的 Bean 进行检查，找到使用 @Transactional 注解的 Bean，并为其提供事务支持。</p>
<h4 id="2-使用-transactional-注解">2. 使用 @Transactional 注解</h4>
<p>@Transactional 注解是 Spring 声明式事务编程的核心注解，该注解既可以在类上使用，也可以在方法上使用。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Transactional</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> XXX</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">Transactional</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> A</span><span style="color:#E1E4E8">(Order </span><span style="color:#FFAB70">order</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">    ……</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> B</span><span style="color:#E1E4E8">(Order </span><span style="color:#FFAB70">order</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">    ……</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>若 @Transactional 注解在类上使用，则表示类中的所有方法都支持事务；若 @Transactional 注解在方法上使用，则表示当前方法支持事务。</p>
<p>Spring 在容器中查找所有使用了 @Transactional 注解的 Bean，并自动为它们添加事务通知，通知的事务属性则是通过 @Transactional 注解的属性来定义的。</p>
<p>@Transactional 注解包含多个属性，其中常用属性如下表。</p>

































<table><thead><tr><th>事务属性</th><th>说明</th></tr></thead><tbody><tr><td>propagation</td><td>指定事务的传播行为。</td></tr><tr><td>isolation</td><td>指定事务的隔离级别。</td></tr><tr><td>read-only</td><td>指定是否为只读事务。</td></tr><tr><td>timeout</td><td>表示超时时间，单位为“秒”；声明的事务在指定的超时时间后，自动回滚，避免事务长时间不提交会回滚导致的数据库资源的占用。</td></tr><tr><td>rollback-for</td><td>指定事务对于那些类型的异常应当回滚，而不提交。</td></tr><tr><td>no-rollback-for</td><td>指定事务对于那些异常应当继续运行，而不回滚。</td></tr></tbody></table>
<h3 id="sqlsessionfactory的创建与使用">SQLSessionFactory的创建与使用？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> MybatisUtil</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    private</span><span style="color:#F97583"> static</span><span style="color:#E1E4E8"> SqlSessionFactory sqlSessionFactory;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">    static</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">        try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">            InputStream is </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> Resources.</span><span style="color:#B392F0">getResourceAsStream</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"config/mybatis-config.xml"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">            SqlSessionFactoryBuilder builder </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> SqlSessionFactoryBuilder</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">            sqlSessionFactory </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> builder.</span><span style="color:#B392F0">build</span><span style="color:#E1E4E8">(is);</span></span>
<span class="line"><span style="color:#E1E4E8">        } </span><span style="color:#F97583">catch</span><span style="color:#E1E4E8"> (IOException </span><span style="color:#FFAB70">ex</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">            ex.</span><span style="color:#B392F0">printStackTrace</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">        }</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> static</span><span style="color:#E1E4E8"> SqlSessionFactory </span><span style="color:#B392F0">getSqlSessionFactory</span><span style="color:#E1E4E8">(){</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> sqlSessionFactory;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> static</span><span style="color:#E1E4E8"> SqlSession </span><span style="color:#B392F0">openSession</span><span style="color:#E1E4E8">(){</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> sqlSessionFactory.</span><span style="color:#B392F0">openSession</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="如何使用java类替换webxml">如何使用Java类替换web.xml？</h3>
<p>web.xml对应的配置</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> MyWebAppInitializer</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> AbstractAnnotationConfigDispatcherServletInitializer</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">	// spring的配置</span></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">	protected</span><span style="color:#E1E4E8"> Class&#x3C;</span><span style="color:#F97583">?</span><span style="color:#E1E4E8">>[] </span><span style="color:#B392F0">getRootConfigClasses</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#F97583"> new</span><span style="color:#F97583"> Class</span><span style="color:#E1E4E8">[] { SpringConfig.class };</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">	// springMVC的配置</span></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">	protected</span><span style="color:#E1E4E8"> Class&#x3C;</span><span style="color:#F97583">?</span><span style="color:#E1E4E8">>[] </span><span style="color:#B392F0">getServletConfigClasses</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#F97583"> new</span><span style="color:#F97583"> Class</span><span style="color:#E1E4E8">[] { SpringMvcConfig.class };</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">	// servlet配置</span></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">	protected</span><span style="color:#F97583"> String</span><span style="color:#E1E4E8">[] </span><span style="color:#B392F0">getServletMappings</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#F97583"> new</span><span style="color:#F97583"> String</span><span style="color:#E1E4E8">[] { </span><span style="color:#9ECBFF">"/"</span><span style="color:#E1E4E8"> };</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">	// servlet过滤器</span></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">	protected</span><span style="color:#F97583"> Filter</span><span style="color:#E1E4E8">[] </span><span style="color:#B392F0">getServletFilters</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#F97583"> new</span><span style="color:#F97583"> Filter</span><span style="color:#E1E4E8">[] {</span></span>
<span class="line"><span style="color:#F97583">			new</span><span style="color:#B392F0"> CharacterEncodingFilter</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"utf-8"</span><span style="color:#E1E4E8">,</span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">)	</span></span>
<span class="line"><span style="color:#E1E4E8">		};</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>springApplication.xml相应的配置</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Configuration</span></span>
<span class="line"><span style="color:#6A737D">//开启对service组件所在包的扫描</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">ComponentScan</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">basePackages</span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span><span style="color:#9ECBFF">"com.qdu.service"</span><span style="color:#E1E4E8">})</span></span>
<span class="line"><span style="color:#6A737D">//指定要使用的属性文件的位置，src目录下的文件要添加classpath:作为前缀</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">PropertySource</span><span style="color:#E1E4E8">({</span><span style="color:#9ECBFF">"classpath:config/jdbc.properties"</span><span style="color:#E1E4E8">})</span></span>
<span class="line"><span style="color:#6A737D">//开启对Mapper接口所在包的扫描，这样mybatis-spring可以帮你发现映射器</span></span>
<span class="line"><span style="color:#6A737D">//帮你创建Mapper接口的对象，也就是映射器实例</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">MapperScan</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">basePackages</span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span><span style="color:#9ECBFF">"com.qdu.mapper"</span><span style="color:#E1E4E8">})</span></span>
<span class="line"><span style="color:#6A737D">//启用注解驱动的编程模型，这样可以通过使用@Transactional注解来实现事务</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">EnableTransactionManagement</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> SpringConfig</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	//注入一个Environment对象，用于读取属性文件中的属性</span></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Autowired</span></span>
<span class="line"><span style="color:#E1E4E8">	Environment env;</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	//1. 配置数据源</span></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Bean</span></span>
<span class="line"><span style="color:#F97583">	public</span><span style="color:#E1E4E8"> DruidDataSource </span><span style="color:#B392F0">dataSource</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">		</span></span>
<span class="line"><span style="color:#6A737D">		//属性文件中属性的值都是字符串，所以如果需要转换类型，需要手动转换</span></span>
<span class="line"><span style="color:#E1E4E8">		DruidDataSource dataSource </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> DruidDataSource</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">		dataSource.</span><span style="color:#B392F0">setDriverClassName</span><span style="color:#E1E4E8">(env.</span><span style="color:#B392F0">getProperty</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"jdbc.driver"</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#E1E4E8">		dataSource.</span><span style="color:#B392F0">setUrl</span><span style="color:#E1E4E8">(env.</span><span style="color:#B392F0">getProperty</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"jdbc.url"</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#E1E4E8">		dataSource.</span><span style="color:#B392F0">setUsername</span><span style="color:#E1E4E8">(env.</span><span style="color:#B392F0">getProperty</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"jdbc.username"</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#E1E4E8">		dataSource.</span><span style="color:#B392F0">setPassword</span><span style="color:#E1E4E8">(env.</span><span style="color:#B392F0">getProperty</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"jdbc.password"</span><span style="color:#E1E4E8">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">		dataSource.</span><span style="color:#B392F0">setInitialSize</span><span style="color:#E1E4E8">(Integer.</span><span style="color:#B392F0">parseInt</span><span style="color:#E1E4E8">(env.</span><span style="color:#B392F0">getProperty</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"initialSize"</span><span style="color:#E1E4E8">)));</span></span>
<span class="line"><span style="color:#E1E4E8">		dataSource.</span><span style="color:#B392F0">setMaxActive</span><span style="color:#E1E4E8">(Integer.</span><span style="color:#B392F0">parseInt</span><span style="color:#E1E4E8">(env.</span><span style="color:#B392F0">getProperty</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"maxActive"</span><span style="color:#E1E4E8">)));</span></span>
<span class="line"><span style="color:#E1E4E8">		dataSource.</span><span style="color:#B392F0">setMaxWait</span><span style="color:#E1E4E8">(Integer.</span><span style="color:#B392F0">parseInt</span><span style="color:#E1E4E8">(env.</span><span style="color:#B392F0">getProperty</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"maxWait"</span><span style="color:#E1E4E8">)));</span></span>
<span class="line"><span style="color:#E1E4E8">		dataSource.</span><span style="color:#B392F0">setMinIdle</span><span style="color:#E1E4E8">(Integer.</span><span style="color:#B392F0">parseInt</span><span style="color:#E1E4E8">(env.</span><span style="color:#B392F0">getProperty</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"minIdle"</span><span style="color:#E1E4E8">)));</span></span>
<span class="line"><span style="color:#E1E4E8">		dataSource.</span><span style="color:#B392F0">setTimeBetweenEvictionRunsMillis</span><span style="color:#E1E4E8">(Long.</span><span style="color:#B392F0">parseLong</span><span style="color:#E1E4E8">(env.</span><span style="color:#B392F0">getProperty</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"timeBetweenEvictionRunsMillis"</span><span style="color:#E1E4E8">)));</span></span>
<span class="line"><span style="color:#E1E4E8">		dataSource.</span><span style="color:#B392F0">setMinEvictableIdleTimeMillis</span><span style="color:#E1E4E8">(Long.</span><span style="color:#B392F0">parseLong</span><span style="color:#E1E4E8">(env.</span><span style="color:#B392F0">getProperty</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"minEvictableIdleTimeMillis"</span><span style="color:#E1E4E8">)));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">		dataSource.</span><span style="color:#B392F0">setValidationQuery</span><span style="color:#E1E4E8">(env.</span><span style="color:#B392F0">getProperty</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"validationQuery"</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#E1E4E8">		dataSource.</span><span style="color:#B392F0">setTestWhileIdle</span><span style="color:#E1E4E8">(Boolean.</span><span style="color:#B392F0">parseBoolean</span><span style="color:#E1E4E8">(env.</span><span style="color:#B392F0">getProperty</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"minEvictableIdleTimeMillis"</span><span style="color:#E1E4E8">)));</span></span>
<span class="line"><span style="color:#E1E4E8">		dataSource.</span><span style="color:#B392F0">setTestOnBorrow</span><span style="color:#E1E4E8">(Boolean.</span><span style="color:#B392F0">parseBoolean</span><span style="color:#E1E4E8">(env.</span><span style="color:#B392F0">getProperty</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"testOnBorrow"</span><span style="color:#E1E4E8">)));</span></span>
<span class="line"><span style="color:#E1E4E8">		dataSource.</span><span style="color:#B392F0">setTestOnReturn</span><span style="color:#E1E4E8">(Boolean.</span><span style="color:#B392F0">parseBoolean</span><span style="color:#E1E4E8">(env.</span><span style="color:#B392F0">getProperty</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"testOnReturn"</span><span style="color:#E1E4E8">)));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#E1E4E8"> dataSource;</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	//2. 配置SqlSessionFactory</span></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Bean</span></span>
<span class="line"><span style="color:#F97583">	public</span><span style="color:#E1E4E8"> SqlSessionFactory </span><span style="color:#B392F0">sqlSessionFactory</span><span style="color:#E1E4E8">(DataSource </span><span style="color:#FFAB70">ds</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">throws</span><span style="color:#E1E4E8"> Exception {</span></span>
<span class="line"><span style="color:#6A737D">		//通过SqlSessionFactoryBean来创建SqlSessionFactory对象</span></span>
<span class="line"><span style="color:#E1E4E8">		SqlSessionFactoryBean factoryBean</span><span style="color:#F97583">=new</span><span style="color:#B392F0"> SqlSessionFactoryBean</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#6A737D">		//用传入的DataSource对象设置为依赖的数据源</span></span>
<span class="line"><span style="color:#E1E4E8">		factoryBean.</span><span style="color:#B392F0">setDataSource</span><span style="color:#E1E4E8">(ds);</span></span>
<span class="line"><span style="color:#6A737D">		//指定要使用别名的类型所在的包，这样在mybatis映射文件等文件中可以使用类型的别名</span></span>
<span class="line"><span style="color:#E1E4E8">		factoryBean.</span><span style="color:#B392F0">setTypeAliasesPackage</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"com.qdu.entity"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#6A737D">		//返回创建的SqlSessionFactory对象，成为spring容器管理的bean</span></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#E1E4E8"> factoryBean.</span><span style="color:#B392F0">getObject</span><span style="color:#E1E4E8">(); </span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	//3. 配置事务管理器</span></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Bean</span></span>
<span class="line"><span style="color:#F97583">	public</span><span style="color:#E1E4E8"> DataSourceTransactionManager </span><span style="color:#B392F0">txManager</span><span style="color:#E1E4E8">(DataSource </span><span style="color:#FFAB70">ds</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> DataSourceTransactionManager</span><span style="color:#E1E4E8">(ds);</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>springMVC.xml对应的配置</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Configuration</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">ComponentScan</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">basePackages</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span><span style="color:#9ECBFF">"com.qdu.controller"</span><span style="color:#E1E4E8">})</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">EnableWebMvc</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> SpringMvcConfig</span><span style="color:#F97583"> implements</span><span style="color:#B392F0"> WebMvcConfigurer</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> addResourceHandlers</span><span style="color:#E1E4E8">(ResourceHandlerRegistry </span><span style="color:#FFAB70">registry</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">        registry.</span><span style="color:#B392F0">addResourceHandler</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/static/**"</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">addResourceLocations</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/static/"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> addViewControllers</span><span style="color:#E1E4E8">(ViewControllerRegistry </span><span style="color:#FFAB70">registry</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">        registry.</span><span style="color:#B392F0">addViewController</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/"</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">setViewName</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"index"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">        registry.</span><span style="color:#B392F0">addViewController</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/index"</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">setViewName</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"index"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">Bean</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#E1E4E8"> SpringResourceTemplateResolver </span><span style="color:#B392F0">templateResolver</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">        SpringResourceTemplateResolver templateResolver </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> SpringResourceTemplateResolver</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">        templateResolver.</span><span style="color:#B392F0">setPrefix</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/WEB-INF/templates/"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">        templateResolver.</span><span style="color:#B392F0">setSuffix</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">".html"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">        templateResolver.</span><span style="color:#B392F0">setTemplateMode</span><span style="color:#E1E4E8">(TemplateMode.HTML); </span></span>
<span class="line"><span style="color:#E1E4E8">        templateResolver.</span><span style="color:#B392F0">setCacheable</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">        templateResolver.</span><span style="color:#B392F0">setCharacterEncoding</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"UTF-8"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> templateResolver;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">Bean</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#E1E4E8"> SpringTemplateEngine </span><span style="color:#B392F0">templateEngine</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">        SpringTemplateEngine templateEngine </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> SpringTemplateEngine</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">        templateEngine.</span><span style="color:#B392F0">setTemplateResolver</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">templateResolver</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">        templateEngine.</span><span style="color:#B392F0">setEnableSpringELCompiler</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> templateEngine;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">Bean</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#E1E4E8"> ThymeleafViewResolver </span><span style="color:#B392F0">viewResolver</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">        ThymeleafViewResolver viewResolver </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> ThymeleafViewResolver</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">        viewResolver.</span><span style="color:#B392F0">setTemplateEngine</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">templateEngine</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">        viewResolver.</span><span style="color:#B392F0">setCharacterEncoding</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"UTF-8"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> viewResolver;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="如何集成ssm">如何集成SSM？</h3>
<h4 id="java配置类配置ssm">java配置类配置ssm</h4>
<p>见上条</p>
<h4 id="xml配置ssm">xml配置ssm</h4>
<p>web.xml</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;?</span><span style="color:#85E89D">xml</span><span style="color:#B392F0"> version</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"1.0"</span><span style="color:#B392F0"> encoding</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"UTF-8"</span><span style="color:#E1E4E8">?></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">web-app</span><span style="color:#B392F0"> xmlns:xsi</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.w3.org/2001/XMLSchema-instance"</span></span>
<span class="line"><span style="color:#B392F0">	xmlns</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://xmlns.jcp.org/xml/ns/javaee"</span></span>
<span class="line"><span style="color:#B392F0">	xsi:schemaLocation</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span>
<span class="line"><span style="color:#B392F0">	version</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"4.0"</span><span style="color:#E1E4E8">> </span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">listener</span><span style="color:#E1E4E8">> </span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">listener-class</span><span style="color:#E1E4E8">>org.springframework.web.context.ContextLoaderListener&#x3C;/</span><span style="color:#85E89D">listener-class</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">listener</span><span style="color:#E1E4E8">> </span></span>
<span class="line"><span style="color:#E1E4E8">     </span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">filter</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">filter-name</span><span style="color:#E1E4E8">>characterEncodingFilter&#x3C;/</span><span style="color:#85E89D">filter-name</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">filter-class</span><span style="color:#E1E4E8">>org.springframework.web.filter.CharacterEncodingFilter&#x3C;/</span><span style="color:#85E89D">filter-class</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">init-param</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">param-name</span><span style="color:#E1E4E8">>encoding&#x3C;/</span><span style="color:#85E89D">param-name</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">param-value</span><span style="color:#E1E4E8">>UTF-8&#x3C;/</span><span style="color:#85E89D">param-value</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;/</span><span style="color:#85E89D">init-param</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">init-param</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">param-name</span><span style="color:#E1E4E8">>forceEncoding&#x3C;/</span><span style="color:#85E89D">param-name</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">param-value</span><span style="color:#E1E4E8">>true&#x3C;/</span><span style="color:#85E89D">param-value</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;/</span><span style="color:#85E89D">init-param</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">filter</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">filter-mapping</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">filter-name</span><span style="color:#E1E4E8">>characterEncodingFilter&#x3C;/</span><span style="color:#85E89D">filter-name</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">url-pattern</span><span style="color:#E1E4E8">>/*&#x3C;/</span><span style="color:#85E89D">url-pattern</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;/</span><span style="color:#85E89D">filter-mapping</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">context-param</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">param-name</span><span style="color:#E1E4E8">>contextConfigLocation&#x3C;/</span><span style="color:#85E89D">param-name</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">param-value</span><span style="color:#E1E4E8">>classpath:config/spring-config.xml&#x3C;/</span><span style="color:#85E89D">param-value</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">context-param</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">servlet</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">servlet-name</span><span style="color:#E1E4E8">>dispatcher&#x3C;/</span><span style="color:#85E89D">servlet-name</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">servlet-class</span><span style="color:#E1E4E8">>org.springframework.web.servlet.DispatcherServlet&#x3C;/</span><span style="color:#85E89D">servlet-class</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">init-param</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">param-name</span><span style="color:#E1E4E8">>contextConfigLocation&#x3C;/</span><span style="color:#85E89D">param-name</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">param-value</span><span style="color:#E1E4E8">>classpath:config/spring-mvc.xml&#x3C;/</span><span style="color:#85E89D">param-value</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;/</span><span style="color:#85E89D">init-param</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">load-on-startup</span><span style="color:#E1E4E8">>1&#x3C;/</span><span style="color:#85E89D">load-on-startup</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">servlet</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">servlet-mapping</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">servlet-name</span><span style="color:#E1E4E8">>dispatcher&#x3C;/</span><span style="color:#85E89D">servlet-name</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">url-pattern</span><span style="color:#E1E4E8">>/&#x3C;/</span><span style="color:#85E89D">url-pattern</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">servlet-mapping</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">session-config</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">session-timeout</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">			30</span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;/</span><span style="color:#85E89D">session-timeout</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">session-config</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">web-app</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>spring-config</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">beans</span><span style="color:#E1E4E8"> 略></span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 1. 开启包扫描 --></span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 因为后面使用MapperScannerConfigurer这个类的配置开启了对Mapper接口所在包的扫描 --></span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 而且我们已经没有Mapper的实现类了，所以这里不需要扫描mapper包了 --></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">context:component-scan</span><span style="color:#B392F0"> base-package</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.qdu.service"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 2. 指定要加载的属性文件的位置，可以指定多个，逗号隔开 --></span><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">context:property-placeholder</span><span style="color:#B392F0"> location</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"classpath:config/jdbc.properties"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 3. 配置数据源，这里使用alibaba的DruidDataSource --></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"dataSource"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.alibaba.druid.pool.DruidDataSource"</span><span style="color:#B392F0"> init-method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"init"</span><span style="color:#B392F0"> destroy-method</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"close"</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"driverClassName"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${jdbc.driverClass}"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"url"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${jdbc.url}"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"username"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${jdbc.username}"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"password"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${jdbc.password}"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"initialSize"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${initialSize}"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"maxActive"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${maxActive}"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"maxWait"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${maxWait}"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"minIdle"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${minIdle}"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"timeBetweenEvictionRunsMillis"</span></span>
<span class="line"><span style="color:#B392F0">			value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${timeBetweenEvictionRunsMillis}"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"minEvictableIdleTimeMillis"</span></span>
<span class="line"><span style="color:#B392F0">			value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${minEvictableIdleTimeMillis}"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"validationQuery"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${validationQuery}"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"testWhileIdle"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${testWhileIdle}"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"testOnBorrow"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${testOnBorrow}"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"testOnReturn"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${testOnReturn}"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 4. 配置SqlSessionFactoryBean，告知spring如何创建SqlSessionFactory对象 --></span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 并将创建的SqlSessionFactory交给spring容器管理，然后可以在需要的地方依赖注入 --></span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 这里class指定的SqlSessionFactoryBean，这是一个工厂bean，负责生产某种类型的对象 --></span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 它负责创建SqlSessionFactory对象并交给spring管理该对象 --></span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 这里的id是它创建的SqlSessionFactory这个bean的id，而不是SqlSessionFactoryBean的id --></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"sqlSessionFactory"</span><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#B392F0">	      class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.mybatis.spring.SqlSessionFactoryBean"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"dataSource"</span><span style="color:#B392F0"> ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"dataSource"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#6A737D">  		&#x3C;!-- 如果还需要使用mybatis配置文件，可以使用configLocation属性指定其位置 --></span></span>
<span class="line"><span style="color:#6A737D">  		&#x3C;!-- &#x3C;property name="configLocation" value="classpath:mybatis-config.xml" /> --></span></span>
<span class="line"><span style="color:#6A737D">  		&#x3C;!-- typeAliasesPackage属性用于指定实体类所在的包，这样在mybatis映射文件中可以使用别名来使用实体类 --></span></span>
<span class="line"><span style="color:#E1E4E8">  		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"typeAliasesPackage"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.qdu.entity"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#6A737D">  		&#x3C;!-- mapperLocations属性用于指定mybatis映射文件的位置 --></span></span>
<span class="line"><span style="color:#6A737D">  		&#x3C;!-- &#x3C;property name="mapperLocations" value="classpath:com/qdu/mapper/**/*.xml" /> --></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 5. 配置MapperScannerConfigurer，扫描Mapper接口所在的包，这样可以发现映射器 --></span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 可以不用一个个注册映射器，而是直接指定Mapper接口所在的包 --></span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 让spring扫描Mapper接口所在的包，根据每个Mapper接口创建对应的Mapper对象，也就是映射器实例 --></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">		&#x3C;!-- 需要使用basePackage属性指定Mapper接口所在的包</span></span>
<span class="line"><span style="color:#6A737D">			 这样映射器会自动被创建，在需要的地方直接注入映射器（Mapper实例）即可--></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"basePackage"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.qdu.mapper"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 6. spring集成mybatis应该将事务交给spring管理 --></span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 6.1 配置事务管理器，事务管理器提供方法操作事务 --></span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"txManager"</span><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#B392F0">	      class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">	    &#x3C;!-- 事务管理器和SqlSessionFactoryBean使用的数据源必须是同一个 --></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"dataSource"</span><span style="color:#B392F0"> ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"dataSource"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">>	</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 6.2 配置事务通知 --></span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 配置事务通知其实就是配置通知的bean，但是不使用bean标记 --></span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 而是使用tx:advice标记简化事务配置，需要指定通知bean的id和依赖的事务管理器--></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">tx:advice</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"txAdvice"</span><span style="color:#B392F0"> transaction-manager</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"txManager"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">tx:attributes</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">			&#x3C;!-- tx:method标记用于指定每个要加事务的方法如何应用事务 --></span></span>
<span class="line"><span style="color:#6A737D">			&#x3C;!-- 查询操作可加事务，可不加事务，但是如果查询操作可能受并发事务影响 --></span></span>
<span class="line"><span style="color:#6A737D">			&#x3C;!-- 那就要考虑加事务 --></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">tx:method</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"add*"</span><span style="color:#B392F0"> propagation</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"REQUIRED"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">tx:method</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"update*"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">tx:method</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"delete*"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">tx:method</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"transfer*"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#6A737D">			&#x3C;!-- 如果查询加了事务，最好使用只读事务，方便优化查询 --></span></span>
<span class="line"><span style="color:#E1E4E8">			&#x3C;</span><span style="color:#85E89D">tx:method</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"get*"</span><span style="color:#B392F0"> read-only</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"true"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;/</span><span style="color:#85E89D">tx:attributes</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">tx:advice</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 6.3 配置事务通知器，指定事务通知应用到什么切入点 --></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">aop:config</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">aop:pointcut</span><span style="color:#B392F0"> expression</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"within(com.qdu.service..*)"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"pt"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#6A737D">		&#x3C;!-- 配置通知器，指定哪个通知应用到哪个切入点 --></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">aop:advisor</span><span style="color:#B392F0"> advice-ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"txAdvice"</span><span style="color:#B392F0">  pointcut-ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"pt"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">aop:config</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">beans</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>spring-mvc</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;?</span><span style="color:#85E89D">xml</span><span style="color:#B392F0"> version</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"1.0"</span><span style="color:#B392F0"> encoding</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"UTF-8"</span><span style="color:#E1E4E8">?></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">beans</span><span style="color:#E1E4E8"> 略></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--1. 开启包扫描，扫描控制器所在包 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">context:component-scan</span><span style="color:#B392F0"> base-package</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.qdu.controller"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--2. 启用注解驱动的控制器编程模型，也就是启用Web MVC配置 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">mvc:annotation-driven</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--3. 配置Thymeleaf相关的bean --></span><span style="color:#E1E4E8">   </span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 配置模板解析器 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"templateResolver"</span></span>
<span class="line"><span style="color:#B392F0">		class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"prefix"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"/WEB-INF/templates/"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"suffix"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">".html"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#6A737D">		&#x3C;!-- templateMode指定Thymeleaf处理的模板类型 --></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"templateMode"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"HTML"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#6A737D">		&#x3C;!-- cacheable指定是否可以缓存模板页面内容</span></span>
<span class="line"><span style="color:#6A737D">			开发的时候设置为false，实际发布程序可以设置为true</span></span>
<span class="line"><span style="color:#6A737D">			设置true的话，页面被缓存，如果更改了页面内容，刷新页面不会改变</span></span>
<span class="line"><span style="color:#6A737D">			设置false的话，如果更改了页面内容，刷新页面内容会更改</span></span>
<span class="line"><span style="color:#6A737D">		 --></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"cacheable"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"false"</span><span style="color:#E1E4E8"> /> </span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"characterEncoding"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"UTF-8"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 配置模板引擎 --></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"templateEngine"</span></span>
<span class="line"><span style="color:#B392F0">		class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.thymeleaf.spring5.SpringTemplateEngine"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"templateResolver"</span><span style="color:#B392F0"> ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"templateResolver"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#6A737D">		&#x3C;!-- enableSpringELCompiler属性设置为true是为了提高性能 --></span></span>
<span class="line"><span style="color:#6A737D">		&#x3C;!-- 只有考虑向后兼容的时候才会设置为false --></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"enableSpringELCompiler"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"true"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 配置Thymeleaf视图解析器 --></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.thymeleaf.spring5.view.ThymeleafViewResolver"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"templateEngine"</span><span style="color:#B392F0"> ref</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"templateEngine"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">		&#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"characterEncoding"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"UTF-8"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 4. 处理静态资源 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">mvc:resources</span><span style="color:#B392F0"> mapping</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"/static/**"</span><span style="color:#B392F0"> location</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"/static/"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 5. 配置跳转到首页 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">mvc:view-controller</span><span style="color:#B392F0"> path</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"/"</span><span style="color:#B392F0"> view-name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"index"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">mvc:view-controller</span><span style="color:#B392F0"> path</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"/index"</span><span style="color:#B392F0"> view-name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"index"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">beans</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="如何配置spring-security">如何配置Spring Security？</h3>
<p>1.添加启动依赖</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">>org.springframework.boot&#x3C;/</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">>spring-boot-starter-security&#x3C;/</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>2.配置spring security</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Configuration</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">EnableWebSecurity</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> SpringSecurityConfig</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> WebSecurityConfigurerAdapter</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Bean</span></span>
<span class="line"><span style="color:#F97583">	public</span><span style="color:#E1E4E8"> BCryptPasswordEncoder </span><span style="color:#B392F0">passwordEncoder</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> BCryptPasswordEncoder</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">	//注入要使用的UserDetailsService对象</span></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Autowired</span></span>
<span class="line"><span style="color:#F97583">	private</span><span style="color:#E1E4E8"> CustomUserDetailsService userDetailsService;</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">	protected</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> configure</span><span style="color:#E1E4E8">(AuthenticationManagerBuilder </span><span style="color:#FFAB70">auth</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">throws</span><span style="color:#E1E4E8"> Exception {</span></span>
<span class="line"><span style="color:#6A737D">		//指定要使用UserDetailsService对象，从而实现从数据库加载用户信息(用户名、密码和角色/授权)</span></span>
<span class="line"><span style="color:#6A737D">		//并指定要使用的密码加密器</span></span>
<span class="line"><span style="color:#E1E4E8">		auth</span></span>
<span class="line"><span style="color:#E1E4E8">		   .</span><span style="color:#B392F0">userDetailsService</span><span style="color:#E1E4E8">(userDetailsService)</span></span>
<span class="line"><span style="color:#E1E4E8">		   .</span><span style="color:#B392F0">passwordEncoder</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">passwordEncoder</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">	public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> configure</span><span style="color:#E1E4E8">(WebSecurity </span><span style="color:#FFAB70">web</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">throws</span><span style="color:#E1E4E8"> Exception {</span></span>
<span class="line"><span style="color:#E1E4E8">		web.</span><span style="color:#B392F0">ignoring</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">antMatchers</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/css/**"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"/js/**"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"/img/**"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">	protected</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> configure</span><span style="color:#E1E4E8">(HttpSecurity </span><span style="color:#FFAB70">http</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">throws</span><span style="color:#E1E4E8"> Exception {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">		http.</span><span style="color:#B392F0">authorizeRequests</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">antMatchers</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"/index"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"/toLogin"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"/login_failed"</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">permitAll</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">antMatchers</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/user/**"</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">hasRole</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"user"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">antMatchers</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/admin/**"</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">hasAnyRole</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"admin"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"sadmin"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">antMatchers</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/sadmin/**"</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">hasRole</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"sadmin"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">anyRequest</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">authenticated</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">and</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">formLogin</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">loginPage</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/toLogin"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">failureUrl</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/login_failed"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">and</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">rememberMe</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">rememberMeCookieName</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"remember"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">rememberMeParameter</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"rememberMe"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">tokenValiditySeconds</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">7</span><span style="color:#F97583"> *</span><span style="color:#79B8FF"> 24</span><span style="color:#F97583"> *</span><span style="color:#79B8FF"> 60</span><span style="color:#F97583"> *</span><span style="color:#79B8FF"> 60</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">and</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">httpBasic</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">and</span><span style="color:#E1E4E8">()</span></span>
<span class="line"><span style="color:#E1E4E8">				.</span><span style="color:#B392F0">csrf</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">disable</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">				</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//		http.httpBasic();</span></span>
<span class="line"><span style="color:#6A737D">//		http.csrf().disable();</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>3.自定义security功能</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">//如果使用spring security验证用户，用户的信息来自数据库</span></span>
<span class="line"><span style="color:#6A737D">//可以创建一个UserDetailsService类来指定如何加载用户信息</span></span>
<span class="line"><span style="color:#6A737D">//需要将其注册为spring管理的bean，在需要的地方依赖注入即可</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Component</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> CustomUserDetailsService</span><span style="color:#F97583"> implements</span><span style="color:#B392F0"> UserDetailsService</span><span style="color:#E1E4E8">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Autowired</span></span>
<span class="line"><span style="color:#F97583">	private</span><span style="color:#E1E4E8"> UserInfoMapper mapper;</span></span>
<span class="line"><span style="color:#E1E4E8">	</span></span>
<span class="line"><span style="color:#6A737D">	//loadUserByUsername()方法中查询用户信息，封装成验证要用的用户信息</span></span>
<span class="line"><span style="color:#E1E4E8">	@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">	public</span><span style="color:#E1E4E8"> UserDetails </span><span style="color:#B392F0">loadUserByUsername</span><span style="color:#E1E4E8">(String </span><span style="color:#FFAB70">username</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">throws</span><span style="color:#E1E4E8"> UsernameNotFoundException {</span></span>
<span class="line"><span style="color:#6A737D">		//如果需要spring security进行用户的验证和授权</span></span>
<span class="line"><span style="color:#6A737D">		//spring security需要知道用户的用户名、密码和角色</span></span>
<span class="line"><span style="color:#6A737D">		//这里根据传入的用户名（直接使用即可，会帮你传入输入的用户名)</span></span>
<span class="line"><span style="color:#6A737D">		//根据用户名查询用户的信息，主要是为了获取密码</span></span>
<span class="line"><span style="color:#E1E4E8">		UserInfo userinfo</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">mapper.</span><span style="color:#B392F0">selectByPrimaryKey</span><span style="color:#E1E4E8">(username);</span></span>
<span class="line"><span style="color:#E1E4E8">		</span></span>
<span class="line"><span style="color:#6A737D">		//如果查不到该用户，抛出一个用户名找不到异常</span></span>
<span class="line"><span style="color:#F97583">		if</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">null</span><span style="color:#F97583">==</span><span style="color:#E1E4E8">userinfo)</span></span>
<span class="line"><span style="color:#F97583">			throw</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> UsernameNotFoundException</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"无此用户"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">		</span></span>
<span class="line"><span style="color:#6A737D">		//根据用户名查询用户所属的角色列表</span></span>
<span class="line"><span style="color:#E1E4E8">		List&#x3C;</span><span style="color:#F97583">String</span><span style="color:#E1E4E8">> roles</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">mapper.</span><span style="color:#B392F0">selectRoleNamesById</span><span style="color:#E1E4E8">(username);</span></span>
<span class="line"><span style="color:#E1E4E8">		</span></span>
<span class="line"><span style="color:#6A737D">		//用户角色列表需要封装成一个List&#x3C;GrantedAuthority>列表</span></span>
<span class="line"><span style="color:#E1E4E8">		List&#x3C;</span><span style="color:#F97583">GrantedAuthority</span><span style="color:#E1E4E8">> authorities</span><span style="color:#F97583">=new</span><span style="color:#E1E4E8"> ArrayList&#x3C;>();</span></span>
<span class="line"><span style="color:#6A737D">		//遍历每个角色名称，将每个角色名称封装成一个GrantedAuthority对象</span></span>
<span class="line"><span style="color:#6A737D">		//添加到列表中，表示对用户的一项授权，如果多个角色，则有多项授权</span></span>
<span class="line"><span style="color:#F97583">		for</span><span style="color:#E1E4E8">(String role</span><span style="color:#F97583">:</span><span style="color:#E1E4E8">roles) {</span></span>
<span class="line"><span style="color:#6A737D">			//角色名必须要添加ROLE_前缀，这是spring security的工作机制决定的</span></span>
<span class="line"><span style="color:#E1E4E8">			authorities.</span><span style="color:#B392F0">add</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">new</span><span style="color:#B392F0"> SimpleGrantedAuthority</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"ROLE_"</span><span style="color:#F97583">+</span><span style="color:#E1E4E8">role));</span></span>
<span class="line"><span style="color:#E1E4E8">		}</span></span>
<span class="line"><span style="color:#6A737D">		//最终要返回一个UserDetails对象，封装了验证和授权用的用户名、密码和授权信息</span></span>
<span class="line"><span style="color:#6A737D">		//UserDetails是一个接口，可以使用其实现类User</span></span>
<span class="line"><span style="color:#F97583">		return</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> User</span><span style="color:#E1E4E8">(userinfo.</span><span style="color:#B392F0">getUid</span><span style="color:#E1E4E8">(),userinfo.</span><span style="color:#B392F0">getUpassword</span><span style="color:#E1E4E8">(),authorities);</span></span>
<span class="line"><span style="color:#E1E4E8">	}</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="spring-mvc-12问">spring MVC 12问</h2>
<h3 id="mvc模式的概念">MVC模式的概念？</h3>
<p>MVC 设计模式一般指 MVC 框架，M（Model）指数据模型层，V（View）指视图层，C（Controller）指控制层。使用 MVC 的目的是将 M 和 V 的实现代码分离，使同一个程序可以有不同的表现形式。其中，View 的定义比较清晰，就是用户界面。</p>
<h3 id="spring-mvc包含的组件及其作用">Spring MVC包含的组件及其作用？</h3>
<h4 id="1dispatcherservlet">1）DispatcherServlet</h4>
<p>DispatcherServlet 是前端控制器，从图 1 可以看出，Spring MVC 的所有请求都要经过 DispatcherServlet 来统一分发。DispatcherServlet 相当于一个转发器或中央处理器，控制整个流程的执行，对各个组件进行统一调度，以降低组件之间的耦合性，有利于组件之间的拓展。</p>
<h4 id="2handlermapping">2）HandlerMapping</h4>
<p>HandlerMapping 是处理器映射器，其作用是根据请求的 URL 路径，通过注解或者 XML 配置，寻找匹配的处理器（Handler）信息。</p>
<h4 id="3handleradapter">3）HandlerAdapter</h4>
<p>HandlerAdapter 是处理器适配器，其作用是根据映射器找到的处理器（Handler）信息，按照特定规则执行相关的处理器（Handler）。</p>
<h4 id="4handler">4）Handler</h4>
<p>Handler 是处理器，和 Java Servlet 扮演的角色一致。其作用是执行相关的请求处理逻辑，并返回相应的数据和视图信息，将其封装至 ModelAndView 对象中。</p>
<h4 id="5view-resolver">5）View Resolver</h4>
<p>View Resolver 是视图解析器，其作用是进行解析操作，通过 ModelAndView 对象中的 View 信息将逻辑视图名解析成真正的视图 View（如通过一个 JSP 路径返回一个真正的 JSP 页面）。</p>
<h4 id="6view">6）View</h4>
<p>View 是视图，其本身是一个接口，实现类支持不同的 View 类型（JSP、FreeMarker、Excel 等）。</p>
<p>以上组件中，需要开发人员进行开发的是处理器（Handler，常称Controller）和视图（View）。通俗的说，要开发处理该请求的具体代码逻辑，以及最终展示给用户的界面。</p>
<h3 id="spring-mvc处理请求的过程">Spring MVC处理请求的过程？</h3>
<p><img alt="Spring MVC执行流程" loading="lazy" decoding="async" fetchpriority="auto" width="776" height="605" src="/_astro/1139441444-0.xse6P8A7_2dKW4f.webp" ></p>
<p>SpringMVC 的执行流程如下。</p>
<ol>
<li>用户点击某个请求路径，发起一个 HTTP request 请求，该请求会被提交到 DispatcherServlet（前端控制器）；</li>
<li>由 DispatcherServlet 请求一个或多个 HandlerMapping（处理器映射器），并返回一个执行链（HandlerExecutionChain）。</li>
<li>DispatcherServlet 将执行链返回的 Handler 信息发送给 HandlerAdapter（处理器适配器）；</li>
<li>HandlerAdapter 根据 Handler 信息找到并执行相应的 Handler（常称为 Controller）；</li>
<li>Handler 执行完毕后会返回给 HandlerAdapter 一个 ModelAndView 对象（Spring MVC的底层对象，包括 Model 数据模型和 View 视图信息）；</li>
<li>HandlerAdapter 接收到 ModelAndView 对象后，将其返回给 DispatcherServlet ；</li>
<li>DispatcherServlet 接收到 ModelAndView 对象后，会请求 ViewResolver（视图解析器）对视图进行解析；</li>
<li>ViewResolver 根据 View 信息匹配到相应的视图结果，并返回给 DispatcherServlet；</li>
<li>DispatcherServlet 接收到具体的 View 视图后，进行视图渲染，将 Model 中的模型数据填充到 View 视图中的 request 域，生成最终的 View（视图）；</li>
<li>视图负责将结果显示到浏览器（客户端）。</li>
</ol>
<h3 id="servlet合法的url模式">servlet合法的URL模式？</h3>
<p>servlet的url模式合法的写法有：</p>
<ul>
<li>精准匹配
<ul>
<li>./index.jsp</li>
</ul>
</li>
<li>扩展名匹配
<ul>
<li><code>*.xxx</code> 匹配以xxx结尾的请求url</li>
</ul>
</li>
<li>路径匹配
<ul>
<li><code>/xxx/*</code> 用于匹配路径包含xxx的所有请求，xxx可以是一级或者多级</li>
<li><code>/*</code> 匹配以/开头，任意结尾的请求url。</li>
</ul>
</li>
<li>缺省匹配
<ul>
<li><code>/</code> 匹配除JSP之外的所有请求</li>
</ul>
</li>
</ul>
<h3 id="如何配置dispatcherservlet">如何配置DispatcherServlet？</h3>
<p>xml配置</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!--web.xml--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">web-app</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">listener</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">listener-class</span><span style="color:#E1E4E8">>org.springframework.web.context.ContextLoaderListener&#x3C;/</span><span style="color:#85E89D">listener-class</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">listener</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--  如果不指定&#x3C;context-param>, 将会默认加载/WEB-INF/applicationContext.xml文件.--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">context-param</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">param-name</span><span style="color:#E1E4E8">>contextConfigLocation&#x3C;/</span><span style="color:#85E89D">param-name</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">param-value</span><span style="color:#E1E4E8">>/WEB-INF/app-context.xml&#x3C;/</span><span style="color:#85E89D">param-value</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">context-param</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">servlet</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">servlet-name</span><span style="color:#E1E4E8">>app&#x3C;/</span><span style="color:#85E89D">servlet-name</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">servlet-class</span><span style="color:#E1E4E8">>org.springframework.web.servlet.DispatcherServlet&#x3C;/</span><span style="color:#85E89D">servlet-class</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">init-param</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">param-name</span><span style="color:#E1E4E8">>contextConfigLocation&#x3C;/</span><span style="color:#85E89D">param-name</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">param-value</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">param-value</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;/</span><span style="color:#85E89D">init-param</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">load-on-startup</span><span style="color:#E1E4E8">>1&#x3C;/</span><span style="color:#85E89D">load-on-startup</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">servlet</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">servlet-mapping</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">servlet-name</span><span style="color:#E1E4E8">>app&#x3C;/</span><span style="color:#85E89D">servlet-name</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">url-pattern</span><span style="color:#E1E4E8">>/app/*&#x3C;/</span><span style="color:#85E89D">url-pattern</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">servlet-mapping</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">web-app</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>Java配置:实现WebApplicationInitializer接口</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> MyWebApplicationInitializer</span><span style="color:#F97583"> implements</span><span style="color:#B392F0"> WebApplicationInitializer</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> onStartup</span><span style="color:#E1E4E8">(ServletContext </span><span style="color:#FFAB70">servletCxt</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">        // 加载spring 容器</span></span>
<span class="line"><span style="color:#E1E4E8">        AnnotationConfigWebApplicationContext ac </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> AnnotationConfigWebApplicationContext</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">        ac.</span><span style="color:#B392F0">register</span><span style="color:#E1E4E8">(AppConfig.class);</span></span>
<span class="line"><span style="color:#E1E4E8">        ac.</span><span style="color:#B392F0">refresh</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">        // 创建并注册DispatcherServlet</span></span>
<span class="line"><span style="color:#E1E4E8">        DispatcherServlet servlet </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> DispatcherServlet</span><span style="color:#E1E4E8">(ac);</span></span>
<span class="line"><span style="color:#E1E4E8">        ServletRegistration.Dynamic registration </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> servletCxt.</span><span style="color:#B392F0">addServlet</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"app"</span><span style="color:#E1E4E8">, servlet);</span></span>
<span class="line"><span style="color:#E1E4E8">        registration.</span><span style="color:#B392F0">setLoadOnStartup</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">        registration.</span><span style="color:#B392F0">addMapping</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/app/*"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="如何配置spring-mvc配置文件的位置">如何配置Spring MVC配置文件的位置？</h3>
<p>Spring MVC 配置：在 web.xml 中配置 Servlet，创建 Spring MVC 的配置文件</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!-- 配置 SpringMVC 的前端控制器，对浏览器发送的请求统一进行处理 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">servlet</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">servlet-name</span><span style="color:#E1E4E8">>dispatcherServlet&#x3C;/</span><span style="color:#85E89D">servlet-name</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">servlet-class</span><span style="color:#E1E4E8">>org.springframework.web.servlet.DispatcherServlet&#x3C;/</span><span style="color:#85E89D">servlet-class</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!--配置 DispatcherServlet 的一个初始化参数：spring mvc 配置文件按的位置和名称--></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">init-param</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">param-name</span><span style="color:#E1E4E8">>contextConfigLocation&#x3C;/</span><span style="color:#85E89D">param-name</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">param-value</span><span style="color:#E1E4E8">>classpath:springMVC.xml&#x3C;/</span><span style="color:#85E89D">param-value</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;/</span><span style="color:#85E89D">init-param</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!--作为框架的核心组件，在启动过程中有大量的初始化操作要做</span></span>
<span class="line"><span style="color:#6A737D">            而这些操作放在第一次请求时才执行会严重影响访问速度</span></span>
<span class="line"><span style="color:#6A737D">            因此需要通过此标签将启动控制DispatcherServlet的初始化时间提前到服务器启动时--></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">load-on-startup</span><span style="color:#E1E4E8">>1&#x3C;/</span><span style="color:#85E89D">load-on-startup</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">servlet</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="spring和spring-mvc配置文件的默认名称">Spring和Spring MVC配置文件的默认名称？</h3>
<p>springMVC配置文件默认名称：<code>&#x3C;servlet-name>-servlet.xml</code>
servlet-name是在web.xml<code>&#x3C;servlet></code>标签中定义的
spring配置文件名称：<code>applicationContext.xml</code></p>
<h3 id="如何配置视图解析器">如何配置视图解析器？</h3>
<p>in *-.servlet</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;?</span><span style="color:#85E89D">xml</span><span style="color:#B392F0"> version</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"1.0"</span><span style="color:#B392F0"> encoding</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"UTF-8"</span><span style="color:#E1E4E8">?></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">beans</span><span style="color:#B392F0"> xmlns</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.springframework.org/schema/beans"</span></span>
<span class="line"><span style="color:#B392F0">       xmlns:xsi</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.w3.org/2001/XMLSchema-instance"</span></span>
<span class="line"><span style="color:#B392F0">       xmlns:context</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.springframework.org/schema/context"</span></span>
<span class="line"><span style="color:#B392F0">       xsi:schemaLocation</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"http://www.springframework.org/schema/beans</span></span>
<span class="line"><span style="color:#9ECBFF">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span>
<span class="line"><span style="color:#9ECBFF">       http://www.springframework.org/schema/context</span></span>
<span class="line"><span style="color:#9ECBFF">       https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd"</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--开启组件扫描--></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">context:component-scan</span><span style="color:#B392F0"> base-package</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">""</span><span style="color:#E1E4E8">/></span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 配置 Thymeleaf 视图解析器 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"viewResolver"</span></span>
<span class="line"><span style="color:#B392F0">          class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.thymeleaf.spring5.view.ThymeleafViewResolver"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"order"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"1"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"characterEncoding"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"UTF-8"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"templateEngine"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.thymeleaf.spring5.SpringTemplateEngine"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"templateResolver"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                    &#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">                        &#x3C;!-- 视图前缀 --></span></span>
<span class="line"><span style="color:#E1E4E8">                        &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"prefix"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"/WEB-INF/templates/"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#6A737D">                        &#x3C;!-- 视图后缀 --></span></span>
<span class="line"><span style="color:#E1E4E8">                        &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"suffix"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">".html"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">                        &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"templateMode"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"HTML5"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">                        &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"characterEncoding"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"UTF-8"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#E1E4E8">                    &#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">                &#x3C;/</span><span style="color:#85E89D">property</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;/</span><span style="color:#85E89D">property</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">beans</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>视图解析器（ViewResolver）是 Spring MVC 的重要组成部分，负责将逻辑视图名解析为具体的视图对象。</p>
<p>Spring MVC 提供了很多视图解析类，其中每一项都对应 Java Web 应用中特定的某些视图技术。下面介绍一些常用的视图解析类。</p>
<h4 id="urlbasedviewresolver">URLBasedViewResolver</h4>
<p>UrlBasedViewResolver 是对 ViewResolver 的一种简单实现，主要提供了一种拼接 URL 的方式来解析视图。</p>
<p>UrlBasedViewResolver 通过 prefix 属性指定前缀，suffix 属性指定后缀。当 ModelAndView 对象返回具体的 View 名称时，它会将前缀 prefix 和后缀 suffix 与具体的视图名称拼接，得到一个视图资源文件的具体加载路径，从而加载真正的视图文件并反馈给用户。</p>
<p>使用 UrlBasedViewResolver 除了要配置前缀和后缀属性之外，还需要配置“viewClass”，表示解析成哪种视图。示例代码如下</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"viewResolver"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.springframework.web.servlet.view.UrlBasedViewResolver"</span><span style="color:#E1E4E8">>            </span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"viewClass"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span style="color:#E1E4E8">/> </span><span style="color:#6A737D">&#x3C;!--不能省略--></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--前缀--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"prefix"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"/WEB-INF/jsp/"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--后缀--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"suffix"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">".jsp"</span><span style="color:#E1E4E8">/>  </span></span>
<span class="line"><span style="color:#E1E4E8"> &#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span></code></pre>
<h4 id="internalresourceviewresolver">InternalResourceViewResolver</h4>
<p>InternalResourceViewResolver 为“内部资源视图解析器”，是日常开发中最常用的视图解析器类型。它是 URLBasedViewResolver 的子类，拥有 URLBasedViewResolver 的一切特性。</p>
<p>InternalResourceViewResolver 能自动将返回的视图名称解析为 InternalResourceView 类型的对象。InternalResourceView 会把 Controller 处理器方法返回的模型属性都存放到对应的 request 属性中，然后通过 RequestDispatcher 在服务器端把请求 forword 重定向到目标 URL。也就是说，使用 InternalResourceViewResolver 视图解析时，无需再单独指定 viewClass 属性。示例代码如下。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">bean</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"viewResolver"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"viewClass"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span style="color:#E1E4E8">/> </span><span style="color:#6A737D">&#x3C;!--可以省略--></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--前缀--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"prefix"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"/WEB-INF/jsp/"</span><span style="color:#E1E4E8">/></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--后缀--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">property</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"suffix"</span><span style="color:#B392F0"> value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">".jsp"</span><span style="color:#E1E4E8">/>  </span></span>
<span class="line"><span style="color:#E1E4E8"> &#x3C;/</span><span style="color:#85E89D">bean</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="创建和使用控制器">创建和使用控制器？</h3>
<p>@Controller 注解用于声明某类的实例是一个控制器。例如，创建控制器类 IndexController，示例代码如下</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Controller</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> IndexController</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">    // 处理请求的方法</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>Spring MVC 使用扫描机制找到应用中所有基于注解的控制器类，所以，为了让控制器类被 Spring MVC 框架扫描到，需要在配置文件中声明 spring-context，并使用 <code>&#x3C;context:component-scan/></code> 元素指定控制器类的基本包（请确保所有控制器类都在基本包及其子包下）。</p>
<p>例如，在 springmvcDemo 应用的配置文件 springmvc-servlet.xml 中添加以下代码：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!-- 使用扫描机制扫描控制器类，控制器类都在net.biancheng.controller包及其子包下 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">context:component-scan</span><span style="color:#B392F0"> base-package</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"com.example.controller"</span><span style="color:#E1E4E8"> /></span></span></code></pre>
<h3 id="如何映射不同的请求">如何映射不同的请求？</h3>
<p>在基于注解的控制器类中可以为每个请求编写对应的处理方法。使用 @RequestMapping 注解将请求与处理方法一 一对应即可。</p>
<p>@RequestMapping 注解可用于类或方法上。用于类上，表示类中的所有响应请求的方法都以该地址作为父路径。</p>
<p>@RequestMapping 注解常用属性如下。</p>
<h4 id="1-value-属性">1. value 属性</h4>
<p>value 属性是 @RequestMapping 注解的默认属性，因此如果只有 value 属性时，可以省略该属性名，如果有其它属性，则必须写上 value 属性名称。如下。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">RequestMapping</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">value</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"toUser"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#6A737D">//or</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">RequestMapping</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"toUser"</span><span style="color:#E1E4E8">)</span></span></code></pre>
<p>value 属性支持通配符匹配，如 <code>@RequestMapping(value="toUser/*")</code> 表示 <a href="http://localhost:8080/toUser/1">http://localhost:8080/toUser/1</a> 或 <a href="http://localhost:8080/toUser/hahaha">http://localhost:8080/toUser/hahaha</a> 都能够正常访问。</p>
<h4 id="2-path属性">2. path属性</h4>
<p>path 属性和 value 属性都用来作为映射使用。即 <code>@RequestMapping(value="toUser")</code> 和 <code>@RequestMapping(path="toUser")</code> 都能访问 toUser() 方法。</p>
<p>path 属性支持通配符匹配，如 <code>@RequestMapping(path="toUser/*")</code> 表示 <a href="http://localhost:8080/toUser/1">http://localhost:8080/toUser/1</a> 或 <a href="http://localhost:8080/toUser/hahaha">http://localhost:8080/toUser/hahaha</a> 都能够正常访问。</p>
<h4 id="3-name属性">3. name属性</h4>
<p>name属性相当于方法的注释，使方法更易理解。如 <code>@RequestMapping(value = "toUser",name = "获取用户信息")</code>。</p>
<h4 id="4-method属性">4. method属性</h4>
<p>method 属性用于表示该方法支持哪些 HTTP 请求。如果省略 method 属性，则说明该方法支持全部的 HTTP 请求。</p>
<p><code>@RequestMapping(value = "toUser",method = RequestMethod.GET)</code>表示该方法只支持 GET 请求。</p>
<p>也可指定多个 HTTP 请求，如 <code>@RequestMapping(value = "toUser",method = {RequestMethod.GET,RequestMethod.POST})</code>，说明该方法同时支持 GET 和 POST 请求。</p>
<h4 id="5-params属性">5. params属性</h4>
<p>params 属性用于指定请求中规定的参数，代码如下。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">RequestMapping</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">value</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "toUser"</span><span style="color:#E1E4E8">,</span><span style="color:#79B8FF">params</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "type"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#E1E4E8"> String </span><span style="color:#B392F0">toUser</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#9ECBFF"> "showUser"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>以上代码表示请求中必须包含 type 参数时才能执行该请求。即 <a href="http://localhost:8080/toUser?type=xxx">http://localhost:8080/toUser?type=xxx</a> 能够正常访问 toUser() 方法，而 <a href="http://localhost:8080/toUser">http://localhost:8080/toUser</a> 则不能正常访问 toUser() 方法。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">RequestMapping</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">value</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "toUser"</span><span style="color:#E1E4E8">,</span><span style="color:#79B8FF">params</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "type=1"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#E1E4E8"> String </span><span style="color:#B392F0">toUser</span><span style="color:#E1E4E8">() {        </span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#9ECBFF"> "showUser"</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>以上代码表示请求中必须包含 type 参数，且 type 参数为 1 时才能够执行该请求。即 <a href="http://localhost:8080/toUser?type=1">http://localhost:8080/toUser?type=1</a> 能够正常访问 toUser() 方法，而 <a href="http://localhost:8080/toUser?type=2">http://localhost:8080/toUser?type=2</a> 则不能正常访问 toUser() 方法。</p>
<h4 id="6-header属性">6. header属性</h4>
<p>header 属性表示请求中必须包含某些指定的 header 值。</p>
<p><code>@RequestMapping(value = "toUser",headers = "Referer=http://www.xxx.com")</code> 表示请求的 header 中必须包含了指定的“Referer”请求头，以及值为“<a href="http://www.xxx.com%E2%80%9D%E6%97%B6%EF%BC%8C%E6%89%8D%E8%83%BD%E6%89%A7%E8%A1%8C%E8%AF%A5%E8%AF%B7%E6%B1%82%E3%80%82">http://www.xxx.com”时，才能执行该请求。</a></p>
<h4 id="7-consumers属性">7. consumers属性</h4>
<p>consumers 属性用于指定处理请求的提交内容类型（Content-Type），例如：application/json、text/html。如
<code>@RequestMapping(value = "toUser",consumes = "application/json")</code>。</p>
<h4 id="8-produces属性">8. produces属性</h4>
<p>produces 属性用于指定返回的内容类型，返回的内容类型必须是 request 请求头（Accept）中所包含的类型。如 @RequestMapping(value = “toUser”,produces = “application/json”)。</p>
<p>除此之外，produces 属性还可以指定返回值的编码。如 <code>@RequestMapping(value = "toUser",produces = "application/json,charset=utf-8")</code>，表示返回 utf-8 编码。</p>
<p>使用 @RequestMapping 来完成映射，具体包括 4 个方面的信息项：请求 URL、请求参数、请求方法和请求头。</p>
<h3 id="如何配置静态资源">如何配置静态资源？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">mvc:resources</span><span style="color:#B392F0"> mapping</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"/js/**"</span><span style="color:#B392F0"> location</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"/js/"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">mvc:resources</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">mvc:resources</span><span style="color:#B392F0"> mapping</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"/css/**"</span><span style="color:#B392F0"> location</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"/css/"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">mvc:resources</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">	&#x3C;</span><span style="color:#85E89D">mvc:resources</span><span style="color:#B392F0"> mapping</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"/img/**"</span><span style="color:#B392F0"> location</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"/img/"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">mvc:resources</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">	&#x3C;!-- 在配置了mvc:resources标签之后必须配置mvc:annotation-driven标签静态资源</span></span>
<span class="line"><span style="color:#6A737D">	才可以访问，否则不仅静态资源不能访问，其他的所有请求也都无法正常处理了 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">mvc:annotation-driven</span><span style="color:#E1E4E8">/></span></span></code></pre>
<h3 id="如何构建restful-api">如何构建Restful API？</h3>
<p>REST（Representational State Transfer）即表述性转移，是目前最流行的一种软件架构风格。它结构清晰、易于理解、有较好的扩展性。</p>
<p>Spring REST 风格可以简单理解为：使用 URL 表示资源时，每个资源都用一个独一无二的 URL 来表示，并使用 HTTP 方法表示操作，即准确描述服务器对资源的处理动作（GET、POST、PUT、DELETE），实现资源的增删改查。</p>
<ul>
<li>GET：表示获取资源</li>
<li>POST：表示新建资源</li>
<li>PUT：表示更新资源</li>
<li>DELETE：表示删除资源</li>
</ul>
<h1 id="spring-boot-65问">Spring Boot 65问</h1>
<h2 id="框架22问">框架22问</h2>
<h3 id="启动依赖是什么">启动依赖是什么？</h3>
<p>Spring Boot就可以指定基于功能依赖。Spring Boot通过起步依赖为项目的依赖管理提供帮助。如果应用程序是Web应用程序（功能），不需要向项目pom.xml文件中添加一堆单独的依赖，可以直接向项目中添加Web起步依赖。如果应用程序需要用到JPA持久化（功能），加入jpa起步依赖；如果需要安全功能（功能），就加入security起步依赖。添加依赖时不需要指定依赖的版本号，依赖的版本号由当前是使用的Spring Boot版本号来决定。</p>
<p>起步依赖就是特殊的Maven依赖，利用了传递依赖解析，把常用库聚合在一起，组成几个为特定功能而定制的依赖。Spring Boot通过起步依赖：直接引入相关起步依赖就行，我们不需要考虑支持某种功能需要什么库， 减少了依赖数量，而且不需要考虑这些库的那些版本。如果我们需要什么功能，就往项目中加入该功能的起步依赖就好了。</p>
<h3 id="actuator的作用">Actuator的作用？</h3>
<p>Actuator用于监视和管理应用程序</p>
<p>监控的内容：</p>
<ul>
<li>Spring应用程序上下文中配置的Bean</li>
<li>Spring Boot的自动配置做的决策</li>
<li>应用程序可用的环境变量、系统属性、配置属性和命令行参数等</li>
<li>应用程序里线程的当前状态</li>
<li>应用程序最近处理的HTTP请求的追踪情况</li>
<li>各种和内存使用、垃圾回收、Web请求等相关的指标</li>
</ul>
<h3 id="spring-boot-配置依赖">Spring Boot 配置依赖？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">   &#x3C;</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">>org.springframework.boot&#x3C;/</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">   &#x3C;</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">>spring-boot-starter-actuator&#x3C;/</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="如何修饰启动类">如何修饰启动类？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!--排除依赖--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">>org.springframework.boot&#x3C;/</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">>spring-boot-starter-web&#x3C;/</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">> </span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">exclusions</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">exclusion</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">>com.fasterxml.jackson.core&#x3C;/</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;/</span><span style="color:#85E89D">exclusion</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">exclusions</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#6A737D">&#x3C;!--用指定依赖版本 覆盖 传递依赖--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">>com.fasterxml.jackson.core&#x3C;/</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">>jackson-databind&#x3C;/</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">version</span><span style="color:#E1E4E8">>2.4.3&#x3C;/</span><span style="color:#85E89D">version</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="springbootapplication是哪三合一">@SpringBootApplication是哪三合一？</h3>
<p>@SpringBootApplication = (默认属性)@Configuration + @EnableAutoConfiguration + @ComponentScan。</p>
<p>@Configuration：建一个简单的spring配置类，可以用来替代相应的xml配置文件，见词条 @Configuration和@Bean注解的作用</p>
<p>@EnableAutoConfiguration：能够自动配置spring的上下文，试图猜测和配置你想要的bean类，通常会自动根据你的类路径和你的bean定义自动配置</p>
<p>@ComponentScan：会自动扫描指定包下的全部标有@Component的类，并注册成bean，当然包括@Component下的子注解@Service,@Repository,@Controller</p>
<h3 id="如何排除指定的自动配置">如何排除指定的自动配置？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">SpringBootApplication</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">exclude</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{RedisAutoConfiguration.class})</span></span></code></pre>
<h3 id="一个启动类能否同时作为控制器类">一个启动类能否同时作为控制器类？</h3>
<p>能</p>
<h3 id="如何自定义banner">如何自定义banner？</h3>
<p>将<code>banner.txt</code>（或<code>banner,jpg</code>）放入<code>src/main/resources</code></p>
<h3 id="springboot如何实现自动配置">SpringBoot如何实现自动配置？</h3>
<p>加载spring.factories</p>
<h3 id="springboot如何配置视图解析器">SpringBoot如何配置视图解析器？</h3>
<p><strong>配置文件</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="properties"><code><span class="line"><span style="color:#F97583">spring.mvc.view.prefix</span><span style="color:#E1E4E8">=/pages/</span></span>
<span class="line"><span style="color:#F97583">spring.mvc.view.suffix</span><span style="color:#E1E4E8">=.html</span></span></code></pre>
<p>或</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#85E89D">spring</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  mvc</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    view</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      prefix</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">/pages/</span></span>
<span class="line"><span style="color:#85E89D">      suffix</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">.html</span></span></code></pre>
<p><strong>配置类</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Configuration</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> MvcConfig</span><span style="color:#F97583"> implements</span><span style="color:#B392F0"> WebMvcConfigurer</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">Bean</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#E1E4E8"> InternalResourceViewResolver </span><span style="color:#B392F0">configureInternalResourceViewResolver</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">        InternalResourceViewResolver resolver </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> InternalResourceViewResolver</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">        resolver.</span><span style="color:#B392F0">setPrefix</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/pages/"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">        resolver.</span><span style="color:#B392F0">setSuffix</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">".html"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> resolver;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="如何配置端口号">如何配置端口号？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="properties"><code><span class="line"><span style="color:#F97583">server.port</span><span style="color:#E1E4E8">=8081</span></span></code></pre>
<p>或</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#85E89D">server</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    port</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">8081</span></span></code></pre>
<h3 id="properties与yml的异同">properties与yml的异同？</h3>
<p><mark>properties的优先级会高于yml</mark></p>
<p>yml采用树形结构，更有层次感，可读性很强；相反，properties 则更为直接</p>
<p>properties 的基本语法格式是“key=value”的形式；yml 的基本语法格式是“key: value”的形式,冒号后面需要加空格</p>
<h3 id="静态资源默认位置在哪">静态资源默认位置在哪？</h3>
<p>classpath:/META-INF/resources/</p>
<p>classpath:/resources/</p>
<p>classpath:/static/</p>
<p>classpath:/public/</p>
<h3 id="如何自定义静态资源的位置">如何自定义静态资源的位置？</h3>
<p><strong>在配置文件中配置</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="properties"><code><span class="line"><span style="color:#6A737D">#静态资源访问路径</span></span>
<span class="line"><span style="color:#F97583">spring.mvc.static-path-pattern</span><span style="color:#E1E4E8">=/upload/**</span></span>
<span class="line"><span style="color:#6A737D">#静态资源映射路径</span></span>
<span class="line"><span style="color:#F97583">spring.resources.static-locations</span><span style="color:#E1E4E8">=classpath:/upload/</span></span></code></pre>
<p><strong>配置类</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Configuration</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> MvcConfig</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> WebMvcConfigurerAdapter</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> addResourceHandlers</span><span style="color:#E1E4E8">(ResourceHandlerRegistry </span><span style="color:#FFAB70">registry</span><span style="color:#E1E4E8">) {　　　　　</span><span style="color:#6A737D">// 这里之所以多了一"/",是为了解决打war时访问不到问题</span></span>
<span class="line"><span style="color:#E1E4E8">        registry.</span><span style="color:#B392F0">addResourceHandler</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/**"</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">addResourceLocations</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"/"</span><span style="color:#E1E4E8">,</span><span style="color:#9ECBFF">"classpath:/"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="有哪些常用的json解析器">有哪些常用的JSON解析器？</h3>
<p>1）json-lib</p>
<p>json-lib 最早也是应用广泛的 JSON 解析工具，缺点是依赖很多的第三方包</p>
<p>对于复杂类型的转换，json-lib 在将 JSON 转换成 Bean 时还有缺陷，比如一个类里包含另一个类的 List 或者 Map 集合，json-lib 从 JSON 到 Bean 的转换就会出现问题。</p>
<h4 id="2开源的jackson">2）开源的Jackson</h4>
<p>开源的 Jackson 是 Spring MVC 内置的 JSON 转换工具。</p>
<p>但是 Jackson 对于复杂类型的 JSON 转换 Bean 会出现问题</p>
<h4 id="3google的gson">3）Google的Gson</h4>
<p>Gson 是目前功能最全的 JSON 解析神器</p>
<p>Gson 完全可以将复杂类型的 JSON 到 Bean 或 Bean 到 JSON 的转换，是 JSON 解析的神器。Gson 在功能上面无可挑剔，但性能比 FastJson 有所差距。</p>
<h4 id="4阿里巴巴的fastjson">4）阿里巴巴的FastJson</h4>
<p>FastJson 是用 Java 语言编写的高性能 JSON 处理器，由阿里巴巴公司开发。</p>
<p>FastJson 在复杂类型的 Bean 转换 JSON 上会出现一些问题，可能会出现引用的类型，导致 JSON 转换出错，需要制定引用。</p>
<h3 id="为哪些json解析器提供了自动配置">为哪些JSON解析器提供了自动配置？</h3>
<p>Gson 、Jackson 、JSON-B</p>
<h3 id="如何使用fastjson">如何使用fastjson？</h3>
<p>导入依赖</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">>com.alibaba&#x3C;/</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">>fastjson&#x3C;/</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">version</span><span style="color:#E1E4E8">>1.2.15&#x3C;/</span><span style="color:#85E89D">version</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>在springMVC的配置类中配置JSON解析器为fastJSON</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">//通过配置HttpMessageConverter来配置使用的JSON处理器</span></span>
<span class="line"><span style="color:#6A737D">//每个JSON处理器都有对应的消息转换器实现类，用于实现java对象和json对象的转换</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> configureMessageConverters</span><span style="color:#E1E4E8">(List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">HttpMessageConverter</span><span style="color:#F97583">&#x3C;?>></span><span style="color:#E1E4E8"> converters) {</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#E1E4E8">    FastJsonHttpMessageConverter converter</span><span style="color:#F97583">=new</span><span style="color:#B392F0"> FastJsonHttpMessageConverter</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#6A737D">    //设置转换器的字符集编码，解决中文乱码</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#E1E4E8">    converter.</span><span style="color:#B392F0">setDefaultCharset</span><span style="color:#E1E4E8">(Charset.</span><span style="color:#B392F0">forName</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"UTF-8"</span><span style="color:#E1E4E8">));</span></span>
<span class="line"><span style="color:#6A737D">    //因为spring boot没有提供fastjson的集成和自动配置，所以不能在application.properties</span></span>
<span class="line"><span style="color:#6A737D">    //中配置fastjson的属性</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    //创建一个FastJsonConfig对象，定制fastjson的配置</span></span>
<span class="line"><span style="color:#E1E4E8">    FastJsonConfig config</span><span style="color:#F97583">=new</span><span style="color:#B392F0"> FastJsonConfig</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">    config.</span><span style="color:#B392F0">setDateFormat</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"yyyy-MM-dd"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#6A737D">    //setSerializerFeatures()用于指定序列化后json数据的特征</span></span>
<span class="line"><span style="color:#6A737D">    //WriteMapNullValue: 是否输出值为null的字段,默认为false  </span></span>
<span class="line"><span style="color:#6A737D">    //WriteNullStringAsEmpty: null字符串是否显示为空字符串，而不是null</span></span>
<span class="line"><span style="color:#6A737D">    //WriteNullNumberAsZero: 是否将null的数值显示为0，而不是null</span></span>
<span class="line"><span style="color:#6A737D">    //WriteNullListAsEmpty: 是否将null的List显示为[]，而不是null</span></span>
<span class="line"><span style="color:#6A737D">    //DisableCircularReferenceDetect: 禁用对同一个对象的循环引用，如果使用Hibernate等框架映射了关系，可能会出现循环引用 </span></span>
<span class="line"><span style="color:#E1E4E8">    config.</span><span style="color:#B392F0">setSerializerFeatures</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#E1E4E8">            SerializerFeature.WriteMapNullValue,</span></span>
<span class="line"><span style="color:#E1E4E8">            SerializerFeature.WriteNullStringAsEmpty,</span></span>
<span class="line"><span style="color:#E1E4E8">            SerializerFeature.WriteNullNumberAsZero,</span></span>
<span class="line"><span style="color:#E1E4E8">            SerializerFeature.WriteNullListAsEmpty,</span></span>
<span class="line"><span style="color:#E1E4E8">            SerializerFeature.DisableCircularReferenceDetect</span></span>
<span class="line"><span style="color:#E1E4E8">            );</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#6A737D">    //应用fastjson配置</span></span>
<span class="line"><span style="color:#E1E4E8">    converter.</span><span style="color:#B392F0">setFastJsonConfig</span><span style="color:#E1E4E8">(config);</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#E1E4E8">    converters.</span><span style="color:#B392F0">add</span><span style="color:#E1E4E8">(converter);</span></span>
<span class="line"><span style="color:#E1E4E8">    </span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8">(HttpMessageConverter c</span><span style="color:#F97583">:</span><span style="color:#E1E4E8">converters)</span></span>
<span class="line"><span style="color:#E1E4E8">        System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(c.</span><span style="color:#B392F0">getClass</span><span style="color:#E1E4E8">()); </span><span style="color:#6A737D">//打印一下转换器的类型</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>直接用。。。</p>
<h3 id="如何自定义错误界面的位置">如何自定义错误界面的位置？</h3>
<p><strong>静态</strong></p>
<p>在 resource/static 目录下创建 error 目录，然后在 error 目录中创建错误展示页面。错误展示页面命名规则有如下两种：</p>
<p>一种是直接使用具体的响应码命名文件，比如：404.html、405.html、500.html
另一种可以使用 4xx.html、5xx.html 这样的命名</p>
<p><strong>动态</strong></p>
<p>在 resource/templates 目录下创建 error 目录，然后在 error 目录中创建错误展示页面。</p>
<h3 id="错误界面使用的顺序如何">错误界面使用的顺序如何？</h3>
<p>优先级：</p>
<p>动态错误码>静态错误码>动态模糊错误码>静态模糊错误码</p>
<p>找到一个后便不往下寻找</p>
<h3 id="如何定义局部异常handler">如何定义局部异常handler？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">ExceptionHandler</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">value</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {java.lang.ArithmeticException.class})</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#E1E4E8"> ModelAndView </span><span style="color:#B392F0">arithmeticExceptionHandler</span><span style="color:#E1E4E8">(Exception e){</span></span>
<span class="line"><span style="color:#E1E4E8">    ModelAndView mv </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> ModelAndView</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">    mv.</span><span style="color:#B392F0">addObject</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"errorMsg"</span><span style="color:#E1E4E8">,e);</span></span>
<span class="line"><span style="color:#E1E4E8">    mv.</span><span style="color:#B392F0">setViewName</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"error"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> mv;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="如何定义全局异常handler">如何定义全局异常handler？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>//创建一个全局异常处理程序</span></span>
<span class="line"><span>//全局异常处理程序所在的类使用@ControllerAdvice或@RestControllerAdvice注解修饰</span></span>
<span class="line"><span>//@ControllerAdvice注解作用很多，其中一个作用是修饰全局异常处理程序所在的类</span></span>
<span class="line"><span>@ControllerAdvice</span></span>
<span class="line"><span>public class GlobalExceptionHandler {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	@ExceptionHandler({ ArithmeticException.class })</span></span>
<span class="line"><span>	public String handleException(Exception ex, Model model) {</span></span>
<span class="line"><span>		// 在此收集异常信息，比如将异常信息写入日志等</span></span>
<span class="line"><span>		model.addAttribute("msg", "全局异常处理程序，异常消息："+ex.getMessage());</span></span>
<span class="line"><span>		return "err"; // 处理完异常，可以跳转到指定的页面/视图</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>	</span></span>
<span class="line"><span>	//异常处理程序对应的方法前可以使用@ResponseBody注解，将返回值作为响应内容返回</span></span>
<span class="line"><span>	@ExceptionHandler({ArrayIndexOutOfBoundsException.class})</span></span>
<span class="line"><span>	@ResponseBody</span></span>
<span class="line"><span>	public Map&#x3C;String,Object> handleException2(Exception e) {</span></span>
<span class="line"><span>		Map&#x3C;String,Object> map=new HashMap&#x3C;>();</span></span>
<span class="line"><span>		map.put("status", 500);</span></span>
<span class="line"><span>		map.put("msg", "数组索引出界，索引： "+e.getMessage());</span></span>
<span class="line"><span>		map.put("reason", "索引值超出数组长度");</span></span>
<span class="line"><span>		return map;</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre>
<h3 id="如何使用restcontroller">如何使用RestController？</h3>
<p>如果在类上加上@RestController，该类中的所有SpringMVCUrl接口映射都是返回json格式</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">RestController</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> hello</span><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#6A737D">  //something</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="thymeleaf-11问">Thymeleaf 11问</h2>
<h3 id="thymeleaf如何使用变量表达式页面获取不同范围的属性">Thymeleaf如何使用变量表达式页面获取不同范围的属性？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">变量表达式${.....}</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--  能够直接获取model的属性值--></span></span>
<span class="line"><span style="color:#E1E4E8">  user1属性值：</span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${user1.id}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">> |</span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${user1.password}"</span><span style="color:#E1E4E8"> >&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">> |</span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${user1.gender}"</span><span style="color:#E1E4E8"> >&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  user2属性值：</span></span>
<span class="line"><span style="color:#6A737D">  &#x3C;!-- 会话范围的属性需要添加session的使用 --></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${session.user2.id}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">> |</span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${session.user2.password}"</span><span style="color:#E1E4E8"> >&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">> |</span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${session.user2.gender}"</span><span style="color:#E1E4E8"> >&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="thymeleaf的五种表达式">Thymeleaf的五种表达式？</h3>
<ul>
<li>变量表达式${…}</li>
<li>选择变量表达式*{…}
<ul>
<li>选择变量表达式主要是为了简化书写</li>
<li>th:object属性用于绑定一个对象，这样在当前元素（p元素）内可以直接使用该对象的属性</li>
<li>选择变量表达式用于使用外围绑定的对象的属性，以简化书写</li>
</ul>
</li>
<li>消息表达式#{…}
<ul>
<li>消息表达式用于显示消息，主要是来自属性文件的属性，可用于实现国际化等功能</li>
<li>{属性名}来显示来自属性文件的一个消息</li>
</ul>
</li>
<li>URL链接变量表达式@{…}
<ul>
<li>用于指定一个链接，指定一个资源的url</li>
</ul>
</li>
<li>片段(fragment)表达式~{…}
<ul>
<li>页面名称::片段名称</li>
</ul>
</li>
</ul>
<h3 id="如何使用选择变量表达式">如何使用选择变量表达式？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:object</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${user1}"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    user1属性值：</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"*{id}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">> |</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"*{password}"</span><span style="color:#E1E4E8"> >&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">> |</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"*{gender}"</span><span style="color:#E1E4E8"> >&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="链接表达式的四种写法">链接表达式的四种写法？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">a</span><span style="color:#B392F0"> th:href</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"@{https://www.baidu.com}"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"btn btn-sm btn-danger"</span><span style="color:#E1E4E8">>测试1-绝对路径&#x3C;/</span><span style="color:#85E89D">a</span><span style="color:#E1E4E8">> </span><span style="color:#79B8FF">&#x26;nbsp;</span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 请求/页面相对路径：直接写资源的路径 --></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 使用相对路径，要注意404问题 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">a</span><span style="color:#B392F0"> th:href</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"@{static/img/lxh01.gif}"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"btn btn-sm btn-warning"</span><span style="color:#E1E4E8">>测试2-页面/请求相对路径&#x3C;/</span><span style="color:#85E89D">a</span><span style="color:#E1E4E8">> </span><span style="color:#79B8FF">&#x26;nbsp;</span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 上下文相对路径，以/开头，表示相对程序的上下文路径 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">a</span><span style="color:#B392F0"> th:href</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"@{/static/img/lxh02.gif}"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"btn btn-sm btn-success"</span><span style="color:#E1E4E8">>测试3-上下文相对路径&#x3C;/</span><span style="color:#85E89D">a</span><span style="color:#E1E4E8">> </span><span style="color:#79B8FF">&#x26;nbsp;</span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 服务器相对路径，以~/开头，表示相对服务器的路径 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">a</span><span style="color:#B392F0"> th:href</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"@{~/static/img/lxh03.gif}"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"btn btn-sm btn-primary"</span><span style="color:#E1E4E8">>测试4-服务器相对路径&#x3C;/</span><span style="color:#85E89D">a</span><span style="color:#E1E4E8">> </span><span style="color:#79B8FF">&#x26;nbsp;</span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 协议相对路径： 以//开头，表示相对协议的路径 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">a</span><span style="color:#B392F0"> th:href</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"@{//static/img/lxh04.gif}"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"btn btn-sm btn-info"</span><span style="color:#E1E4E8">>测试5-协议相对路径&#x3C;/</span><span style="color:#85E89D">a</span><span style="color:#E1E4E8">> </span><span style="color:#79B8FF">&#x26;nbsp;</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="怎么定义和引用片段">怎么定义和引用片段？</h3>
<p><strong>定义</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> th:fragment</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"f1"</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"frag1"</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"bg-primary padding10 margin10"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    这是模板片段1内容~~~~~~~~~~~~~~~~~~~&#x3C;</span><span style="color:#85E89D">br</span><span style="color:#E1E4E8">> </span></span>
<span class="line"><span style="color:#E1E4E8">    这是模板片段1内容~~~~~~~~~~~~~~~~~~~&#x3C;</span><span style="color:#85E89D">br</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    这是模板片段1内容~~~~~~~~~~~~~~~~~~~&#x3C;</span><span style="color:#85E89D">br</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<p><strong>引用</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- th:insert用于插入一个模板片段，比如下面的代码表示将f1片段内容插入div1 --></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 页面名称::片段名称 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"div1"</span><span style="color:#B392F0"> th:insert</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"~{footer::f1}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- th:replace用于使用指定的模板片段替换原有内容，比如下面的代码表示使用f1的片段内容替换div2 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"div2"</span><span style="color:#B392F0"> th:replace</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"~{footer::f1}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 也可通过页面名称::#id通过元素的id来使用一个片段 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"div3"</span><span style="color:#B392F0"> th:insert</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"~{footer::#frag2}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"div4"</span><span style="color:#B392F0"> th:insert</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"~{footer}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 使用当前页面定义的片段，可不加页面名称或使用this --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"div5"</span><span style="color:#B392F0"> th:insert</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"~{::frag3}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"div5"</span><span style="color:#B392F0"> th:insert</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"~{this::#fragment3}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="哪些字面标记不合法">哪些字面标记不合法？</h3>
<p>字面标记值类似文本字面值: 区别是不使用单引号括起来值，
只能允许字母、数字、下划线、中划线、点号、中括号，
不能包含逗号、空格以及其他特殊字符</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">字面标记：&#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"Anna"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">>&#x3C;</span><span style="color:#85E89D">br</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">字面标记：&#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"Annabelle_Lee"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">>&#x3C;</span><span style="color:#85E89D">br</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">字面标记：&#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"www.baidu.com"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">>&#x3C;</span><span style="color:#85E89D">br</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">字面标记：&#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"a-b_c.d"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">>&#x3C;</span><span style="color:#85E89D">br</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 空格不允许 --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 字面标记：&#x3C;span th:text="[kite runner]">&#x3C;/span>&#x3C;br> --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 逗号不允许 --></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 字面标记：&#x3C;span th:text="a,b">&#x3C;/span>&#x3C;br> </span></span></code></pre>
<h3 id="th属性的作用">th：*属性的作用？</h3>
<p>th:* 修改单个属性的值</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#6A737D">&#x3C;!-- 绝大部分html属性都有对应的th:*属性，在th:*属性中才能使用Thymeleaf的语法 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!--显示user5的头像，鼠标悬浮显示其id--></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">img</span><span style="color:#B392F0"> th:src</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"'static/img/'+${user5.img}"</span><span style="color:#B392F0"> th:title</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${user5.id}"</span></span>
<span class="line"><span style="color:#B392F0">             src</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"static/img/lxh01.gif"</span><span style="color:#B392F0"> title</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"小胖"</span><span style="color:#B392F0"> width</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"60"</span><span style="color:#B392F0"> height</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"60"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">             </span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">img</span><span style="color:#B392F0"> th:src</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"@{'/static/img/'+${user5.img}}"</span><span style="color:#B392F0"> th:title</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${user5.id}"</span></span>
<span class="line"><span style="color:#B392F0">             src</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"static/img/lxh01.gif"</span><span style="color:#B392F0"> title</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"小胖"</span><span style="color:#B392F0"> width</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"60"</span><span style="color:#B392F0"> height</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"60"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>th:attr 修改一个标签多个属性的值</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!--显示user5的头像，鼠标悬浮显示其id--></span></span>
<span class="line"><span style="color:#E1E4E8">         &#x3C;</span><span style="color:#85E89D">img</span><span style="color:#B392F0"> th:attr</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"src=@{'/static/img/'+${user5.img}},title=${user5.id}"</span></span>
<span class="line"><span style="color:#B392F0">             src</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"static/img/lxh01.gif"</span><span style="color:#B392F0"> title</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"小胖"</span><span style="color:#B392F0"> width</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"60"</span><span style="color:#B392F0"> height</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"60"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>th:object 绑定一个对象，方便在子标记中使用选择变量表达式</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:object</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${user5}"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        user5属性值：</span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"*{id}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">> |</span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"*{password}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">> |</span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"*{gender}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">> |</span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"*{img}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">> </span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>th:if 判断一个条件，条件成立，显示标记内容</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:if</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${age}>=18"</span><span style="color:#E1E4E8">>恭喜你，成为大人了！！！&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>th:switch+th:case 类似switch-case结构作用的属性</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- th:switch通常用于判断一个表达式的值 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> th:switch</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${type}"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:case</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"1"</span><span style="color:#E1E4E8">>冰箱&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:case</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"2"</span><span style="color:#E1E4E8">>空调&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:case</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"3"</span><span style="color:#E1E4E8">>电视&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- *表示其他情况 --></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:case</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"*"</span><span style="color:#E1E4E8">>其他&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>th:each 类似foreach循环</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">table</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"table table-striped table-hover text-center"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">tr</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">>学号&#x3C;/</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">>姓名&#x3C;/</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">>性别&#x3C;/</span><span style="color:#85E89D">th</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;/</span><span style="color:#85E89D">tr</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!--1）遍历列表--></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">tr</span><span style="color:#B392F0"> th:each</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"s:${studentList}"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">            &#x3C;!-- th:属性名写法 --></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">td</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${s.sid}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">td</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">            &#x3C;!-- data-th-属性名写法 --></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">td</span><span style="color:#B392F0"> data-th-text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${s.sname}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">td</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">            &#x3C;!-- 内联表达式写法 --></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">td</span><span style="color:#E1E4E8">>[[${s.sgender}]]&#x3C;/</span><span style="color:#85E89D">td</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;/</span><span style="color:#85E89D">tr</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">table</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--2）获取状态信息--></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- s是一个变量名，可以随意命名，表示当前遍历的元素 --></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- stat是一个变量名，可以随意命名，用于获取当前遍历的元素的状态信息 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> th:each</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"s,stat:${studentList}"</span><span style="color:#B392F0"> th:class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${stat.odd}?'bg-danger':'bg-success'"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        [[${s.sid}]] | [[${s.sname}]] |</span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- index：获取当前元素的索引，从0开始 --></span></span>
<span class="line"><span style="color:#E1E4E8">        [[${stat.index}]] |</span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- count： 获取当前元素的序号，也就是第几个元素 --></span><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#E1E4E8">        [[${stat.count}]] |</span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- size： 获取集合大小 --></span><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#E1E4E8">        [[${stat.size}]] |</span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- first： 返回布尔值，表示是否是第一项元素 --></span></span>
<span class="line"><span style="color:#E1E4E8">        [[${stat.first}]] |</span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- last： 返回布尔值，表示是否是最后一项元素 --></span></span>
<span class="line"><span style="color:#E1E4E8">        [[${stat.last}]] |</span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- odd： 返回布尔值，表示是否是奇数项元素 --></span></span>
<span class="line"><span style="color:#E1E4E8">        [[${stat.odd}]] |</span></span>
<span class="line"><span style="color:#6A737D">        &#x3C;!-- even： 返回布尔值，表示是否是偶数项元素 --></span></span>
<span class="line"><span style="color:#E1E4E8">        [[${stat.even}]] | </span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--3）遍历Map集合--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">hr</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 遍历Map集合，通过key获取键，通过value获取值 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> th:each</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"entry,status:${map1}"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        [[${entry.key}]] | [[${entry.value}]] | [[${status.index}]] </span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 遍历map2集合，打印键和值的各项信息 --></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- value如果不是简单类型，可继续获取具体属性 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>th:text和th:utext</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- th:text如果内容是html内容，则不会解析html内容，作为文本显示 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${content1}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--th:text等效写法：内联表达式写法--></span></span>
<span class="line"><span style="color:#E1E4E8">    [[${content1}]]</span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- th:utext如果内容是html内容，会解析html内容，显示解析后的内容 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:utext</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${content2}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--th:utext等效写法：内联表达式写法--></span></span>
<span class="line"><span style="color:#E1E4E8">    [(${content2})]</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>th:with 用于定义局部变量</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#6A737D">&#x3C;!-- th:with用于定义局部变量，可以定义一个或多个局部变量 --></span></span>
<span class="line"><span style="color:#6A737D">  &#x3C;!-- 定义的变量只能在标记内使用 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> th:with</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"firstStudent=${studentList[0]}"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  [[${firstStudent.sid}]] | [[${firstStudent.sname}]] | [[${firstStudent.sgender}]]</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--定义多个变量--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> th:with</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"a=10,b=20,c=30"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  [[${a+b+c}]]</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>th:inline 启用和禁用内联表达式</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> th:inline</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"none"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">     [[1+2+3]] </span></span>
<span class="line"><span style="color:#E1E4E8">     &#x3C;</span><span style="color:#85E89D">br</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">     [(1+2+3)]</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">  &#x3C;!-- 如果需要在js代码中使用内联表达式，可将inline属性设置为javascript --></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">script</span><span style="color:#B392F0"> th:inline</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"javascript"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    document.</span><span style="color:#B392F0">write</span><span style="color:#E1E4E8">([[${user5.id}]]);</span></span>
<span class="line"><span style="color:#E1E4E8">    document.</span><span style="color:#B392F0">write</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"&#x3C;br>"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    document.</span><span style="color:#B392F0">write</span><span style="color:#E1E4E8">([[${age}]]);</span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">script</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">  &#x3C;!-- 默认，可以在css样式中使用内联表达式 --></span></span>
<span class="line"><span style="color:#6A737D">  &#x3C;!-- 如果设置值是none，css中的内联表达式不会被解析 --></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">style</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"css"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#B392F0">    .bg-red</span><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#79B8FF">      color</span><span style="color:#E1E4E8">: [[${</span><span style="color:#79B8FF">color</span><span style="color:#E1E4E8">}]];</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">style</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"bg-red"</span><span style="color:#E1E4E8">>测试样式&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="thymeleaf的名称空间">Thymeleaf的名称空间？</h3>
<p>Thymeleaf提供一些名称空间，用于获取对应的信息。每个名称空间都对应一个Map集合，存储了对应的属性、参数或其他信息</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 不使用任何名称空间就是请求范围的属性 --></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--获取请求范围属性--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${num1}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${num2}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--获取会话范围属性--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${session.num3}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--获取应用程序范围属性--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${application.num4}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--获取一个请求参数的单个值--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${param.name}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--获取一个请求参数的多个值--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${param.hobbies}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!--获取一个请求参数的多个值中的某个值，加上数组索引即可--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${param.hobbies[0]}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="有哪些基本对象">有哪些基本对象？</h3>
<p>Thymeleaf 中常用的内置基本对象如下：</p>
<ul>
<li>ctx ：上下文对象</li>
<li>vars ：上下文变量</li>
<li>locale：上下文的语言环境</li>
<li>request：HttpServletRequest 对象（仅在 Web 应用中可用）</li>
<li>response：HttpServletResponse 对象（仅在 Web 应用中可用）</li>
<li>session：HttpSession 对象（仅在 Web 应用中可用）</li>
<li>servletContext：ServletContext 对象（仅在 Web 应用中可用）</li>
</ul>
<h3 id="表达式工具对象如何使用">表达式工具对象如何使用？</h3>
<h4 id="numbers数字工具对象">numbers：数字工具对象</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">formatDecimal()方法: 用于格式化小数数值</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 这里的三个参数分别表示：要格式化的值，至少保留几位整数，保留几位小数 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#numbers.formatDecimal(num1,1,3)}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>formatCurrency()方法：用于格式化金额，会加货币符号</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#numbers.formatCurrency(num1)}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>sequence()方法: 用于产生一个整数序列/数组, 可以通过产生一个整数序列实现普通循环，如打印分页的页码</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#6A737D">    &#x3C;!-- 可以指定两个参数，表示from和to，最小值和最大值 --></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 可以指定三个参数，表示from、to和step，最小值、最大值和步长 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:each</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"i:${#numbers.sequence(1,10)}"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    | &#x3C;</span><span style="color:#85E89D">a</span><span style="color:#B392F0"> th:href</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"'findByPageNo?pageNo='+${i}"</span><span style="color:#E1E4E8">>[[${i}]]&#x3C;/</span><span style="color:#85E89D">a</span><span style="color:#E1E4E8">> |</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">></span></span></code></pre>
<h4 id="strings字符串工具对象">strings：字符串工具对象</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 检查一个字符串内容是否为空 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#strings.isEmpty('')}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#strings.isEmpty('anna')}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 获取字符串长度 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#strings.length(bookName)}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 截取子字符串 从索引为0的字符开始，截取5-0个字符--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#strings.substring(bookName,0,5)}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- 检查字符串是否包含指定内容 --></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#strings.contains(bookName,'kite')}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<h4 id="dates日期工具对象">dates：日期工具对象</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#6A737D">&#x3C;!-- 格式化日期时间 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#dates.format(now)}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 格式化的时候可指定显示格式 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#dates.format(now,'yyyy-MM-dd HH:mm:ss D E')}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!-- 获取日期时间的指定部分, 如年份、月份、日、月份名称、星期几等 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#dates.year(now)}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#dates.month(now)}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#dates.day(now)}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#dates.monthName(now)}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#dates.dayOfWeek(now)}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#dates.hour(now)}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span></code></pre>
<h4 id="listssetslistset-集合工具对象">lists/sets：List/Set 集合工具对象</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">    &#x3C;!-- #lists对象用于操作List类型的数据，比如sort()方法可用于对集合排序--></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">span</span><span style="color:#B392F0"> th:each</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"name:${#lists.sort(nameList)}"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        [[${name}]] | </span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">span</span><span style="color:#E1E4E8">>     </span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#lists.sort(scoreList)}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<h4 id="aggregates">aggregates</h4>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#6A737D">&#x3C;!-- #aggregates用于对数组或集合进行汇总运算，如求和或求平均 --></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"content"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#aggregates.avg(scoreList)}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">>                </span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#B392F0"> th:text</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"${#aggregates.sum(scoreList)}"</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">>                </span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span></code></pre>
<h4 id="mapsmap-集合工具对象">maps：Map 集合工具对象</h4>
<p>常用的方法有：size、isEmpty、containsKey 和 containsValue 等</p>
<h2 id="spring-boot-jpa-13问">Spring Boot JPA 13问</h2>
<h3 id="springboot支持的三种数据源是什么">SpringBoot支持的三种数据源是什么？</h3>
<p>HikariCP：默认内置数据源对象</p>
<p>Tomcat提供DataSource：HikariCP不可用的情况下，在web环境中，将tomcat服务器配置的数据源对象。</p>
<p>Commons DBCP：HikariCP不可用，tomcat数据源也不可用，将使用dbcp数据源。</p>
<h3 id="如何配置数据源">如何配置数据源？</h3>
<p>导入依赖项</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">>org.springframework.boot&#x3C;/</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">>spring-boot-starter-data-jpa&#x3C;/</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">>mysql&#x3C;/</span><span style="color:#85E89D">groupId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">>mysql-connector-java&#x3C;/</span><span style="color:#85E89D">artifactId</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">scope</span><span style="color:#E1E4E8">>runtime&#x3C;/</span><span style="color:#85E89D">scope</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">dependency</span><span style="color:#E1E4E8">></span></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#85E89D">spring</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  datasource</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    driver-class-name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">com.mysql.jdbc.Driver</span></span>
<span class="line"><span style="color:#85E89D">    url</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">jdbc:mysql://localhost:3306/blog?useUnicode=true&#x26;characterEncoding=utf-8</span></span>
<span class="line"><span style="color:#85E89D">    username</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">root</span></span>
<span class="line"><span style="color:#85E89D">    password</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">root</span></span>
<span class="line"><span style="color:#85E89D">  jpa</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    hibernate</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      ddl-auto</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">update</span></span>
<span class="line"><span style="color:#85E89D">    show-sql</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span></span></code></pre>
<h3 id="springdatajpa是什么">SpringDataJPA是什么？</h3>
<p>spring data jpa是spring提供的一套简化JPA开发的框架，按照约定好的【方法命名规则】写dao层接口，就可以在不写接口实现的情况下，实现对数据库的访问和操作。同时提供了很多除了CRUD之外的功能，如分页、排序、复杂查询等等。</p>
<h3 id="springdata-jpa-需不需要jpa提供程序">SpringData JPA 需不需要JPA提供程序？</h3>
<p>需要</p>
<p>Spring Data JPA 可以理解为 JPA 规范的再次封装抽象，底层还是使用了 Hibernate 的 JPA 技术实现。</p>
<h3 id="jpa个各个属性都有什么作用">JPA个各个属性都有什么作用？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="properties"><code><span class="line"><span style="color:#6A737D"># 指定是否在控制台打印生成的sql语句，以方便跟踪程序执行和调试程序，默认值为false</span></span>
<span class="line"><span style="color:#F97583">spring.jpa.show-sql</span><span style="color:#E1E4E8">=true</span></span>
<span class="line"><span style="color:#6A737D"># 指定是否格式化在控制台打印的sq|语句</span></span>
<span class="line"><span style="color:#F97583">spring.jpa.properties.hibernate.format_sql</span><span style="color:#E1E4E8">=true</span></span>
<span class="line"><span style="color:#6A737D"># 指定使用的方言，是一个类的名称，根据操作的数据库选择</span></span>
<span class="line"><span style="color:#F97583">spring.jpa.properties.hibernate.dialect</span><span style="color:#E1E4E8">=org.hibernate.dialect.MySQL57InnoDBDialect</span></span>
<span class="line"><span style="color:#6A737D"># 指定程序运行时是否自动生成、更新或删除数据库表</span></span>
<span class="line"><span style="color:#F97583">spring.jpa.hibernate.ddl-auto</span><span style="color:#E1E4E8">=update</span></span></code></pre>
<p>ddl-auto的有效值有：</p>
<ul>
<li>create: 每次加载hibernate时，先删除已存在的数据库表结构再重新生成</li>
<li>create-drop:每次加载hibernate时，先删除已存在的数据库表结构再重新生成，并且当sessionFactory关闭时自动删除生成的数据库表结构:</li>
<li>update: 只在第一次加载hibernate时自动生成数据库表结构，以后再次加载hibernate时根据 model类自动更新表结构</li>
<li>validate:每次加载hibermate时，验证数据库表结构，仅仅和数据库中的表进行比较，不会 创建新表，但是会插入新值</li>
<li>none:禁用DDL操作</li>
</ul>
<h3 id="有哪些常用的注解">有哪些常用的注解？</h3>
<ul>
<li>@Entity定义对象将会成为被JPA管理的实体，将映射到指定的数据库表。</li>
<li>@Table指定数据库的表名。</li>
<li>@Id定义属性为数据库的主键，一个实体里面必须有一个。</li>
<li>@IdClass利用外部类的联合主键。</li>
<li>@GeneratedValue为主键生成策略</li>
<li>@Basic表示属性是到数据库表的字段的映射。如果实体的字段上没有任何注解，默认即为@Basic。</li>
<li>@Transient表示该属性并非一个到数据库表的字段的映射，表示非持久化属性，与@Basic作用相反。JPA映射数据库的时候忽略它。</li>
<li>@Column定义该属性对应数据库中的列名。</li>
<li>@Temporal用来设置Date类型的属性映射到对应精度的字段。</li>
<li>@Lob 将属性映射成数据库支持的大对象类型，支持以下两种数据库类型的字段。</li>
</ul>
<p>关联关系注解</p>
<ul>
<li>@JoinColumn定义外键关联的字段名称</li>
<li>@OneToOne关联关系</li>
<li>@OneToMany与@ManyToOne可以相对存在，也可只存在一方。</li>
<li>@ManyToMany表示多对多，和@OneToOne、@ManyToOne一样也有单向、双向之分。单向双向和注解没有关系，只看实体类之间是否相互引用。</li>
</ul>
<h3 id="repository接口和他的派生类型">Repository接口和他的派生类型？</h3>
<p><strong>Repository</strong>： 是 spring Data 的一个核心接口，它不提供任何方法，开发者需要在自己定义的接口中声明需要的方法
仅仅是一个标识，表明任何继承它的均为仓库接口类，方便Spring自动扫描识别</p>
<p><strong>CrudRepository</strong>： 继承 Repository，实现了一组 CRUD 相关的方法</p>
<p><strong>PagingAndSortingRepository</strong>： 继承 CrudRepository，实现了一组分页排序相关的方法</p>
<p><strong>JpaRepository</strong>： 继承 PagingAndSortingRepository，实现一组 JPA 规范相关的方法</p>
<h3 id="如何构建简单的条件查询">如何构建简单的条件查询？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">//resposity</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Student</span><span style="color:#F97583">></span><span style="color:#B392F0"> findByUserDepUuid</span><span style="color:#E1E4E8">(String uuid);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//框架在解析该方法时，流程如下：</span></span>
<span class="line"><span style="color:#6A737D">/*</span></span>
<span class="line"><span style="color:#6A737D">首先剔除 findBy，然后对剩下的属性进行解析，假设查询实体为Doc</span></span>
<span class="line"><span style="color:#6A737D">先判断 userDepUuid（根据 POJO 规范，首字母变为小写）是否为查询实体的一个属性，</span></span>
<span class="line"><span style="color:#6A737D">如果是，则表示根据该属性进行查询；如果没有该属性，继续往下走</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">从右往左截取第一个大写字母开头的字符串(此处为Uuid)，</span></span>
<span class="line"><span style="color:#6A737D">然后检查剩下的字符串是否为查询实体的一个属性，如果是，</span></span>
<span class="line"><span style="color:#6A737D">则表示根据该属性进行查询；如果没有该属性，则重复这一步，继续从右往左截取；</span></span>
<span class="line"><span style="color:#6A737D">最后假设 user 为查询实体的一个属性</span></span>
<span class="line"><span style="color:#6A737D">接着处理剩下部分（DepUuid），</span></span>
<span class="line"><span style="color:#6A737D">先判断 user 所对应的类型是否有depUuid属性，</span></span>
<span class="line"><span style="color:#6A737D">如果有，则表示该方法最终是根据 "Doc.user.depUuid" </span></span>
<span class="line"><span style="color:#6A737D">的取值进行查询；否则继续按照步骤3的规则从右往左截取，</span></span>
<span class="line"><span style="color:#6A737D">最终表示根据 "Doc.user.dep.uuid" 的值进行查询。</span></span>
<span class="line"><span style="color:#6A737D">*/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//以下是条件查询中可用的关键字</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//5. 构建条件查询-根据性别和班级查询学生列表</span></span>
<span class="line"><span style="color:#6A737D">//如果多个参数，则参数顺序和方法名称要对应起来，比如这里第一个参数必须是班级</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Student</span><span style="color:#F97583">></span><span style="color:#B392F0"> findBySbatchAndSgender</span><span style="color:#E1E4E8">(String batchName, String gender);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//6. 构建条件查询-根据学号或姓名查询学生</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Student</span><span style="color:#F97583">></span><span style="color:#B392F0"> findBySidOrSname</span><span style="color:#E1E4E8">(String id, String name);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//7. 构建条件查询-根据两个学号查询学号介于该区间的学生的列表</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Student</span><span style="color:#F97583">></span><span style="color:#B392F0"> findBySidBetween</span><span style="color:#E1E4E8">(String start, String end);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//8. 构建条件查询-查询学号小于指定学号的学生列表</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Student</span><span style="color:#F97583">></span><span style="color:#B392F0"> findBySidLessThan</span><span style="color:#E1E4E8">(String id);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//9. 构建条件查询-查询学号小于等于指定学号的学生列表</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Student</span><span style="color:#F97583">></span><span style="color:#B392F0"> findBySidLessThanEqual</span><span style="color:#E1E4E8">(String id);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//10. 构建条件查询-查询学号大于指定学号的学生列表</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Student</span><span style="color:#F97583">></span><span style="color:#B392F0"> findBySidGreaterThan</span><span style="color:#E1E4E8">(String id);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//11. 构建条件查询-查询学号大于等于指定学号的学生列表</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Student</span><span style="color:#F97583">></span><span style="color:#B392F0"> findBySidGreaterThanEqual</span><span style="color:#E1E4E8">(String id);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//12. 构建条件查询-查询班级为null的学生的列表</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Student</span><span style="color:#F97583">></span><span style="color:#B392F0"> findBySbatchNull</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//13. 构建条件查询-查询学号包含指定关键字的学生列表</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Student</span><span style="color:#F97583">></span><span style="color:#B392F0"> findBySidLike</span><span style="color:#E1E4E8">(String id);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//14. 构建条件查询-查询名字包含指定关键字的学生列表</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Student</span><span style="color:#F97583">></span><span style="color:#B392F0"> findBySnameLike</span><span style="color:#E1E4E8">(String name);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">//15. 构建条件查询-查询名字以指定字符串结尾的学生列表</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Student</span><span style="color:#F97583">></span><span style="color:#B392F0"> findBySnameEndingWith</span><span style="color:#E1E4E8">(String name);</span></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">//server</span></span>
<span class="line"><span style="color:#6A737D">//根据主键查找查找时</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#E1E4E8"> Product </span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(Long id) {</span></span>
<span class="line"><span style="color:#6A737D">    //findById()返回的是一个Optional对象，需要进一步调用get()返回实际数据对象</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> repo.</span><span style="color:#B392F0">findById</span><span style="color:#E1E4E8">(id).</span><span style="color:#B392F0">get</span><span style="color:#E1E4E8">(); </span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#E1E4E8"> List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Student</span><span style="color:#F97583">></span><span style="color:#B392F0"> getStudentListByUuid</span><span style="color:#E1E4E8">(String Uuid) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> studentRepository.</span><span style="color:#B392F0">findByUuid</span><span style="color:#E1E4E8">(Uuid);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="如何使用query查询">如何使用@Query查询？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">// 1. 查询id最大的员工的信息</span></span>
<span class="line"><span style="color:#6A737D">// 使用@Query注解定义JPQL查询</span></span>
<span class="line"><span style="color:#6A737D">// JPQL(Java Persistence Querying Language-Java持久化语言)或者叫做JPA Querying</span></span>
<span class="line"><span style="color:#6A737D">// Language-操作的是对象和对象的属性</span></span>
<span class="line"><span style="color:#6A737D">// Native Query-本地/原生SQL语句-操作的是表和表中的列</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// select emp相当于查询员工对象的所有属性，emp.属性名 表示查询对应的属性</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"select emp from Employee emp where id=(select max(id) from Employee)"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">Employee </span><span style="color:#B392F0">query1</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 2. 根据性别和部门编号查询员工列表</span></span>
<span class="line"><span style="color:#6A737D">// 使用占位符参数 ?X 表示查询参数</span></span>
<span class="line"><span style="color:#6A737D">// Employee类中通过dept属性映射了关系，但是Employee类中没有deptId属性</span></span>
<span class="line"><span style="color:#6A737D">// 所以如果需要使用deptId属性，需要写dept.deptId</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"select emp from Employee emp where gender=?1 and dept.deptId=?2"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Employee</span><span style="color:#F97583">></span><span style="color:#B392F0"> query2</span><span style="color:#E1E4E8">(String gender, Integer deptId);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 3. 根据性别和部门编号查询员工列表</span></span>
<span class="line"><span style="color:#6A737D">// 使用命名参数 :参数名</span></span>
<span class="line"><span style="color:#6A737D">// 可通过@Param注解指定查询参数的名称</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"select emp from Employee emp where gender=:gen and dept.deptId=:did"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Employee</span><span style="color:#F97583">></span><span style="color:#B392F0"> query3</span><span style="color:#E1E4E8">(@</span><span style="color:#F97583">Param</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"gen"</span><span style="color:#E1E4E8">) String gender, @</span><span style="color:#F97583">Param</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"did"</span><span style="color:#E1E4E8">) Integer deptId);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 4. 查询姓名包含指定关键字和指定性别的员工</span></span>
<span class="line"><span style="color:#6A737D">// Spring Data支持在占位符参数两端添加%的使用</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"select emp from Employee emp where name like %?1% and gender=?2"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Employee</span><span style="color:#F97583">></span><span style="color:#B392F0"> query4</span><span style="color:#E1E4E8">(String name, String gender);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 5. 查询姓名包含指定关键字和指定性别的员工</span></span>
<span class="line"><span style="color:#6A737D">// Spring Data支持在命名参数两端添加%的使用</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"select emp from Employee emp where name like %:name% and gender=:gender"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Employee</span><span style="color:#F97583">></span><span style="color:#B392F0"> query5</span><span style="color:#E1E4E8">(@</span><span style="color:#F97583">Param</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"name"</span><span style="color:#E1E4E8">) String name, @</span><span style="color:#F97583">Param</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"gender"</span><span style="color:#E1E4E8">) String gender);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 6. 查询所有员工</span></span>
<span class="line"><span style="color:#6A737D">// JPQL: 操作的是对象和对象的属性</span></span>
<span class="line"><span style="color:#6A737D">// 原生SQL： 操作的是表和表中的列</span></span>
<span class="line"><span style="color:#6A737D">// 使用本地查询/原生SQL语句，需要设置nativeQuery属性为true</span></span>
<span class="line"><span style="color:#6A737D">// Spring Data JPA不仅仅支持JPQL语句，也支持原生SQL语句</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Query</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">value</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "select * from emp"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">nativeQuery</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">Employee</span><span style="color:#F97583">></span><span style="color:#B392F0"> query6</span><span style="color:#E1E4E8">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 7. 联接表查询指定列</span></span>
<span class="line"><span style="color:#6A737D">//   查询指定列，可以考虑将每行数据封装到一个Object[]数组</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"select e.id,e.name,e.gender,d.deptId,d.deptName from Employee e, Department d where e.dept.deptId=d.deptId"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">List</span><span style="color:#F97583">&#x3C;Object</span><span style="color:#E1E4E8">[]</span><span style="color:#F97583">></span><span style="color:#B392F0"> query7</span><span style="color:#E1E4E8">();</span></span></code></pre>
<h3 id="如何进行增删改">如何进行增删改？</h3>
<p>直接调用JPA给定的 CRUD 方法</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> addStudent</span><span style="color:#E1E4E8">(Student student) {</span></span>
<span class="line"><span style="color:#E1E4E8">    studentRepository.</span><span style="color:#B392F0">save</span><span style="color:#E1E4E8">(student);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> updateStudent</span><span style="color:#E1E4E8">(Student student) {</span></span>
<span class="line"><span style="color:#E1E4E8">    studentRepository.</span><span style="color:#B392F0">save</span><span style="color:#E1E4E8">(student);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Override</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> deleteStudent</span><span style="color:#E1E4E8">(String id) {</span></span>
<span class="line"><span style="color:#E1E4E8">    studentRepository.</span><span style="color:#B392F0">deleteById</span><span style="color:#E1E4E8">(id);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>或者在repository层中定义Query</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">// 8. 修改指定员工的姓名</span></span>
<span class="line"><span style="color:#6A737D">// 需要使用@Modifying注解和@Transactional注解</span></span>
<span class="line"><span style="color:#6A737D">// @Query("select emp from Employee emp")</span></span>
<span class="line"><span style="color:#6A737D">// 如果执行的是一个增删改操作，则必须添加@Modifying和@Transactional注解的使用</span></span>
<span class="line"><span style="color:#6A737D">// @Transactional注解建议加到Service层的方法上，有时候一个Service功能可能涉及多个Dao的调用，需要作为一个事务执行</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Modifying</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"update Employee set name=:name where id=:id"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">void</span><span style="color:#B392F0"> update1</span><span style="color:#E1E4E8">(@</span><span style="color:#F97583">Param</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"id"</span><span style="color:#E1E4E8">) Integer id, @</span><span style="color:#F97583">Param</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"name"</span><span style="color:#E1E4E8">) String name);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 9. 添加一个新员工</span></span>
<span class="line"><span style="color:#6A737D">// 需要使用@Modifying注解和@Transactional注解</span></span>
<span class="line"><span style="color:#6A737D">// JPQL不支持insert语句</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Modifying</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Query</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">value</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> "insert into emp(name,gender,dept_id) values(:name,:gender,:deptId)"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">nativeQuery</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">void</span><span style="color:#B392F0"> insert</span><span style="color:#E1E4E8">(@</span><span style="color:#F97583">Param</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"name"</span><span style="color:#E1E4E8">) String name, @</span><span style="color:#F97583">Param</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"gender"</span><span style="color:#E1E4E8">) String gender, @</span><span style="color:#F97583">Param</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"deptId"</span><span style="color:#E1E4E8">) Integer deptId);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">// 10. 刪除一个员工</span></span>
<span class="line"><span style="color:#6A737D">// 需要使用@Modifying注解和@Transactional注解</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Modifying</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"delete Employee where id=?1"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">void</span><span style="color:#B392F0"> delete</span><span style="color:#E1E4E8">(Integer id);</span></span></code></pre>
<h3 id="如何声明事务">如何声明事务？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">//例</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Transactional</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">propagation</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">Propagation.SUPPORTS, </span><span style="color:#79B8FF">readOnly</span><span style="color:#F97583">=</span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#E1E4E8"> List</span><span style="color:#F97583">&#x3C;</span><span style="color:#E1E4E8">PayInfo</span><span style="color:#F97583">></span><span style="color:#B392F0"> findAll</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> payInfoDao.</span><span style="color:#B392F0">findAll</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>























































<table><thead><tr><th>属性</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>value</td><td>String</td><td>可选的限定描述符，指定使用的事务管理器</td></tr><tr><td>propagation</td><td>enum: Propagation</td><td>可选的事务传播行为设置</td></tr><tr><td>isolation</td><td>enum: Isolation</td><td>可选的事务隔离级别设置</td></tr><tr><td>readOnly</td><td>boolean</td><td>读写或只读事务，默认读写</td></tr><tr><td>timeout</td><td>int (in seconds granularity)</td><td>事务超时时间设置</td></tr><tr><td>rollbackFor</td><td>Class对象数组，必须继承自Throwable</td><td>导致事务回滚的异常类数组</td></tr><tr><td>rollbackForClassName</td><td>类名数组，必须继承自Throwable</td><td>导致事务回滚的异常类名字数组</td></tr><tr><td>noRollbackFor</td><td>Class对象数组，必须继承自Throwable</td><td>不会导致事务回滚的异常类数组</td></tr><tr><td>noRollbackForClassName</td><td>类名数组，必须继承自Throwable</td><td>不会导致事务回滚的异常类名字数组</td></tr></tbody></table>
<h3 id="如何配置mapper映射文件的位置">如何配置mapper映射文件的位置？</h3>
<p>在配置文件中</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="properties"><code><span class="line"><span style="color:#F97583">mybatis.mapper-locations</span><span style="color:#E1E4E8">=classpath:com/qdu/mapper/**/*.xml</span></span></code></pre>
<h3 id="如何开启对mapper包的扫描">如何开启对mapper包的扫描？</h3>
<p>在启动类中</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">MapperScan</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"com.qdu.mapper"</span><span style="color:#E1E4E8">)</span></span></code></pre>
<h2 id="消息传递-10问">消息传递 10问</h2>
<h3 id="消息传递的概念">消息传递的概念？</h3>
<p>消息传递是一个或多个实体之间进行通信的一-种方式，它无处不在。自计算机发明以来，以一种或
另一种形式进行的计算机消息传递就已经存在。它被定义为硬件和/或软件组件或应用程序之间的通
信方法。总会有一个发送者和一个或多个接收者。消息传递可以是同步和异步，发布/订阅， RPC
基于企业的消息传递，ESB (企业服务总线)，MOM (面向消息的中间件)等等。</p>
<h3 id="jms的概念">JMS的概念？</h3>
<p>JMS即Java消息服务（Java Message Service）应用程序接口，是一个Java平台中关于面向消息中间件（MOM）的API，用于在两个应用程序之间，或分布式系统中发送消息，进行异步通信。Java消息服务是一个与具体平台无关的API，绝大多数MOM提供商都对JMS提供支持。</p>
<h3 id="点对点模型有什么特点">点对点模型有什么特点？</h3>
<ol>
<li>一个消息由一个<b>消息生产者(producer)</b>传送给一个<b>消息使用者(consumer)</b>。</li>
<li>消息由生产者发送到<b>队列(Queue)</b>目的地，然后传送给在该队列上注册了的<b>消息使用者之一 </b>。</li>
<li>任意多数量的消息生产者都可以发送消息同一个队列，每条消息都可以确保被传送成功，且<b>每条消息仅由一个消息使用者收到和使用</b>。</li>
<li>如果没有消息使用者注册接受队列中的消息，则<b>队列保留该消息</b>，直到有使用者读取该消息，一旦读取，该消息便不在队列中，不可再有其他使用者读取。</li>
</ol>
<h3 id="发布订阅模型的特点">发布订阅模型的特点？</h3>
<ol>
<li>一个消息由一个<b>消息生产者（Producer/Publisher）</b>传送给<b>任意数量的消息使用者(Consumer/Subscriber)</b>。</li>
<li>消息由生产者发送到<b>主题（Topic）</b>目的地， 然后由<b>订阅了该主题的活跃消息使用者读取和使用</b>。</li>
<li>任意数量的消息生产者可以发送消息到<b>主题</b>目的地，<b>每条消息</b>传送给<b>任意数量订阅了该主题的消息使用者</b>。</li>
<li>如果没有订阅该主题的消息使用者，则Topic目的地不会保留该消息（除非有非活跃使用者进行了持久性订阅），后续订阅该主题的消息使用者也不会再收到使用者之前发的消息。</li>
<li>一个持久性订阅表示注册了该主题的使用者可以在生产者发送消息的时候处于非活跃状态，这样，使用者可以在变成活跃状态时收到之前发送的消息。</li>
</ol>
<h3 id="activemq是什么">ActiveMQ是什么？</h3>
<p>ActiveMQ是一种开源的基于JMS（Java Message Servie）规范的一种消息中间件的实现，ActiveMQ的设计目标是提供标准的、面向消息的、能够跨越多语言和多系统的应用集成消息通信中间件。</p>
<p>它为企业应用中消息传递提供高可用、出色性能、可扩展、稳定和安全保障。</p>
<p>ActiveMQ实现JMS规范并在此之上提供大量额外的特性。ActiveMQ支持队列和订阅两种模式的消息发送。</p>
<h3 id="如何启动activemq">如何启动ActiveMQ？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="shell"><code><span class="line"><span style="color:#79B8FF">cd</span><span style="color:#F97583"> &#x3C;</span><span style="color:#9ECBFF">activeMQ_di</span><span style="color:#E1E4E8">r</span><span style="color:#F97583">></span><span style="color:#9ECBFF">/bin</span></span>
<span class="line"><span style="color:#B392F0">./activemq</span><span style="color:#9ECBFF"> start</span></span></code></pre>
<h3 id="jms创建什么链接实例">JMS创建什么链接实例？</h3>
<p><code>javax.jms.Connection</code></p>
<p>（由于使用SpringBoot，此处不再赘述）</p>
<h3 id="如何配置activemq">如何配置ActiveMQ？</h3>
<p>首先配置properties文件</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="properties"><code><span class="line"><span style="color:#6A737D">#activemq通讯地址</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.broker-url</span><span style="color:#E1E4E8">=tcp://localhost:61616</span></span>
<span class="line"><span style="color:#6A737D">#用户名</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.user</span><span style="color:#E1E4E8">=admin</span></span>
<span class="line"><span style="color:#6A737D">#密码</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.password</span><span style="color:#E1E4E8">=admin</span></span>
<span class="line"><span style="color:#6A737D">#是否启用内存模型(就是不安装mq,项目启动时同时启动一个mq实例)</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.in-memory</span><span style="color:#E1E4E8">=false</span></span>
<span class="line"><span style="color:#6A737D">#信任所有包</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.packages.trust-all</span><span style="color:#E1E4E8">=true</span></span>
<span class="line"><span style="color:#6A737D">#是否替换默认的连接池，使用activemq的连接池需引入依赖</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.pool.enabled</span><span style="color:#E1E4E8">=false</span></span></code></pre>
<p>然后配置activeMQ</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Configuration</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">EnableJms</span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> ActiveMQConfig</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">Bean</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#E1E4E8"> Queue </span><span style="color:#B392F0">queue</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> ActiveMQQueue</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"springboot.queue"</span><span style="color:#E1E4E8">) ;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    //springboot默认只配置queue类型消息，如果要使用topic类型的消息，则需要配置该bean</span></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">Bean</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#E1E4E8"> JmsListenerContainerFactory </span><span style="color:#B392F0">jmsTopicListenerContainerFactory</span><span style="color:#E1E4E8">(ConnectionFactory </span><span style="color:#FFAB70">connectionFactory</span><span style="color:#E1E4E8">){</span></span>
<span class="line"><span style="color:#E1E4E8">        DefaultJmsListenerContainerFactory factory </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> DefaultJmsListenerContainerFactory</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">        factory.</span><span style="color:#B392F0">setConnectionFactory</span><span style="color:#E1E4E8">(connectionFactory);</span></span>
<span class="line"><span style="color:#6A737D">        //这里必须设置为true，false则表示是queue类型</span></span>
<span class="line"><span style="color:#E1E4E8">        factory.</span><span style="color:#B392F0">setPubSubDomain</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#E1E4E8"> factory;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">Bean</span></span>
<span class="line"><span style="color:#F97583">    public</span><span style="color:#E1E4E8"> Topic </span><span style="color:#B392F0">topic</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">        return</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> ActiveMQTopic</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"springboot.topic"</span><span style="color:#E1E4E8">) ;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>或者在properties中配置</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span># 使用点对点模型</span></span>
<span class="line"><span>spring.jms.pub-sub-domain=false</span></span></code></pre>
<p>配置文件的其他配置：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="properties"><code><span class="line"><span style="color:#6A737D"># 是否信任所有包</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.packages.trust-all</span><span style="color:#E1E4E8">=</span></span>
<span class="line"><span style="color:#6A737D"># 要信任的特定包的逗号分隔列表（当不信任所有包时）</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.packages.trusted</span><span style="color:#E1E4E8">=</span></span>
<span class="line"><span style="color:#6A737D"># 当连接请求和池满时是否阻塞。设置false会抛“JMSException异常”。</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.pool.block-if-full</span><span style="color:#E1E4E8">=true</span></span>
<span class="line"><span style="color:#6A737D"># 如果池仍然满，则在抛出异常前阻塞时间。</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.pool.block-if-full-timeout</span><span style="color:#E1E4E8">=-1ms</span></span>
<span class="line"><span style="color:#6A737D"># 是否在启动时创建连接。可以在启动时用于加热池。</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.pool.create-connection-on-startup</span><span style="color:#E1E4E8">=true</span></span>
<span class="line"><span style="color:#6A737D"># 是否用Pooledconnectionfactory代替普通的ConnectionFactory。</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.pool.enabled</span><span style="color:#E1E4E8">=false</span></span>
<span class="line"><span style="color:#6A737D"># 连接过期超时。</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.pool.expiry-timeout</span><span style="color:#E1E4E8">=0ms</span></span>
<span class="line"><span style="color:#6A737D"># 连接空闲超时</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.pool.idle-timeout</span><span style="color:#E1E4E8">=30s</span></span>
<span class="line"><span style="color:#6A737D"># 连接池最大连接数</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.pool.max-connections</span><span style="color:#E1E4E8">=1</span></span>
<span class="line"><span style="color:#6A737D"># 每个连接的有效会话的最大数目。</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.pool.maximum-active-session-per-connection</span><span style="color:#E1E4E8">=500</span></span>
<span class="line"><span style="color:#6A737D"># 当有"JMSException"时尝试重新连接</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.pool.reconnect-on-exception</span><span style="color:#E1E4E8">=true</span></span>
<span class="line"><span style="color:#6A737D"># 在空闲连接清除线程之间运行的时间。当为负数时，没有空闲连接驱逐线程运行。</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.pool.time-between-expiration-check</span><span style="color:#E1E4E8">=-1ms</span></span>
<span class="line"><span style="color:#6A737D"># 是否只使用一个MessageProducer</span></span>
<span class="line"><span style="color:#F97583">spring.activemq.pool.use-anonymous-producers</span><span style="color:#E1E4E8">=true</span></span></code></pre>
<h3 id="jmslistener有什么用">@JMSListener有什么用？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">//该注解用于将一个方法设置为监听端点，用于接收消息</span></span>
<span class="line"><span style="color:#6A737D">//destination用于指定接收消息的目的地，也就是消息来自哪个目的地，给出其名称</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">JmsListener</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">destination</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"queue2"</span><span style="color:#E1E4E8">) </span></span>
<span class="line"><span style="color:#F97583">public</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> receiveMsg1</span><span style="color:#E1E4E8">(String msg) {</span></span>
<span class="line"><span style="color:#E1E4E8">    System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"监听端点1收到消息，消息内容："</span><span style="color:#F97583">+</span><span style="color:#E1E4E8">msg);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="如何使用发布订阅模型">如何使用发布订阅模型？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="properties"><code><span class="line"><span style="color:#6A737D"># 设置为ture使用发布订阅模型, i.e</span></span>
<span class="line"><span style="color:#F97583">spring.jms.pub-sub-domain</span><span style="color:#E1E4E8">=true</span></span></code></pre>
<h2 id="测试-9问">测试 9问</h2>
<h3 id="单元测试与集成测试">单元测试与集成测试？</h3>
<p>见<a href="https://charlesix59.github.io/2023/02/07/subject/software_project/chapter11/#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95">软件工程第十一章单元测试与集成测试部分</a></p>
<h3 id="junit5的三个组件是什么">Junit5的三个组件是什么？</h3>
<p>JUnit 5 = JUnit Platform + JUnit Jupiter + JUnit Vintage</p>
<ul>
<li>JUnit Platform: 是在JVM上启动测试框架的基础，不仅支持Junit自制的测试引擎，其他测试引擎也都可以接入。</li>
<li>JUnit Jupiter: 提供了JUnit5的新的编程模型，是JUnit5新特性的核心。内部包含了一个测试引擎，用于在Junit Platform上运行。</li>
<li>JUnit Vintage: 由于JUint已经发展多年，为了照顾老的项目，其提供了兼容JUnit4.x,Junit3.x的测试引擎。</li>
</ul>
<h3 id="junit的常用注解">Junit的常用注解？</h3>
<p>@Test :表示方法是测试方法</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Test</span></span>
<span class="line"><span style="color:#F97583">void</span><span style="color:#B392F0"> contextLoads</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>@DisplayName :为测试类或者测试方法设置展示名称</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">DisplayName</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"测试displayname注解"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Test</span></span>
<span class="line"><span style="color:#F97583">void</span><span style="color:#B392F0"> testDisplayName</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">    System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>@BeforeEach：表示在每个单元测试之前执行</p>
<p>@AfterEach：表示在每个单元测试之后执行</p>
<p>@BeforeAll：表示在所有单元测试之前执行</p>
<p>@AfterAll：表示在所有单元测试之后执行</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">BeforeEach</span></span>
<span class="line"><span style="color:#F97583">    void</span><span style="color:#B392F0"> testBeforeEach</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">        System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"测试就要开始。。。"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">AfterEach</span></span>
<span class="line"><span style="color:#F97583">    void</span><span style="color:#B392F0"> testAfterEach</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">        System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"测试就要结束。。。"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">BeforeAll</span></span>
<span class="line"><span style="color:#F97583">    static</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> testBeforeAll</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">        System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"所有测试就要开始。。。"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8"> </span></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">AfterAll</span></span>
<span class="line"><span style="color:#F97583">    static</span><span style="color:#F97583"> void</span><span style="color:#B392F0"> testAfterAll</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">        System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"所有测试已经结束。。。"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span></code></pre>
<p>@Disabled :表示测试类或测试方法不执行</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Disabled</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Test</span></span>
<span class="line"><span style="color:#F97583">void</span><span style="color:#B392F0"> test2</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">    System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(jdbcTemplate.</span><span style="color:#B392F0">getClass</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>@Timeout :表示测试方法运行如果超过了指定时间将会返回错误</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Test</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Timeout</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">value</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> 500</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">unit</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> TimeUnit.MILLISECONDS)</span></span>
<span class="line"><span style="color:#F97583">void</span><span style="color:#B392F0"> testTimeOut</span><span style="color:#E1E4E8">() throws InterruptedException {</span></span>
<span class="line"><span style="color:#E1E4E8">    Thread.</span><span style="color:#B392F0">sleep</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">520</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>@RepeatedTest :表示方法可重复执行</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">RepeatedTest</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">5</span><span style="color:#E1E4E8">)    </span><span style="color:#6A737D">//重复测试5次</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">DisplayName</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"测试3"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">Test</span></span>
<span class="line"><span style="color:#F97583">void</span><span style="color:#B392F0"> test3</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">    System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">3</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">    System.out.</span><span style="color:#B392F0">println</span><span style="color:#E1E4E8">(jdbcTemplate.</span><span style="color:#B392F0">getClass</span><span style="color:#E1E4E8">());</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>@ParameterizedTest :表示方法是参数化测试</p>
<p>@Tag :表示单元测试类别</p>
<p>@ExtendWith :为测试类或测试方法提供扩展类引用</p>
<h3 id="junit的测试方法与注意事项">Junit的测试方法与注意事项？</h3>
<p>就这么测。。。</p>
<p>注意注意就行了。。。</p>
<h3 id="test依赖包含的库有哪些">Test依赖包含的库有哪些？</h3>
<p><img alt="img.png" loading="lazy" decoding="async" fetchpriority="auto" width="526" height="309" src="/_astro/dependencies.BVRUcZf7_Z1jLQWB.webp" ></p>
<h3 id="如何测试spring-boot程序">如何测试Spring Boot程序？</h3>
<p>@SpringBootTest注解：添加在需要依赖spring boot框架的测试类上， 不然不能使用Spring boot的相关开发功能
@Test注解：添加在测试方法上</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">SpringBootTest</span></span>
<span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> Boot05WebAdminApplicationTests</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">    @</span><span style="color:#F97583">Test</span></span>
<span class="line"><span style="color:#F97583">    void</span><span style="color:#B392F0"> contextLoads</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h3 id="mockmvc是什么">MockMvc是什么？</h3>
<p>MockMvc实现了对Http请求的模拟，能够直接使用网络的形式，转换到Controller的调用，这样可以使得测试速度快、不依赖网络环境，而且提供了一套验证的工具，这样可以使得请求的验证统一而且很方便。</p>
<h3 id="webmvctest有什么用">@WebMvcTest有什么用？</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="java"><code><span class="line"><span style="color:#6A737D">//该注解的使用实现针对spring mvc组件的切片测试，这样只加载mvc相关的配置的即可</span></span>
<span class="line"><span style="color:#E1E4E8">@</span><span style="color:#F97583">WebMvcTest</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">controllers</span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {HelloController.class})</span></span></code></pre>
<p>如果使用@SpringBootTest来修饰一个测试类，
则会加载所有配置，并注册相关的bean成为spring管理的bean，
包括service组件、mapper组件、数据源等</p>
<p>但是如果测试只涉及部分组件，如控制器，不需要使用service或mapper等组件，
可以使用切片测试对应的注解来实施测试，这样只加载需要的配置即可</p>
<p>比如使用@WebMvcTest，实现对spring mvc组件的切片测试，
这样就不能注入service等组件，因为不会加载service等的配置</p>  <div class="date" data-astro-cid-bvzihdzo>
发布于：<time datetime="2025-12-19T02:24:19.000Z"> Dec 19, 2025 </time> <div class="last-updated-on" data-astro-cid-bvzihdzo>
编辑于：<time datetime="2025-12-19T02:24:19.000Z"> Dec 19, 2025 </time> </div> </div> </div> </article> <aside class="blog-sidebar" data-astro-cid-bvzihdzo> <nav class="table-of-contents" id="toc" data-astro-cid-xvrfupwn><div class="toc-title" data-astro-cid-xvrfupwn>目录</div><ul class="toc-list" data-astro-cid-xvrfupwn><li class="toc-item toc-level-2" data-astro-cid-xvrfupwn><a href="#mybaits-21问" data-astro-cid-xvrfupwn>mybaits 21问</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#mybaits与hibernate的异同" data-astro-cid-xvrfupwn>Mybaits与Hibernate的异同？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#什么是orm" data-astro-cid-xvrfupwn>什么是ORM？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#mybatis怎么配置环境信息" data-astro-cid-xvrfupwn>mybatis怎么配置环境信息？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#mybaits的setting有什么作用" data-astro-cid-xvrfupwn>mybaits的setting有什么作用？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何配置类型别名" data-astro-cid-xvrfupwn>如何配置类型别名？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#三种数据源类型的区别" data-astro-cid-xvrfupwn>三种数据源类型的区别？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何指定映射文件" data-astro-cid-xvrfupwn>如何指定映射文件？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#select与属性的用法" data-astro-cid-xvrfupwn>select与属性的用法？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#insertupdatedelete的用法" data-astro-cid-xvrfupwn>insert、update、delete的用法？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#两种字符串替换的区别" data-astro-cid-xvrfupwn>两种字符串替换的区别？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#三种自动映射等级" data-astro-cid-xvrfupwn>三种自动映射等级？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#if标签的作用" data-astro-cid-xvrfupwn>if标签的作用？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#foreach标签的用法" data-astro-cid-xvrfupwn>foreach标签的用法？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#怎么配置日志级别" data-astro-cid-xvrfupwn>怎么配置日志级别？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#一级缓存和二级缓存的定义与区别" data-astro-cid-xvrfupwn>一级缓存和二级缓存的定义与区别？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#usecache与flushcache的作用" data-astro-cid-xvrfupwn>useCache与flushCache的作用？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#redis的概念" data-astro-cid-xvrfupwn>Redis的概念？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#那个注解是对dao组件的修饰" data-astro-cid-xvrfupwn>那个注解是对dao组件的修饰？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#javamodelgenerator配置sqlmappergenerator配置与javaclientgenerator配置的作用" data-astro-cid-xvrfupwn>JavaModelGenerator配置、sqlMapperGenerator配置与JavaClientGenerator配置的作用？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何实现分页" data-astro-cid-xvrfupwn>如何实现分页？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#分页最后封装成什么数据" data-astro-cid-xvrfupwn>分页最后封装成什么数据？</a></li><li class="toc-item toc-level-2" data-astro-cid-xvrfupwn><a href="#spring-framework-40问" data-astro-cid-xvrfupwn>spring Framework 40问</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#依赖注入的概念" data-astro-cid-xvrfupwn>依赖注入的概念？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#springcorecontainer是什么" data-astro-cid-xvrfupwn>springCoreContainer是什么？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#springioc容器的类型" data-astro-cid-xvrfupwn>springIoC容器的类型？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#applicationcontext容器的实现有哪些" data-astro-cid-xvrfupwn>ApplicationContext容器的实现有哪些？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#bean标记的使用" data-astro-cid-xvrfupwn>bean标记的使用？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#bean的范围有哪些" data-astro-cid-xvrfupwn>bean的范围有哪些？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何获取bean" data-astro-cid-xvrfupwn>如何获取bean？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#bean的生命周期和生命周期方法" data-astro-cid-xvrfupwn>bean的生命周期和生命周期方法？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#两种显式装配" data-astro-cid-xvrfupwn>两种显式装配？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#value和ref的区别" data-astro-cid-xvrfupwn>value和ref的区别？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何注入集合" data-astro-cid-xvrfupwn>如何注入集合？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#构造函数注入" data-astro-cid-xvrfupwn>构造函数注入？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#parent属性的作用" data-astro-cid-xvrfupwn>parent属性的作用？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何使用工厂方法实现di" data-astro-cid-xvrfupwn>如何使用工厂方法实现DI？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#自动装配的模式有哪些" data-astro-cid-xvrfupwn>自动装配的模式有哪些？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#显式装配与自动装配的关系" data-astro-cid-xvrfupwn>显式装配与自动装配的关系？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#依赖注入使用哪些注解" data-astro-cid-xvrfupwn>依赖注入使用哪些注解？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#configuration和bean注解的作用" data-astro-cid-xvrfupwn>@Configuration和@Bean注解的作用</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#什么是aop" data-astro-cid-xvrfupwn>什么是AOP？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#通知的概念" data-astro-cid-xvrfupwn>通知的概念？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#连接点的概念" data-astro-cid-xvrfupwn>连接点的概念？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#通知的类型位置" data-astro-cid-xvrfupwn>通知的类型（位置）？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#用来创建通知的注解有哪些" data-astro-cid-xvrfupwn>用来创建通知的注解有哪些？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何声明切入点" data-astro-cid-xvrfupwn>如何声明切入点？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#在返回后通知中如何获取目标方法的返回值" data-astro-cid-xvrfupwn>在返回后通知中如何获取目标方法的返回值？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#xml如何配置aop" data-astro-cid-xvrfupwn>XML如何配置AOP？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#jdbc-template的crud操作有哪些" data-astro-cid-xvrfupwn>JDBC Template的CRUD操作有哪些？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何创建处理全局异常" data-astro-cid-xvrfupwn>如何创建处理全局异常？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#jdbc-template-和-namedparameterjdbctemplate的区别" data-astro-cid-xvrfupwn>JDBC Template 和 NamedParameterJDBCTemplate的区别</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#事务的特征" data-astro-cid-xvrfupwn>事务的特征？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#事务的传播行为" data-astro-cid-xvrfupwn>事务的传播行为？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#事务并发可能导致的问题" data-astro-cid-xvrfupwn>事务并发可能导致的问题？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#platformtransactionmanager接口的作用" data-astro-cid-xvrfupwn>PlatformTransactionManager接口的作用？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何使用xml配置事务" data-astro-cid-xvrfupwn>如何使用XML配置事务？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#4-配置切点切面" data-astro-cid-xvrfupwn>4. 配置切点切面</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何启用注解驱动的事务编程模型" data-astro-cid-xvrfupwn>如何启用注解驱动的事务编程模型？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#sqlsessionfactory的创建与使用" data-astro-cid-xvrfupwn>SQLSessionFactory的创建与使用？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何使用java类替换webxml" data-astro-cid-xvrfupwn>如何使用Java类替换web.xml？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何集成ssm" data-astro-cid-xvrfupwn>如何集成SSM？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何配置spring-security" data-astro-cid-xvrfupwn>如何配置Spring Security？</a></li><li class="toc-item toc-level-2" data-astro-cid-xvrfupwn><a href="#spring-mvc-12问" data-astro-cid-xvrfupwn>spring MVC 12问</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#mvc模式的概念" data-astro-cid-xvrfupwn>MVC模式的概念？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#spring-mvc包含的组件及其作用" data-astro-cid-xvrfupwn>Spring MVC包含的组件及其作用？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#spring-mvc处理请求的过程" data-astro-cid-xvrfupwn>Spring MVC处理请求的过程？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#servlet合法的url模式" data-astro-cid-xvrfupwn>servlet合法的URL模式？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何配置dispatcherservlet" data-astro-cid-xvrfupwn>如何配置DispatcherServlet？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何配置spring-mvc配置文件的位置" data-astro-cid-xvrfupwn>如何配置Spring MVC配置文件的位置？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#spring和spring-mvc配置文件的默认名称" data-astro-cid-xvrfupwn>Spring和Spring MVC配置文件的默认名称？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何配置视图解析器" data-astro-cid-xvrfupwn>如何配置视图解析器？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#创建和使用控制器" data-astro-cid-xvrfupwn>创建和使用控制器？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何映射不同的请求" data-astro-cid-xvrfupwn>如何映射不同的请求？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何配置静态资源" data-astro-cid-xvrfupwn>如何配置静态资源？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何构建restful-api" data-astro-cid-xvrfupwn>如何构建Restful API？</a></li><li class="toc-item toc-level-2" data-astro-cid-xvrfupwn><a href="#框架22问" data-astro-cid-xvrfupwn>框架22问</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#启动依赖是什么" data-astro-cid-xvrfupwn>启动依赖是什么？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#actuator的作用" data-astro-cid-xvrfupwn>Actuator的作用？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#spring-boot-配置依赖" data-astro-cid-xvrfupwn>Spring Boot 配置依赖？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何修饰启动类" data-astro-cid-xvrfupwn>如何修饰启动类？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#springbootapplication是哪三合一" data-astro-cid-xvrfupwn>@SpringBootApplication是哪三合一？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何排除指定的自动配置" data-astro-cid-xvrfupwn>如何排除指定的自动配置？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#一个启动类能否同时作为控制器类" data-astro-cid-xvrfupwn>一个启动类能否同时作为控制器类？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何自定义banner" data-astro-cid-xvrfupwn>如何自定义banner？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#springboot如何实现自动配置" data-astro-cid-xvrfupwn>SpringBoot如何实现自动配置？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#springboot如何配置视图解析器" data-astro-cid-xvrfupwn>SpringBoot如何配置视图解析器？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何配置端口号" data-astro-cid-xvrfupwn>如何配置端口号？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#properties与yml的异同" data-astro-cid-xvrfupwn>properties与yml的异同？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#静态资源默认位置在哪" data-astro-cid-xvrfupwn>静态资源默认位置在哪？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何自定义静态资源的位置" data-astro-cid-xvrfupwn>如何自定义静态资源的位置？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#有哪些常用的json解析器" data-astro-cid-xvrfupwn>有哪些常用的JSON解析器？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#为哪些json解析器提供了自动配置" data-astro-cid-xvrfupwn>为哪些JSON解析器提供了自动配置？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何使用fastjson" data-astro-cid-xvrfupwn>如何使用fastjson？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何自定义错误界面的位置" data-astro-cid-xvrfupwn>如何自定义错误界面的位置？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#错误界面使用的顺序如何" data-astro-cid-xvrfupwn>错误界面使用的顺序如何？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何定义局部异常handler" data-astro-cid-xvrfupwn>如何定义局部异常handler？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何定义全局异常handler" data-astro-cid-xvrfupwn>如何定义全局异常handler？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何使用restcontroller" data-astro-cid-xvrfupwn>如何使用RestController？</a></li><li class="toc-item toc-level-2" data-astro-cid-xvrfupwn><a href="#thymeleaf-11问" data-astro-cid-xvrfupwn>Thymeleaf 11问</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#thymeleaf如何使用变量表达式页面获取不同范围的属性" data-astro-cid-xvrfupwn>Thymeleaf如何使用变量表达式页面获取不同范围的属性？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#thymeleaf的五种表达式" data-astro-cid-xvrfupwn>Thymeleaf的五种表达式？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何使用选择变量表达式" data-astro-cid-xvrfupwn>如何使用选择变量表达式？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#链接表达式的四种写法" data-astro-cid-xvrfupwn>链接表达式的四种写法？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#怎么定义和引用片段" data-astro-cid-xvrfupwn>怎么定义和引用片段？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#哪些字面标记不合法" data-astro-cid-xvrfupwn>哪些字面标记不合法？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#th属性的作用" data-astro-cid-xvrfupwn>th：*属性的作用？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#thymeleaf的名称空间" data-astro-cid-xvrfupwn>Thymeleaf的名称空间？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#有哪些基本对象" data-astro-cid-xvrfupwn>有哪些基本对象？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#表达式工具对象如何使用" data-astro-cid-xvrfupwn>表达式工具对象如何使用？</a></li><li class="toc-item toc-level-2" data-astro-cid-xvrfupwn><a href="#spring-boot-jpa-13问" data-astro-cid-xvrfupwn>Spring Boot JPA 13问</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#springboot支持的三种数据源是什么" data-astro-cid-xvrfupwn>SpringBoot支持的三种数据源是什么？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何配置数据源" data-astro-cid-xvrfupwn>如何配置数据源？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#springdatajpa是什么" data-astro-cid-xvrfupwn>SpringDataJPA是什么？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#springdata-jpa-需不需要jpa提供程序" data-astro-cid-xvrfupwn>SpringData JPA 需不需要JPA提供程序？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#jpa个各个属性都有什么作用" data-astro-cid-xvrfupwn>JPA个各个属性都有什么作用？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#有哪些常用的注解" data-astro-cid-xvrfupwn>有哪些常用的注解？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#repository接口和他的派生类型" data-astro-cid-xvrfupwn>Repository接口和他的派生类型？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何构建简单的条件查询" data-astro-cid-xvrfupwn>如何构建简单的条件查询？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何使用query查询" data-astro-cid-xvrfupwn>如何使用@Query查询？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何进行增删改" data-astro-cid-xvrfupwn>如何进行增删改？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何声明事务" data-astro-cid-xvrfupwn>如何声明事务？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何配置mapper映射文件的位置" data-astro-cid-xvrfupwn>如何配置mapper映射文件的位置？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何开启对mapper包的扫描" data-astro-cid-xvrfupwn>如何开启对mapper包的扫描？</a></li><li class="toc-item toc-level-2" data-astro-cid-xvrfupwn><a href="#消息传递-10问" data-astro-cid-xvrfupwn>消息传递 10问</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#消息传递的概念" data-astro-cid-xvrfupwn>消息传递的概念？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#jms的概念" data-astro-cid-xvrfupwn>JMS的概念？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#点对点模型有什么特点" data-astro-cid-xvrfupwn>点对点模型有什么特点？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#发布订阅模型的特点" data-astro-cid-xvrfupwn>发布订阅模型的特点？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#activemq是什么" data-astro-cid-xvrfupwn>ActiveMQ是什么？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何启动activemq" data-astro-cid-xvrfupwn>如何启动ActiveMQ？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#jms创建什么链接实例" data-astro-cid-xvrfupwn>JMS创建什么链接实例？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何配置activemq" data-astro-cid-xvrfupwn>如何配置ActiveMQ？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#jmslistener有什么用" data-astro-cid-xvrfupwn>@JMSListener有什么用？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何使用发布订阅模型" data-astro-cid-xvrfupwn>如何使用发布订阅模型？</a></li><li class="toc-item toc-level-2" data-astro-cid-xvrfupwn><a href="#测试-9问" data-astro-cid-xvrfupwn>测试 9问</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#单元测试与集成测试" data-astro-cid-xvrfupwn>单元测试与集成测试？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#junit5的三个组件是什么" data-astro-cid-xvrfupwn>Junit5的三个组件是什么？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#junit的常用注解" data-astro-cid-xvrfupwn>Junit的常用注解？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#junit的测试方法与注意事项" data-astro-cid-xvrfupwn>Junit的测试方法与注意事项？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#test依赖包含的库有哪些" data-astro-cid-xvrfupwn>Test依赖包含的库有哪些？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#如何测试spring-boot程序" data-astro-cid-xvrfupwn>如何测试Spring Boot程序？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#mockmvc是什么" data-astro-cid-xvrfupwn>MockMvc是什么？</a></li><li class="toc-item toc-level-3" data-astro-cid-xvrfupwn><a href="#webmvctest有什么用" data-astro-cid-xvrfupwn>@WebMvcTest有什么用？</a></li></ul></nav> </aside> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2025 @charlesix59. All rights reserved.
<div class="social-links" data-astro-cid-sz7xmlte> <a href="https://https://github.com/charlesix59" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>find me on Github</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/github" data-astro-cid-sz7xmlte><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </footer>  </body></html>